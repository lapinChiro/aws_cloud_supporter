{"file":"/home/kyohei/aws_cloud_supporter/tests/unit/core/extractor.test.ts","mappings":"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","names":[],"sources":["/home/kyohei/aws_cloud_supporter/tests/unit/core/extractor.test.ts"],"sourcesContent":["// CLAUDE.mdæº–æ‹ ResourceExtractorãƒ†ã‚¹ãƒˆï¼ˆGREENæ®µéš: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é‡è¦– + Type-Drivenï¼‰\n\nimport { readFileSync, writeFileSync, mkdirSync } from 'fs';\nimport path from 'path';\nimport { tmpdir } from 'os';\n\n// å…¨ãƒ†ã‚¹ãƒˆã§ä½¿ç”¨ã™ã‚‹ä¸€æ™‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª\nlet tempDir: string;\n\n// å…¨ãƒ†ã‚¹ãƒˆå‰ã®æº–å‚™\nbeforeAll(() => {\n  tempDir = path.join(tmpdir(), 'aws-cloud-supporter-extractor-test');\n  try {\n    mkdirSync(tempDir, { recursive: true });\n  } catch {\n    // æ—¢å­˜ã®å ´åˆã¯ç„¡è¦–\n  }\n  \n  // ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ãƒ¼ä½œæˆ\n  createExtractionTestFixtures();\n});\n\nfunction createExtractionTestFixtures() {\n  // æ··åœ¨ãƒªã‚½ãƒ¼ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆã‚µãƒãƒ¼ãƒˆå¯¾è±¡ï¼‹å¯¾è±¡å¤–ï¼‰\n  const mixedResourcesTemplate = {\n    AWSTemplateFormatVersion: \"2010-09-09\",\n    Description: \"Mixed resources template for extraction testing\",\n    Resources: {\n      // ã‚µãƒãƒ¼ãƒˆå¯¾è±¡ãƒªã‚½ãƒ¼ã‚¹ï¼ˆ8å€‹ï¼‰\n      TestRDS: {\n        Type: \"AWS::RDS::DBInstance\",\n        Properties: { Engine: \"mysql\", DBInstanceClass: \"db.t3.micro\" }\n      },\n      TestLambda: {\n        Type: \"AWS::Lambda::Function\", \n        Properties: { Runtime: \"nodejs20.x\", Handler: \"index.handler\" }\n      },\n      TestServerlessFunction: {\n        Type: \"AWS::Serverless::Function\",\n        Properties: { Runtime: \"python3.11\", Handler: \"app.lambda_handler\" }\n      },\n      TestECSService: {\n        Type: \"AWS::ECS::Service\",\n        Properties: { LaunchType: \"FARGATE\", Cluster: \"test-cluster\" }\n      },\n      TestALB: {\n        Type: \"AWS::ElasticLoadBalancingV2::LoadBalancer\",\n        Properties: { Type: \"application\", Scheme: \"internet-facing\" }\n      },\n      TestDynamoDB: {\n        Type: \"AWS::DynamoDB::Table\",\n        Properties: { BillingMode: \"PAY_PER_REQUEST\" }\n      },\n      TestAPI: {\n        Type: \"AWS::ApiGateway::RestApi\",\n        Properties: { Name: \"test-api\" }\n      },\n      TestServerlessAPI: {\n        Type: \"AWS::Serverless::Api\",\n        Properties: { StageName: \"prod\" }\n      },\n      \n      // ã‚µãƒãƒ¼ãƒˆå¯¾è±¡å¤–ãƒªã‚½ãƒ¼ã‚¹ï¼ˆ6å€‹ï¼‰\n      TestS3: {\n        Type: \"AWS::S3::Bucket\",\n        Properties: { BucketName: \"test-bucket\" }\n      },\n      TestEC2: {\n        Type: \"AWS::EC2::Instance\",\n        Properties: { InstanceType: \"t3.micro\" }\n      },\n      TestVPC: {\n        Type: \"AWS::EC2::VPC\",\n        Properties: { CidrBlock: \"10.0.0.0/16\" }\n      },\n      TestSNS: {\n        Type: \"AWS::SNS::Topic\",\n        Properties: { TopicName: \"test-topic\" }\n      },\n      TestNLB: {\n        Type: \"AWS::ElasticLoadBalancingV2::LoadBalancer\",\n        Properties: { Type: \"network\", Scheme: \"internal\" }\n      },\n      TestECSServiceEC2: {\n        Type: \"AWS::ECS::Service\", \n        Properties: { LaunchType: \"EC2\", Cluster: \"test-cluster\" }\n      }\n    }\n  };\n\n  writeFileSync(\n    path.join(tempDir, 'mixed-resources.json'), \n    JSON.stringify(mixedResourcesTemplate, null, 2), \n    'utf8'\n  );\n\n  // å¤§é‡ãƒªã‚½ãƒ¼ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆæ­£ç¢ºã«500å€‹ï¼‰\n  const largeResourcesTemplate = {\n    AWSTemplateFormatVersion: \"2010-09-09\",\n    Description: \"Large resources template for performance testing\",\n    Resources: {} as Record<string, unknown>\n  };\n\n  // 500ãƒªã‚½ãƒ¼ã‚¹ç”Ÿæˆï¼ˆã‚µãƒãƒ¼ãƒˆå¯¾è±¡150å€‹ + å¯¾è±¡å¤–350å€‹ï¼‰\n  for (let i = 0; i < 100; i++) {\n    // ã‚µãƒãƒ¼ãƒˆå¯¾è±¡ãƒªã‚½ãƒ¼ã‚¹ï¼ˆ100å€‹ï¼‰\n    largeResourcesTemplate.Resources[`RDS${i}`] = {\n      Type: \"AWS::RDS::DBInstance\",\n      Properties: { Engine: \"mysql\", DBInstanceClass: \"db.t3.micro\" }\n    };\n  }\n  \n  for (let i = 0; i < 50; i++) {\n    // ã‚µãƒãƒ¼ãƒˆå¯¾è±¡ãƒªã‚½ãƒ¼ã‚¹ï¼ˆ50å€‹ï¼‰\n    largeResourcesTemplate.Resources[`Lambda${i}`] = {\n      Type: \"AWS::Lambda::Function\",\n      Properties: { Runtime: \"nodejs20.x\" }\n    };\n  }\n\n  for (let i = 0; i < 350; i++) {\n    // ã‚µãƒãƒ¼ãƒˆå¯¾è±¡å¤–ãƒªã‚½ãƒ¼ã‚¹ï¼ˆ350å€‹ï¼‰\n    largeResourcesTemplate.Resources[`S3${i}`] = {\n      Type: \"AWS::S3::Bucket\",\n      Properties: { BucketName: `test-bucket-${i}` }\n    };\n  }\n\n  writeFileSync(\n    path.join(tempDir, 'large-resources-500.json'),\n    JSON.stringify(largeResourcesTemplate, null, 2),\n    'utf8'\n  );\n\n  // ECSç‰¹æ®Šã‚±ãƒ¼ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ\n  const ecsTestTemplate = {\n    AWSTemplateFormatVersion: \"2010-09-09\",\n    Resources: {\n      FargateService: {\n        Type: \"AWS::ECS::Service\",\n        Properties: { LaunchType: \"FARGATE\" }\n      },\n      EC2Service: {\n        Type: \"AWS::ECS::Service\", \n        Properties: { LaunchType: \"EC2\" }\n      },\n      FargateSpotService: {\n        Type: \"AWS::ECS::Service\",\n        Properties: {\n          CapacityProviderStrategy: [\n            { CapacityProvider: \"FARGATE_SPOT\", Weight: 1 }\n          ]\n        }\n      },\n      MixedCapacityService: {\n        Type: \"AWS::ECS::Service\",\n        Properties: {\n          CapacityProviderStrategy: [\n            { CapacityProvider: \"FARGATE\", Weight: 1 },\n            { CapacityProvider: \"EC2\", Weight: 1 }\n          ]\n        }\n      }\n    }\n  };\n\n  writeFileSync(\n    path.join(tempDir, 'ecs-test.json'),\n    JSON.stringify(ecsTestTemplate, null, 2),\n    'utf8'\n  );\n\n  // ALB/NLBåˆ¤å®šãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ\n  const loadBalancerTestTemplate = {\n    AWSTemplateFormatVersion: \"2010-09-09\",\n    Resources: {\n      ApplicationLB: {\n        Type: \"AWS::ElasticLoadBalancingV2::LoadBalancer\",\n        Properties: { Type: \"application\" }\n      },\n      NetworkLB: {\n        Type: \"AWS::ElasticLoadBalancingV2::LoadBalancer\",\n        Properties: { Type: \"network\" }\n      },\n      DefaultLB: {\n        Type: \"AWS::ElasticLoadBalancingV2::LoadBalancer\",\n        Properties: { Scheme: \"internet-facing\" } // Typeãªã—=application\n      },\n      GatewayLB: {\n        Type: \"AWS::ElasticLoadBalancingV2::LoadBalancer\",\n        Properties: { Type: \"gateway\" }\n      }\n    }\n  };\n\n  writeFileSync(\n    path.join(tempDir, 'loadbalancer-test.json'),\n    JSON.stringify(loadBalancerTestTemplate, null, 2),\n    'utf8'\n  );\n}\n\ndescribe('ResourceExtractoré«˜é€ŸæŠ½å‡ºï¼ˆCLAUDE.md: GREENæ®µéšï¼‰', () => {\n\n  // GREENæ®µéš: ResourceExtractorå®Ÿè£…ç¢ºèª\n  it('should implement ResourceExtractor successfully', () => {\n    expect(() => {\n      require('../../../src/core/extractor');\n    }).not.toThrow(); // å®Ÿè£…å®Œäº†ã§æˆåŠŸ\n  });\n\n  // O(n)ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ è¦ä»¶ãƒ†ã‚¹ãƒˆï¼ˆGREENæ®µéš: å®Ÿè£…ç¢ºèªï¼‰\n  it('should extract resources with O(n) algorithm', () => {\n    const { ResourceExtractor } = require('../../../src/core/extractor');\n    const { TemplateParser } = require('../../../src/core/parser');\n    \n    const parser = new TemplateParser();\n    const extractor = new ResourceExtractor();\n    \n    // ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ™‚é–“è¨ˆç®—é‡ãŒO(n)ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª\n    expect(typeof extractor.extract).toBe('function');\n    expect(extractor.extract.length).toBe(1); // å¼•æ•°1å€‹ï¼ˆCloudFormationTemplateï¼‰\n  });\n\n  // 500ãƒªã‚½ãƒ¼ã‚¹ãƒ»3ç§’ä»¥å†…è¦ä»¶ãƒ†ã‚¹ãƒˆï¼ˆGREENæ®µéš: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç¢ºèªï¼‰\n  it('should process 500 resources within 3 seconds', async () => {\n    const { ResourceExtractor } = require('../../../src/core/extractor');\n    const { TemplateParser } = require('../../../src/core/parser');\n    \n    const parser = new TemplateParser();\n    const extractor = new ResourceExtractor();\n    \n    const largePath = path.join(tempDir, 'large-resources-500.json');\n    const template = await parser.parse(largePath);\n    \n    const startTime = performance.now();\n    const result = extractor.extract(template);\n    const duration = performance.now() - startTime;\n    \n    expect(duration).toBeLessThan(3000); // 3ç§’ä»¥å†…\n    expect(result.totalCount).toBe(500);\n    expect(result.extractionTimeMs).toBeLessThan(3000);\n  });\n\n  // 8ã¤ã®ã‚µãƒãƒ¼ãƒˆå¯¾è±¡ãƒªã‚½ãƒ¼ã‚¹åˆ¤å®šãƒ†ã‚¹ãƒˆï¼ˆGREENæ®µéš: æ­£ç¢ºæ€§ç¢ºèªï¼‰\n  it('should accurately identify 8 supported resource types', async () => {\n    const { ResourceExtractor } = require('../../../src/core/extractor');\n    const { TemplateParser } = require('../../../src/core/parser');\n    \n    const parser = new TemplateParser();\n    const extractor = new ResourceExtractor();\n    \n    const mixedPath = path.join(tempDir, 'mixed-resources.json');\n    const template = await parser.parse(mixedPath);\n    const result = extractor.extract(template);\n    \n    // ã‚µãƒãƒ¼ãƒˆå¯¾è±¡ãƒªã‚½ãƒ¼ã‚¹ãŒæ­£ç¢ºã«æŠ½å‡ºã•ã‚Œã¦ã„ã‚‹ç¢ºèª\n    expect(result.supported.length).toBe(8); // 8å€‹ã®ã‚µãƒãƒ¼ãƒˆå¯¾è±¡\n    expect(result.unsupported.length).toBe(6); // 6å€‹ã®éå¯¾è±¡ï¼ˆNLBã€ECS EC2å«ã‚€ï¼‰\n    expect(result.totalCount).toBe(14);\n  });\n\n  // ã‚µãƒãƒ¼ãƒˆå¯¾è±¡å¤–ãƒªã‚½ãƒ¼ã‚¹é›†è¨ˆãƒ†ã‚¹ãƒˆï¼ˆGREENæ®µéš: æ©Ÿèƒ½ç¢ºèªï¼‰\n  it('should collect unsupported resource logical IDs', async () => {\n    const { ResourceExtractor } = require('../../../src/core/extractor');\n    const { TemplateParser } = require('../../../src/core/parser');\n    \n    const parser = new TemplateParser();\n    const extractor = new ResourceExtractor();\n    \n    const mixedPath = path.join(tempDir, 'mixed-resources.json');\n    const template = await parser.parse(mixedPath);\n    const result = extractor.extract(template);\n    \n    // éã‚µãƒãƒ¼ãƒˆãƒªã‚½ãƒ¼ã‚¹IDç¢ºèª\n    expect(result.unsupported).toContain('TestS3');\n    expect(result.unsupported).toContain('TestEC2');\n    expect(result.unsupported).toContain('TestVPC');\n    expect(result.unsupported).toContain('TestNLB'); // Network LB\n    expect(result.unsupported).toContain('TestECSServiceEC2'); // ECS EC2\n  });\n\n  // ECS Fargateåˆ¤å®šãƒ†ã‚¹ãƒˆï¼ˆGREENæ®µéš: ç‰¹æ®Šã‚±ãƒ¼ã‚¹ç¢ºèªï¼‰\n  it('should detect ECS Fargate services correctly', async () => {\n    const { ResourceExtractor } = require('../../../src/core/extractor');\n    const { TemplateParser } = require('../../../src/core/parser');\n    \n    const parser = new TemplateParser();\n    const extractor = new ResourceExtractor();\n    \n    const ecsPath = path.join(tempDir, 'ecs-test.json');\n    const template = await parser.parse(ecsPath);\n    const result = extractor.extract(template);\n    \n    // Fargateã‚µãƒ¼ãƒ“ã‚¹ã®ã¿ãŒã‚µãƒãƒ¼ãƒˆå¯¾è±¡ã¨ã—ã¦æŠ½å‡ºã•ã‚Œã‚‹  \n    const fargateServices = result.supported.filter(r => r.Type === 'AWS::ECS::Service');\n    expect(fargateServices.length).toBe(3); // Fargate + FargateSpot + MixedCapacity\n    \n    // EC2ã‚µãƒ¼ãƒ“ã‚¹ã¯ã‚µãƒãƒ¼ãƒˆå¯¾è±¡å¤–\n    expect(result.unsupported).toContain('EC2Service');\n  });\n\n  // ALB vs NLBåˆ¤å®šãƒ†ã‚¹ãƒˆï¼ˆGREENæ®µéš: åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ç¢ºèªï¼‰\n  it('should distinguish ALB from NLB correctly', async () => {\n    const { ResourceExtractor } = require('../../../src/core/extractor');\n    const { TemplateParser } = require('../../../src/core/parser');\n    \n    const parser = new TemplateParser();\n    const extractor = new ResourceExtractor();\n    \n    const lbPath = path.join(tempDir, 'loadbalancer-test.json');\n    const template = await parser.parse(lbPath);\n    const result = extractor.extract(template);\n    \n    // Application LBã®ã¿ãŒã‚µãƒãƒ¼ãƒˆå¯¾è±¡\n    const supportedLBs = result.supported.filter(r => \n      r.Type === 'AWS::ElasticLoadBalancingV2::LoadBalancer'\n    );\n    expect(supportedLBs.length).toBe(2); // ApplicationLB + DefaultLB\n    \n    // Network LBã¨Gateway LBã¯ã‚µãƒãƒ¼ãƒˆå¯¾è±¡å¤–\n    expect(result.unsupported).toContain('NetworkLB');\n    expect(result.unsupported).toContain('GatewayLB');\n  });\n\n  // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ãƒ†ã‚¹ãƒˆï¼ˆGREENæ®µéš: ãƒ¡ãƒˆãƒªã‚¯ã‚¹ç¢ºèªï¼‰\n  it('should provide extraction time metrics', async () => {\n    const { ResourceExtractor } = require('../../../src/core/extractor');\n    const { TemplateParser } = require('../../../src/core/parser');\n    \n    const parser = new TemplateParser();\n    const extractor = new ResourceExtractor();\n    \n    const mixedPath = path.join(tempDir, 'mixed-resources.json');\n    const template = await parser.parse(mixedPath);\n    const result = extractor.extract(template);\n    \n    expect(result.extractionTimeMs).toBeDefined();\n    expect(typeof result.extractionTimeMs).toBe('number');\n    expect(result.extractionTimeMs).toBeGreaterThanOrEqual(0); // é«˜é€Ÿå‡¦ç†ã§0ã‚‚è¨±å¯\n  });\n\n  // å‹å®‰å…¨æ€§ãƒ†ã‚¹ãƒˆï¼ˆGREENæ®µéš: ExtractResultå‹ç¢ºèªï¼‰\n  it('should return type-safe ExtractResult', async () => {\n    const { ResourceExtractor } = require('../../../src/core/extractor');\n    const { TemplateParser } = require('../../../src/core/parser');\n    \n    const parser = new TemplateParser();\n    const extractor = new ResourceExtractor();\n    \n    const mixedPath = path.join(tempDir, 'mixed-resources.json');\n    const template = await parser.parse(mixedPath);\n    const result = extractor.extract(template);\n    \n    // ExtractResultå‹ã®æ§‹é€ ç¢ºèª\n    expect(result).toHaveProperty('supported');\n    expect(result).toHaveProperty('unsupported');\n    expect(result).toHaveProperty('totalCount');\n    expect(result).toHaveProperty('extractionTimeMs');\n    \n    expect(Array.isArray(result.supported)).toBe(true);\n    expect(Array.isArray(result.unsupported)).toBe(true);\n    expect(typeof result.totalCount).toBe('number');\n    expect(typeof result.extractionTimeMs).toBe('number');\n  });\n\n  // CLAUDE.md: No any typesæ¤œè¨¼\n  it('should not use any types in extractor implementation', () => {\n    const extractorCode = readFileSync(\n      path.join(__dirname, '../../../src/core/extractor.ts'),\n      'utf8'\n    );\n    expect(extractorCode).toHaveNoAnyTypes();\n  });\n\n  // å˜ä¸€è²¬ä»»åŸå‰‡ãƒ†ã‚¹ãƒˆï¼ˆGREENæ®µéš: SOLIDåŸå‰‡ç¢ºèªï¼‰\n  it('should follow single responsibility principle', () => {\n    const { ResourceExtractor } = require('../../../src/core/extractor');\n    const extractor = new ResourceExtractor();\n    \n    // ResourceExtractorã¯æŠ½å‡ºå‡¦ç†ã®ã¿ã«ç‰¹åŒ–\n    const publicMethods = Object.getOwnPropertyNames(Object.getPrototypeOf(extractor))\n      .filter(name => !name.startsWith('_') && name !== 'constructor' && typeof extractor[name] === 'function');\n    \n    // ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰ã¯æŠ½å‡ºé–¢é€£ã®ã¿\n    expect(publicMethods).toContain('extract');\n    console.log('ğŸ“ Public methods:', publicMethods);\n    expect(publicMethods.length).toBeLessThanOrEqual(6); // extract + å†…éƒ¨ãƒ¡ã‚½ãƒƒãƒ‰ç­‰ï¼ˆé©åˆ‡ç¯„å›²ï¼‰\n  });\n});\n\ndescribe('ResourceExtractorãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆCLAUDE.md: æ€§èƒ½è¦ä»¶ï¼‰', () => {\n\n  // å¤§é‡ãƒªã‚½ãƒ¼ã‚¹å‡¦ç†ãƒ†ã‚¹ãƒˆï¼ˆGREENæ®µéš: 500ãƒªã‚½ãƒ¼ã‚¹3ç§’ä»¥å†…ï¼‰\n  it('should handle large templates efficiently', async () => {\n    const { ResourceExtractor, ExtractionPerformanceMonitor } = require('../../../src/core/extractor');\n    const { TemplateParser } = require('../../../src/core/parser');\n    \n    const parser = new TemplateParser();\n    const extractor = new ResourceExtractor();\n    \n    const largePath = path.join(tempDir, 'large-resources-500.json');\n    const template = await parser.parse(largePath);\n    \n    const performance = ExtractionPerformanceMonitor.measureExtractionPerformance(extractor, template);\n    \n    expect(performance.result.totalCount).toBe(500);\n    expect(performance.result.extractionTimeMs).toBeLessThan(3000); // 3ç§’ä»¥å†…\n    expect(performance.performanceGrade).not.toBe('F'); // æ€§èƒ½è¦ä»¶é”æˆ\n  });\n\n  // ä¸¦è¡ŒæŠ½å‡ºãƒ†ã‚¹ãƒˆï¼ˆGREENæ®µéš: å‹å®‰å…¨ä¸¦è¡Œå‡¦ç†ï¼‰\n  it('should support concurrent extraction safely', async () => {\n    const { ResourceExtractor } = require('../../../src/core/extractor');\n    const { TemplateParser } = require('../../../src/core/parser');\n    \n    const parser = new TemplateParser();\n    const extractor = new ResourceExtractor();\n    \n    const mixedPath = path.join(tempDir, 'mixed-resources.json');\n    const template = await parser.parse(mixedPath);\n    \n    // åŒã˜ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä¸¦è¡ŒæŠ½å‡º\n    const promises = Array(5).fill(null).map(() => \n      extractor.extract(template)\n    );\n    \n    const results = await Promise.all(promises);\n    \n    // å…¨ã¦åŒã˜çµæœãŒå¾—ã‚‰ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆçŠ¶æ…‹æ±šæŸ“ãªã—ï¼‰\n    results.forEach(result => {\n      expect(result.totalCount).toBe(14);\n      expect(result.supported.length).toBe(8);\n    });\n  });\n\n  // ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ãƒ†ã‚¹ãƒˆï¼ˆGREENæ®µéš: ãƒªãƒ¼ã‚¯ãªã—ç¢ºèªï¼‰\n  it('should extract resources without memory leaks', async () => {\n    const { ResourceExtractor } = require('../../../src/core/extractor');\n    const { TemplateParser } = require('../../../src/core/parser');\n    \n    const parser = new TemplateParser();\n    const extractor = new ResourceExtractor();\n    \n    const mixedPath = path.join(tempDir, 'mixed-resources.json');\n    const template = await parser.parse(mixedPath);\n    \n    const memoryBefore = process.memoryUsage().heapUsed;\n    \n    // 100å›æŠ½å‡º\n    for (let i = 0; i < 100; i++) {\n      extractor.extract(template);\n    }\n    \n    const memoryAfter = process.memoryUsage().heapUsed;\n    const memoryDelta = (memoryAfter - memoryBefore) / 1024 / 1024;\n    \n    expect(memoryDelta).toBeLessThan(20); // ãƒ¡ãƒ¢ãƒªå¢—åŠ 20MBä»¥ä¸‹\n  });\n\n  // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ãƒ†ã‚¹ãƒˆï¼ˆGREENæ®µéš: è­¦å‘Šç¢ºèªï¼‰\n  it('should warn when extraction exceeds time limits', async () => {\n    const { ResourceExtractor } = require('../../../src/core/extractor');\n    \n    // é€šå¸¸ã®å‡¦ç†ã§ã¯è­¦å‘Šã¯å‡ºãªã„æƒ³å®š\n    const extractor = new ResourceExtractor();\n    const smallTemplate = {\n      AWSTemplateFormatVersion: \"2010-09-09\",\n      Resources: {\n        Test: { Type: \"AWS::RDS::DBInstance\", Properties: {} }\n      }\n    };\n    \n    const result = extractor.extract(smallTemplate);\n    expect(result.extractionTimeMs).toBeLessThan(100); // å°ã•ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯100msä»¥ä¸‹\n  });\n});\n\ndescribe('ResourceExtractorå‹å®‰å…¨æ€§ï¼ˆCLAUDE.md: Type-Driven Developmentï¼‰', () => {\n\n  // å‹ã‚¬ãƒ¼ãƒ‰é–¢æ•°çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆGREENæ®µéš: Don't Reinvent the Wheelï¼‰\n  it('should integrate with existing type guard functions', () => {\n    const { ResourceExtractor } = require('../../../src/core/extractor');\n    const { isSupportedResource, isFargateService, isApplicationLoadBalancer } = require('../../../src/types/cloudformation');\n    \n    // æ—¢å­˜å‹ã‚¬ãƒ¼ãƒ‰é–¢æ•°ãŒResourceExtractorã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ç¢ºèª\n    const testResource = { Type: 'AWS::RDS::DBInstance', Properties: {} };\n    \n    expect(isSupportedResource(testResource)).toBe(true);\n    expect(typeof isFargateService).toBe('function');\n    expect(typeof isApplicationLoadBalancer).toBe('function');\n    \n    // ResourceExtractorå†…éƒ¨ã§ã“ã‚Œã‚‰ã®é–¢æ•°ãŒæ´»ç”¨ã•ã‚Œã¦ã„ã‚‹\n    const extractor = new ResourceExtractor();\n    expect(extractor).toBeDefined();\n  });\n\n  // Unionå‹ä½¿ç”¨ãƒ†ã‚¹ãƒˆï¼ˆGREENæ®µéš: SupportedResourceç¢ºèªï¼‰\n  it('should utilize SupportedResource union type', async () => {\n    const { ResourceExtractor } = require('../../../src/core/extractor');\n    \n    const extractor = new ResourceExtractor();\n    const testTemplate = {\n      AWSTemplateFormatVersion: \"2010-09-09\",\n      Resources: {\n        TestRDS: { Type: \"AWS::RDS::DBInstance\", Properties: {} },\n        TestLambda: { Type: \"AWS::Lambda::Function\", Properties: {} }\n      }\n    };\n    \n    const result = extractor.extract(testTemplate);\n    \n    // SupportedResource Unionå‹ãŒæ­£ã—ãä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹\n    expect(result.supported).toHaveLength(2);\n    result.supported.forEach(resource => {\n      expect(resource.LogicalId).toBeDefined();\n      expect(resource.Type).toBeDefined();\n    });\n  });\n\n  // CloudFormationTemplateå‹çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆGREENæ®µéš: å‹æ¨è«–ç¢ºèªï¼‰\n  it('should work with CloudFormationTemplate type', async () => {\n    const { ResourceExtractor } = require('../../../src/core/extractor');\n    const { TemplateParser } = require('../../../src/core/parser');\n    \n    const parser = new TemplateParser();\n    const extractor = new ResourceExtractor();\n    \n    const tempDir = path.join(tmpdir(), 'aws-cloud-supporter-extractor-test');\n    const mixedPath = path.join(tempDir, 'mixed-resources.json');\n    \n    // CloudFormationTemplateå‹ã®æ­£å¸¸è§£æãƒ»æŠ½å‡º\n    const template = await parser.parse(mixedPath);\n    const result = extractor.extract(template);\n    \n    // å‹å®‰å…¨æ€§ç¢ºèª\n    expect(template.Resources).toBeDefined();\n    expect(result.supported.every(r => typeof r.Type === 'string')).toBe(true);\n  });\n\n  // ExtractResultå‹å®‰å…¨æ€§ãƒ†ã‚¹ãƒˆï¼ˆGREENæ®µéš: æˆ»ã‚Šå€¤å‹ç¢ºèªï¼‰\n  it('should return properly typed ExtractResult', () => {\n    const { ResourceExtractor } = require('../../../src/core/extractor');\n    \n    const extractor = new ResourceExtractor();\n    const testTemplate = {\n      AWSTemplateFormatVersion: \"2010-09-09\",\n      Resources: {\n        Test: { Type: \"AWS::RDS::DBInstance\", Properties: {} }\n      }\n    };\n    \n    const result = extractor.extract(testTemplate);\n    \n    // ExtractResultå‹ã®å®Œå…¨æ€§ç¢ºèª\n    expect(result.supported).toBeDefined();\n    expect(result.unsupported).toBeDefined();\n    expect(result.totalCount).toBe(1);\n    expect(result.extractionTimeMs).toBeGreaterThanOrEqual(0);\n    \n    // å‹å®‰å…¨æ€§ï¼šsupportedé…åˆ—ã®è¦ç´ ãŒSupportedResourceå‹\n    if (result.supported.length > 0) {\n      const resource = result.supported[0];\n      expect(resource.LogicalId).toBe('Test');\n      expect(resource.Type).toBe('AWS::RDS::DBInstance');\n    }\n  });\n});\n\n// REDæ®µéšç”¨ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼ï¼ˆãƒªã‚½ãƒ¼ã‚¹æŠ½å‡ºãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ï¼‰\ndescribe('ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼æº–å‚™ï¼ˆREDæ®µéšï¼‰', () => {\n  let tempDir: string;\n\n  beforeAll(() => {\n    tempDir = path.join(tmpdir(), 'aws-cloud-supporter-extractor-test');\n    try {\n      mkdirSync(tempDir, { recursive: true });\n    } catch {\n      // æ—¢å­˜ã®å ´åˆã¯ç„¡è¦–\n    }\n    \n    // ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ãƒ¼ä½œæˆ\n    createExtractionTestFixtures();\n  });\n\n  function createExtractionTestFixtures() {\n    // æ··åœ¨ãƒªã‚½ãƒ¼ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆã‚µãƒãƒ¼ãƒˆå¯¾è±¡ï¼‹å¯¾è±¡å¤–ï¼‰\n    const mixedResourcesTemplate = {\n      AWSTemplateFormatVersion: \"2010-09-09\",\n      Description: \"Mixed resources template for extraction testing\",\n      Resources: {\n        // ã‚µãƒãƒ¼ãƒˆå¯¾è±¡ãƒªã‚½ãƒ¼ã‚¹\n        TestRDS: {\n          Type: \"AWS::RDS::DBInstance\",\n          Properties: { Engine: \"mysql\", DBInstanceClass: \"db.t3.micro\" }\n        },\n        TestLambda: {\n          Type: \"AWS::Lambda::Function\", \n          Properties: { Runtime: \"nodejs20.x\", Handler: \"index.handler\" }\n        },\n        TestServerlessFunction: {\n          Type: \"AWS::Serverless::Function\",\n          Properties: { Runtime: \"python3.11\", Handler: \"app.lambda_handler\" }\n        },\n        TestECSService: {\n          Type: \"AWS::ECS::Service\",\n          Properties: { LaunchType: \"FARGATE\", Cluster: \"test-cluster\" }\n        },\n        TestALB: {\n          Type: \"AWS::ElasticLoadBalancingV2::LoadBalancer\",\n          Properties: { Type: \"application\", Scheme: \"internet-facing\" }\n        },\n        TestDynamoDB: {\n          Type: \"AWS::DynamoDB::Table\",\n          Properties: { BillingMode: \"PAY_PER_REQUEST\" }\n        },\n        TestAPI: {\n          Type: \"AWS::ApiGateway::RestApi\",\n          Properties: { Name: \"test-api\" }\n        },\n        TestServerlessAPI: {\n          Type: \"AWS::Serverless::Api\",\n          Properties: { StageName: \"prod\" }\n        },\n        \n        // ã‚µãƒãƒ¼ãƒˆå¯¾è±¡å¤–ãƒªã‚½ãƒ¼ã‚¹  \n        TestS3: {\n          Type: \"AWS::S3::Bucket\",\n          Properties: { BucketName: \"test-bucket\" }\n        },\n        TestEC2: {\n          Type: \"AWS::EC2::Instance\",\n          Properties: { InstanceType: \"t3.micro\" }\n        },\n        TestVPC: {\n          Type: \"AWS::EC2::VPC\",\n          Properties: { CidrBlock: \"10.0.0.0/16\" }\n        },\n        TestSNS: {\n          Type: \"AWS::SNS::Topic\",\n          Properties: { TopicName: \"test-topic\" }\n        },\n        TestNLB: {\n          Type: \"AWS::ElasticLoadBalancingV2::LoadBalancer\",\n          Properties: { Type: \"network\", Scheme: \"internal\" }\n        },\n        TestECSServiceEC2: {\n          Type: \"AWS::ECS::Service\", \n          Properties: { LaunchType: \"EC2\", Cluster: \"test-cluster\" }\n        }\n      }\n    };\n\n    writeFileSync(\n      path.join(tempDir, 'mixed-resources.json'), \n      JSON.stringify(mixedResourcesTemplate, null, 2), \n      'utf8'\n    );\n\n    // å¤§é‡ãƒªã‚½ãƒ¼ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆç”¨ï¼‰\n    const largeResourcesTemplate = {\n      AWSTemplateFormatVersion: \"2010-09-09\",\n      Description: \"Large resources template for performance testing\",\n      Resources: {} as Record<string, unknown>\n    };\n\n    // 500ãƒªã‚½ãƒ¼ã‚¹ç”Ÿæˆï¼ˆã‚µãƒãƒ¼ãƒˆå¯¾è±¡150å€‹ + å¯¾è±¡å¤–350å€‹ï¼‰\n    for (let i = 0; i < 100; i++) {\n      // ã‚µãƒãƒ¼ãƒˆå¯¾è±¡ãƒªã‚½ãƒ¼ã‚¹ï¼ˆ100å€‹ï¼‰\n      largeResourcesTemplate.Resources[`RDS${i}`] = {\n        Type: \"AWS::RDS::DBInstance\",\n        Properties: { Engine: \"mysql\", DBInstanceClass: \"db.t3.micro\" }\n      };\n    }\n    \n    for (let i = 0; i < 50; i++) {\n      // ã‚µãƒãƒ¼ãƒˆå¯¾è±¡ãƒªã‚½ãƒ¼ã‚¹ï¼ˆ50å€‹ï¼‰\n      largeResourcesTemplate.Resources[`Lambda${i}`] = {\n        Type: \"AWS::Lambda::Function\",\n        Properties: { Runtime: \"nodejs20.x\" }\n      };\n    }\n\n    for (let i = 0; i < 350; i++) {\n      // ã‚µãƒãƒ¼ãƒˆå¯¾è±¡å¤–ãƒªã‚½ãƒ¼ã‚¹ï¼ˆ350å€‹ï¼‰\n      largeResourcesTemplate.Resources[`S3${i}`] = {\n        Type: \"AWS::S3::Bucket\",\n        Properties: { BucketName: `test-bucket-${i}` }\n      };\n    }\n\n    writeFileSync(\n      path.join(tempDir, 'large-resources-500.json'),\n      JSON.stringify(largeResourcesTemplate, null, 2),\n      'utf8'\n    );\n\n    // ECSç‰¹æ®Šã‚±ãƒ¼ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ\n    const ecsTestTemplate = {\n      AWSTemplateFormatVersion: \"2010-09-09\",\n      Resources: {\n        FargateService: {\n          Type: \"AWS::ECS::Service\",\n          Properties: { LaunchType: \"FARGATE\" }\n        },\n        EC2Service: {\n          Type: \"AWS::ECS::Service\", \n          Properties: { LaunchType: \"EC2\" }\n        },\n        FargateSpotService: {\n          Type: \"AWS::ECS::Service\",\n          Properties: {\n            CapacityProviderStrategy: [\n              { CapacityProvider: \"FARGATE_SPOT\", Weight: 1 }\n            ]\n          }\n        },\n        MixedCapacityService: {\n          Type: \"AWS::ECS::Service\",\n          Properties: {\n            CapacityProviderStrategy: [\n              { CapacityProvider: \"FARGATE\", Weight: 1 },\n              { CapacityProvider: \"EC2\", Weight: 1 }\n            ]\n          }\n        }\n      }\n    };\n\n    writeFileSync(\n      path.join(tempDir, 'ecs-test.json'),\n      JSON.stringify(ecsTestTemplate, null, 2),\n      'utf8'\n    );\n\n    // ALB/NLBåˆ¤å®šãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ\n    const loadBalancerTestTemplate = {\n      AWSTemplateFormatVersion: \"2010-09-09\",\n      Resources: {\n        ApplicationLB: {\n          Type: \"AWS::ElasticLoadBalancingV2::LoadBalancer\",\n          Properties: { Type: \"application\" }\n        },\n        NetworkLB: {\n          Type: \"AWS::ElasticLoadBalancingV2::LoadBalancer\",\n          Properties: { Type: \"network\" }\n        },\n        DefaultLB: {\n          Type: \"AWS::ElasticLoadBalancingV2::LoadBalancer\",\n          Properties: { Scheme: \"internet-facing\" } // Typeãªã—=application\n        },\n        GatewayLB: {\n          Type: \"AWS::ElasticLoadBalancingV2::LoadBalancer\",\n          Properties: { Type: \"gateway\" }\n        }\n      }\n    };\n\n    writeFileSync(\n      path.join(tempDir, 'loadbalancer-test.json'),\n      JSON.stringify(loadBalancerTestTemplate, null, 2),\n      'utf8'\n    );\n  }\n\n  // ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ãƒ¼ä½œæˆç¢ºèª\n  it('should create mixed resources test fixture', () => {\n    const mixedPath = path.join(tempDir, 'mixed-resources.json');\n    const content = JSON.parse(readFileSync(mixedPath, 'utf8'));\n    \n    expect(content.Resources).toBeDefined();\n    expect(Object.keys(content.Resources)).toHaveLength(14);\n  });\n\n  it('should create large resources test fixture', () => {\n    const largePath = path.join(tempDir, 'large-resources-500.json');\n    const content = JSON.parse(readFileSync(largePath, 'utf8'));\n    \n    expect(content.Resources).toBeDefined();\n    expect(Object.keys(content.Resources)).toHaveLength(500);\n  });\n\n  it('should create ECS test cases fixture', () => {\n    const ecsPath = path.join(tempDir, 'ecs-test.json');\n    const content = JSON.parse(readFileSync(ecsPath, 'utf8'));\n    \n    expect(content.Resources.FargateService).toBeDefined();\n    expect(content.Resources.EC2Service).toBeDefined();\n    expect(content.Resources.FargateSpotService).toBeDefined();\n  });\n\n  it('should create Load Balancer test cases fixture', () => {\n    const lbPath = path.join(tempDir, 'loadbalancer-test.json');\n    const content = JSON.parse(readFileSync(lbPath, 'utf8'));\n    \n    expect(content.Resources.ApplicationLB).toBeDefined();\n    expect(content.Resources.NetworkLB).toBeDefined();\n    expect(content.Resources.DefaultLB).toBeDefined();\n  });\n});"],"version":3}