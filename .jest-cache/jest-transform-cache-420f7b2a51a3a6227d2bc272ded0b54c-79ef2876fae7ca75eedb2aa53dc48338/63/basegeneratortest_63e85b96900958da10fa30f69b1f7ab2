f1cc82a8ef3aeb2bb76f1839e1b414f8
"use strict";
// CLAUDE.md準拠BaseMetricsGeneratorテスト（RED段階: SOLID抽象化原則 + Type-Driven）
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const fs_1 = require("fs");
const path_1 = __importDefault(require("path"));
describe('BaseMetricsGenerator抽象クラス（CLAUDE.md: TDD RED段階）', () => {
    // GREEN段階: BaseMetricsGenerator実装確認
    it('should implement BaseMetricsGenerator successfully', () => {
        expect(() => {
            require('../../../src/generators/base.generator');
        }).not.toThrow(); // 実装完了で成功
    });
    // 抽象クラス設計テスト（GREEN段階: 実装確認）
    it('should define proper abstract base class', () => {
        const { BaseMetricsGenerator } = require('../../../src/generators/base.generator');
        // 抽象クラスが定義されている確認
        expect(BaseMetricsGenerator).toBeDefined();
        expect(typeof BaseMetricsGenerator).toBe('function');
        // 抽象クラスの特性確認（TypeScriptでは実行時チェックなし）
        // 代わりに抽象メソッドの存在を確認
        expect(typeof BaseMetricsGenerator).toBe('function');
    });
    // IMetricsGeneratorインターフェース実装テスト（GREEN段階: インターフェース確認）
    it('should implement IMetricsGenerator interface', () => {
        const { BaseMetricsGenerator } = require('../../../src/generators/base.generator');
        // プロトタイプにgenerateメソッドがあることを確認
        expect(BaseMetricsGenerator.prototype.generate).toBeDefined();
        expect(typeof BaseMetricsGenerator.prototype.generate).toBe('function');
        // 抽象メソッドが定義されている確認（実装は子クラスで）
        const prototype = BaseMetricsGenerator.prototype;
        expect(typeof prototype.getSupportedTypes).toBe('undefined'); // 抽象メソッド
    });
    // テスト用具象クラス作成（動作確認用）
    class TestMetricsGenerator extends (require('../../../src/generators/base.generator').BaseMetricsGenerator) {
        constructor() {
            const { createLogger } = require('../../../src/utils/logger');
            super(createLogger('error'));
        }
        getSupportedTypes() {
            return ['AWS::Test::Resource'];
        }
        getMetricsConfig() {
            return [
                {
                    name: 'TestMetric',
                    namespace: 'AWS/Test',
                    unit: 'Count',
                    description: 'Test metric',
                    statistic: 'Average',
                    evaluationPeriod: 300,
                    category: 'Performance',
                    importance: 'High',
                    threshold: {
                        base: 100,
                        warningMultiplier: 1.0,
                        criticalMultiplier: 1.5
                    }
                }
            ];
        }
        getResourceScale() {
            return 1.0;
        }
    }
    // 動的しきい値計算テスト（GREEN段階: 計算確認）
    it('should calculate dynamic thresholds correctly', async () => {
        const testGenerator = new TestMetricsGenerator();
        const testResource = {
            Type: 'AWS::Test::Resource',
            Properties: {},
            LogicalId: 'TestResource'
        };
        const metrics = await testGenerator.generate(testResource);
        expect(metrics).toHaveLength(1);
        const metric = metrics[0];
        // しきい値計算確認
        expect(metric.recommended_threshold).toHaveValidThreshold();
        expect(metric.recommended_threshold.warning).toBe(100); // 100 * 1.0 * 1.0
        expect(metric.recommended_threshold.critical).toBe(150); // 100 * 1.0 * 1.5
    });
    // リソーススケール係数計算テスト（GREEN段階: スケール反映確認）
    it('should compute resource scale factors', async () => {
        // スケール係数2.0のテストジェネレータ
        class ScaledTestGenerator extends TestMetricsGenerator {
            getResourceScale() {
                return 2.0; // 2倍スケール
            }
        }
        const scaledGenerator = new ScaledTestGenerator();
        const testResource = {
            Type: 'AWS::Test::Resource',
            Properties: {},
            LogicalId: 'ScaledTestResource'
        };
        const metrics = await scaledGenerator.generate(testResource);
        const metric = metrics[0];
        // スケール係数が反映されている確認
        expect(metric.recommended_threshold.warning).toBe(200); // 100 * 2.0 * 1.0
        expect(metric.recommended_threshold.critical).toBe(300); // 100 * 2.0 * 1.5
    });
    // メトリクス生成パフォーマンステスト（GREEN段階: 性能確認）
    it('should generate metrics within 1 second', async () => {
        const testGenerator = new TestMetricsGenerator();
        const testResource = {
            Type: 'AWS::Test::Resource',
            Properties: {},
            LogicalId: 'PerformanceTestResource'
        };
        const startTime = performance.now();
        const metrics = await testGenerator.generate(testResource);
        const duration = performance.now() - startTime;
        expect(duration).toBeLessThan(1000); // 1秒以内
        expect(metrics).toHaveLength(1);
    });
    // 適用可能メトリクス判定テスト（GREEN段階: フィルタリング確認）
    it('should filter applicable metrics correctly', async () => {
        // 条件付きメトリクス用テストジェネレータ
        class ConditionalTestGenerator extends TestMetricsGenerator {
            getMetricsConfig() {
                return [
                    {
                        name: 'AlwaysApplicable',
                        namespace: 'AWS/Test',
                        unit: 'Count',
                        description: 'Always applicable metric',
                        statistic: 'Average',
                        evaluationPeriod: 300,
                        category: 'Performance',
                        importance: 'High',
                        threshold: { base: 50, warningMultiplier: 1.0, criticalMultiplier: 2.0 }
                    },
                    {
                        name: 'ConditionalMetric',
                        namespace: 'AWS/Test',
                        unit: 'Count',
                        description: 'Conditional metric',
                        statistic: 'Average',
                        evaluationPeriod: 300,
                        category: 'Performance',
                        importance: 'Medium',
                        threshold: { base: 75, warningMultiplier: 1.0, criticalMultiplier: 2.0 },
                        applicableWhen: (resource) => {
                            return resource.LogicalId === 'ConditionalTestResource';
                        }
                    }
                ];
            }
        }
        const conditionalGenerator = new ConditionalTestGenerator();
        // 条件に合致するリソース
        const matchingResource = {
            Type: 'AWS::Test::Resource',
            Properties: {},
            LogicalId: 'ConditionalTestResource'
        };
        const matchingMetrics = await conditionalGenerator.generate(matchingResource);
        expect(matchingMetrics).toHaveLength(2); // 両方適用
        // 条件に合致しないリソース
        const nonMatchingResource = {
            Type: 'AWS::Test::Resource',
            Properties: {},
            LogicalId: 'NonMatchingResource'
        };
        const nonMatchingMetrics = await conditionalGenerator.generate(nonMatchingResource);
        expect(nonMatchingMetrics).toHaveLength(1); // 条件なしのみ適用
    });
    // CloudWatchディメンション構築テスト（GREEN段階: AWS仕様準拠確認）
    it('should build CloudWatch dimensions properly', async () => {
        const testGenerator = new TestMetricsGenerator();
        const testResource = {
            Type: 'AWS::Test::Resource',
            Properties: {},
            LogicalId: 'DimensionTestResource'
        };
        const metrics = await testGenerator.generate(testResource);
        const metric = metrics[0];
        // ディメンション構築確認
        expect(metric.dimensions).toBeDefined();
        expect(metric.dimensions).toHaveLength(1);
        if (metric.dimensions && metric.dimensions.length > 0) {
            const dimension = metric.dimensions[0];
            expect(dimension.name).toBe('ResourceId'); // Test::Resourceはマップにないのでデフォルト
            expect(dimension.value).toBe('DimensionTestResource');
        }
    });
    // CLAUDE.md: No any types検証
    it('should not use any types in base generator implementation', () => {
        const baseGeneratorCode = (0, fs_1.readFileSync)(path_1.default.join(__dirname, '../../../src/generators/base.generator.ts'), 'utf8');
        expect(baseGeneratorCode).toHaveNoAnyTypes();
    });
    // 抽象メソッド定義テスト（GREEN段階: 必須メソッド確認）
    it('should define required abstract methods', () => {
        const { BaseMetricsGenerator } = require('../../../src/generators/base.generator');
        // 抽象クラス自体にはない（子クラスで実装）
        expect(BaseMetricsGenerator.prototype.getSupportedTypes).toBeUndefined();
        expect(BaseMetricsGenerator.prototype.getMetricsConfig).toBeUndefined();
        expect(BaseMetricsGenerator.prototype.getResourceScale).toBeUndefined();
        // 具象実装を持つメソッド
        expect(BaseMetricsGenerator.prototype.generate).toBeDefined();
    });
    // エラーハンドリング統合テスト（GREEN段階: CloudSupporterError統合確認）
    it('should integrate with CloudSupporterError system', async () => {
        const testGenerator = new TestMetricsGenerator();
        const invalidResource = {
            Type: 'AWS::Invalid::Resource', // サポート対象外
            Properties: {},
            LogicalId: 'InvalidResource'
        };
        // サポート対象外リソースでエラー
        await expect(testGenerator.generate(invalidResource)).rejects.toThrow();
        try {
            await testGenerator.generate(invalidResource);
        }
        catch (error) {
            expect(error.type).toBe('RESOURCE_ERROR');
            expect(error.message).toContain('Unsupported resource type');
        }
    });
});
describe('BaseMetricsGenerator動的しきい値（CLAUDE.md: アルゴリズム要件）', () => {
    // テスト用具象クラス
    class ThresholdTestGenerator extends (require('../../../src/generators/base.generator').BaseMetricsGenerator) {
        constructor() {
            const { createLogger } = require('../../../src/utils/logger');
            super(createLogger('error'));
        }
        getSupportedTypes() {
            return ['AWS::Test::Threshold'];
        }
        getMetricsConfig() {
            return [
                {
                    name: 'ThresholdTestMetric',
                    namespace: 'AWS/Test',
                    unit: 'Percent',
                    description: 'Threshold calculation test',
                    statistic: 'Average',
                    evaluationPeriod: 300,
                    category: 'Performance',
                    importance: 'High',
                    threshold: {
                        base: 80,
                        warningMultiplier: 0.875, // 70%
                        criticalMultiplier: 1.25 // 100%
                    }
                }
            ];
        }
        getResourceScale() {
            return 2.0; // 2倍スケール
        }
    }
    // しきい値計算アルゴリズムテスト（GREEN段階: 数式確認）
    it('should implement threshold calculation algorithm', async () => {
        const thresholdGenerator = new ThresholdTestGenerator();
        const testResource = {
            Type: 'AWS::Test::Threshold',
            Properties: {},
            LogicalId: 'ThresholdTestResource'
        };
        const metrics = await thresholdGenerator.generate(testResource);
        const metric = metrics[0];
        // 計算式: base * scale * multiplier
        // warning: 80 * 2.0 * 0.875 = 140
        // critical: 80 * 2.0 * 1.25 = 200
        expect(metric.recommended_threshold.warning).toBe(140);
        expect(metric.recommended_threshold.critical).toBe(200);
    });
    // スケール係数反映テスト（GREEN段階: スケール計算確認）
    it('should apply resource scale factors to thresholds', async () => {
        // 異なるスケール係数のジェネレータ
        class VariableScaleGenerator extends ThresholdTestGenerator {
            scale;
            constructor(scale) {
                super();
                this.scale = scale;
            }
            getResourceScale() {
                return this.scale;
            }
        }
        const scales = [0.5, 1.0, 1.5, 3.0];
        const testResource = {
            Type: 'AWS::Test::Threshold',
            Properties: {},
            LogicalId: 'VariableScaleResource'
        };
        for (const scale of scales) {
            const generator = new VariableScaleGenerator(scale);
            const metrics = await generator.generate(testResource);
            const metric = metrics[0];
            const expectedWarning = Math.round(80 * scale * 0.875);
            const expectedCritical = Math.round(80 * scale * 1.25);
            expect(metric.recommended_threshold.warning).toBe(expectedWarning);
            expect(metric.recommended_threshold.critical).toBe(expectedCritical);
        }
    });
    // しきい値妥当性検証テスト（GREEN段階: 自動修正確認）
    it('should ensure warning < critical threshold validity', async () => {
        // 不正な乗数でwarning >= criticalになる設定
        class InvalidThresholdGenerator extends ThresholdTestGenerator {
            getMetricsConfig() {
                return [
                    {
                        name: 'InvalidThresholdMetric',
                        namespace: 'AWS/Test',
                        unit: 'Percent',
                        description: 'Invalid threshold test',
                        statistic: 'Average',
                        evaluationPeriod: 300,
                        category: 'Performance',
                        importance: 'High',
                        threshold: {
                            base: 100,
                            warningMultiplier: 1.5, // warning=150
                            criticalMultiplier: 1.2 // critical=120 (不正)
                        }
                    }
                ];
            }
        }
        const invalidGenerator = new InvalidThresholdGenerator();
        const testResource = {
            Type: 'AWS::Test::Threshold',
            Properties: {},
            LogicalId: 'InvalidThresholdResource'
        };
        const metrics = await invalidGenerator.generate(testResource);
        const metric = metrics[0];
        // 自動修正により warning < critical が保証される
        expect(metric.recommended_threshold).toHaveValidThreshold();
        expect(metric.recommended_threshold.critical).toBeGreaterThan(metric.recommended_threshold.warning);
    });
    // 数値精度テスト（GREEN段階: 丸め処理確認）
    it('should maintain numerical precision in calculations', async () => {
        // 小数点を含む計算のテスト
        class PrecisionTestGenerator extends ThresholdTestGenerator {
            getMetricsConfig() {
                return [
                    {
                        name: 'PrecisionTestMetric',
                        namespace: 'AWS/Test',
                        unit: 'Seconds',
                        description: 'Precision test metric',
                        statistic: 'Average',
                        evaluationPeriod: 300,
                        category: 'Latency',
                        importance: 'High',
                        threshold: {
                            base: 0.1234, // 小数点
                            warningMultiplier: 1.234,
                            criticalMultiplier: 2.567
                        }
                    }
                ];
            }
            getResourceScale() {
                return 1.789; // 小数点スケール
            }
        }
        const precisionGenerator = new PrecisionTestGenerator();
        const testResource = {
            Type: 'AWS::Test::Threshold',
            Properties: {},
            LogicalId: 'PrecisionTestResource'
        };
        const metrics = await precisionGenerator.generate(testResource);
        const metric = metrics[0];
        // 丸め処理により整数値になっている確認
        expect(Number.isInteger(metric.recommended_threshold.warning)).toBe(true);
        expect(Number.isInteger(metric.recommended_threshold.critical)).toBe(true);
        expect(metric.recommended_threshold.warning).toBeGreaterThanOrEqual(0);
        expect(metric.recommended_threshold.critical).toBeGreaterThan(0);
    });
    // 境界値テスト（GREEN段階: エッジケース確認）
    it('should handle edge cases in threshold calculation', async () => {
        class EdgeCaseTestGenerator extends ThresholdTestGenerator {
            getMetricsConfig() {
                return [
                    {
                        name: 'EdgeCaseMetric',
                        namespace: 'AWS/Test',
                        unit: 'Count',
                        description: 'Edge case test',
                        statistic: 'Average',
                        evaluationPeriod: 300,
                        category: 'Performance',
                        importance: 'High',
                        threshold: {
                            base: 1, // 最小基準値
                            warningMultiplier: 1.0,
                            criticalMultiplier: 2.0
                        }
                    }
                ];
            }
            getResourceScale() {
                return 0.1; // 極小スケール
            }
        }
        const edgeCaseGenerator = new EdgeCaseTestGenerator();
        const testResource = {
            Type: 'AWS::Test::Threshold',
            Properties: {},
            LogicalId: 'EdgeCaseResource'
        };
        const metrics = await edgeCaseGenerator.generate(testResource);
        const metric = metrics[0];
        // 極小値でも適切に処理される確認（0値許可、自動修正機能）
        expect(metric.recommended_threshold.warning).toBeGreaterThanOrEqual(0);
        expect(metric.recommended_threshold.critical).toBeGreaterThan(metric.recommended_threshold.warning);
        // Math.round処理により1未満でも適切な値
        // 0値の場合は自動修正される
        expect(metric.recommended_threshold.warning).toBeGreaterThanOrEqual(0);
        expect(metric.recommended_threshold.critical).toBeGreaterThan(metric.recommended_threshold.warning);
    });
});
describe('BaseMetricsGeneratorパフォーマンス（CLAUDE.md: 性能要件）', () => {
    // テスト用高速ジェネレータ
    class PerformanceTestGenerator extends (require('../../../src/generators/base.generator').BaseMetricsGenerator) {
        constructor() {
            const { createLogger } = require('../../../src/utils/logger');
            super(createLogger('error'));
        }
        getSupportedTypes() {
            return ['AWS::Test::Performance'];
        }
        getMetricsConfig() {
            return [
                {
                    name: 'FastMetric',
                    namespace: 'AWS/Test',
                    unit: 'Count',
                    description: 'Fast generation test',
                    statistic: 'Average',
                    evaluationPeriod: 300,
                    category: 'Performance',
                    importance: 'High',
                    threshold: { base: 100, warningMultiplier: 1.0, criticalMultiplier: 2.0 }
                }
            ];
        }
        getResourceScale() {
            return 1.0;
        }
    }
    // 1秒以内生成要件テスト（GREEN段階: 実パフォーマンス確認）
    it('should generate metrics within performance limits', async () => {
        const { MetricsGenerationMonitor } = require('../../../src/generators/base.generator');
        const performanceGenerator = new PerformanceTestGenerator();
        const testResource = {
            Type: 'AWS::Test::Performance',
            Properties: {},
            LogicalId: 'PerformanceTestResource'
        };
        const result = await MetricsGenerationMonitor.measureGenerationPerformance(performanceGenerator, testResource);
        expect(result.metrics).toHaveLength(1);
        expect(result.stats.generationTimeMs).toBeLessThan(1000); // 1秒以内
        expect(result.performanceGrade).not.toBe('F'); // 要件達成
    });
    // メモリ効率テスト（GREEN段階: リークなし確認）
    it('should generate metrics without memory leaks', async () => {
        const performanceGenerator = new PerformanceTestGenerator();
        const testResource = {
            Type: 'AWS::Test::Performance',
            Properties: {},
            LogicalId: 'MemoryTestResource'
        };
        const memoryBefore = process.memoryUsage().heapUsed;
        // 100回生成
        for (let i = 0; i < 100; i++) {
            await performanceGenerator.generate(testResource);
        }
        const memoryAfter = process.memoryUsage().heapUsed;
        const memoryDelta = (memoryAfter - memoryBefore) / 1024 / 1024;
        expect(memoryDelta).toBeLessThan(5); // メモリ増加5MB以下
    });
    // 並行生成テスト（GREEN段階: 同期安全性確認）
    it('should support concurrent metric generation', async () => {
        const performanceGenerator = new PerformanceTestGenerator();
        const testResources = Array.from({ length: 10 }, (_, i) => ({
            Type: 'AWS::Test::Performance',
            Properties: {},
            LogicalId: `ConcurrentTestResource${i}`
        }));
        // 並行生成
        const promises = testResources.map(resource => performanceGenerator.generate(resource));
        const results = await Promise.all(promises);
        // 全て成功し、一貫した結果
        expect(results).toHaveLength(10);
        results.forEach(metrics => {
            expect(metrics).toHaveLength(1);
            expect(metrics[0].metric_name).toBe('FastMetric');
        });
    });
    // パフォーマンス監視テスト（GREEN段階: 監視機能確認）
    it('should provide performance monitoring', async () => {
        const { MetricsGenerationMonitor } = require('../../../src/generators/base.generator');
        const performanceGenerator = new PerformanceTestGenerator();
        const testResource = {
            Type: 'AWS::Test::Performance',
            Properties: {},
            LogicalId: 'MonitoringTestResource'
        };
        const result = await MetricsGenerationMonitor.measureGenerationPerformance(performanceGenerator, testResource);
        // 統計情報確認
        expect(result.stats.resourceType).toBe('AWS::Test::Performance');
        expect(result.stats.metricsGenerated).toBe(1);
        expect(result.stats.generationTimeMs).toBeGreaterThanOrEqual(0);
        expect(result.stats.averageThresholdWarning).toBeGreaterThan(0);
        expect(result.stats.averageThresholdCritical).toBeGreaterThan(0);
        // パフォーマンス評価
        expect(['A', 'B', 'C', 'F']).toContain(result.performanceGrade);
    });
});
describe('BaseMetricsGenerator型安全性（CLAUDE.md: Type-Driven Development）', () => {
    // テスト用型安全ジェネレータ
    class TypeSafeTestGenerator extends (require('../../../src/generators/base.generator').BaseMetricsGenerator) {
        constructor() {
            const { createLogger } = require('../../../src/utils/logger');
            super(createLogger('error'));
        }
        getSupportedTypes() {
            return ['AWS::Test::TypeSafe'];
        }
        getMetricsConfig() {
            return [
                {
                    name: 'TypeSafeMetric',
                    namespace: 'AWS/Test',
                    unit: 'Count',
                    description: 'Type safety test metric',
                    statistic: 'Average',
                    evaluationPeriod: 300,
                    category: 'Performance',
                    importance: 'High',
                    threshold: { base: 50, warningMultiplier: 1.0, criticalMultiplier: 2.0 }
                }
            ];
        }
        getResourceScale() {
            return 1.0;
        }
    }
    // CloudFormationResource型統合テスト（GREEN段階: 型処理確認）
    it('should work with CloudFormationResource types', async () => {
        const typeSafeGenerator = new TypeSafeTestGenerator();
        const cloudFormationResource = {
            Type: 'AWS::Test::TypeSafe',
            Properties: {
                TestProperty: 'test-value',
                NumericProperty: 42
            },
            LogicalId: 'TypeSafeTestResource',
            Condition: 'TestCondition',
            DependsOn: ['OtherResource']
        };
        const metrics = await typeSafeGenerator.generate(cloudFormationResource);
        expect(metrics).toHaveLength(1);
        expect(metrics[0].metric_name).toBe('TypeSafeMetric');
    });
    // MetricDefinition型生成テスト（GREEN段階: 型準拠確認）
    it('should generate type-safe MetricDefinition objects', async () => {
        const typeSafeGenerator = new TypeSafeTestGenerator();
        const testResource = {
            Type: 'AWS::Test::TypeSafe',
            Properties: {},
            LogicalId: 'MetricDefinitionTestResource'
        };
        const metrics = await typeSafeGenerator.generate(testResource);
        const metric = metrics[0];
        // MetricDefinition型の全フィールド確認
        expect(typeof metric.metric_name).toBe('string');
        expect(typeof metric.namespace).toBe('string');
        expect(typeof metric.unit).toBe('string');
        expect(typeof metric.description).toBe('string');
        expect(typeof metric.statistic).toBe('string');
        expect(typeof metric.evaluation_period).toBe('number');
        expect(typeof metric.category).toBe('string');
        expect(typeof metric.importance).toBe('string');
        // しきい値オブジェクトの型安全性
        expect(typeof metric.recommended_threshold.warning).toBe('number');
        expect(typeof metric.recommended_threshold.critical).toBe('number');
        // ディメンション配列の型安全性
        expect(Array.isArray(metric.dimensions)).toBe(true);
        if (metric.dimensions && metric.dimensions.length > 0) {
            const dimension = metric.dimensions[0];
            expect(typeof dimension.name).toBe('string');
            expect(typeof dimension.value).toBe('string');
        }
    });
    // MetricConfig型処理テスト（GREEN段階: 設定型安全性確認）
    it('should process MetricConfig types safely', async () => {
        const typeSafeGenerator = new TypeSafeTestGenerator();
        const testResource = {
            Type: 'AWS::Test::TypeSafe',
            Properties: {},
            LogicalId: 'MetricConfigTestResource'
        };
        // MetricConfig型の処理が型安全であることを確認
        const metrics = await typeSafeGenerator.generate(testResource);
        expect(metrics).toHaveLength(1);
        const metric = metrics[0];
        // MetricConfig→MetricDefinition変換の型安全性
        expect(metric.metric_name).toBe('TypeSafeMetric');
        expect(metric.namespace).toBe('AWS/Test');
        expect(metric.unit).toBe('Count');
        expect(metric.statistic).toBe('Average');
        expect(metric.category).toBe('Performance');
        expect(metric.importance).toBe('High');
    });
    // 型安全なGenerics使用テスト（GREEN段階: ジェネリック確認）
    it('should utilize type-safe generics properly', () => {
        const { validateMetricDefinition } = require('../../../src/generators/base.generator');
        // 型安全なメトリクス検証関数
        const validMetric = {
            metric_name: 'TestMetric',
            namespace: 'AWS/Test',
            unit: 'Count',
            description: 'Valid metric',
            statistic: 'Average',
            recommended_threshold: { warning: 50, critical: 100 },
            evaluation_period: 300,
            category: 'Performance',
            importance: 'High'
        };
        const result = validateMetricDefinition(validMetric);
        expect(result.isValid).toBe(true);
        expect(result.errors).toHaveLength(0);
    });
    // 条件付きメトリクス型安全性テスト（GREEN段階: 条件関数型確認）
    it('should handle applicableWhen functions type-safely', async () => {
        // applicableWhen関数の型安全性を確認
        class ConditionalTypeSafeGenerator extends TypeSafeTestGenerator {
            getMetricsConfig() {
                return [
                    {
                        name: 'ConditionalTypeSafeMetric',
                        namespace: 'AWS/Test',
                        unit: 'Count',
                        description: 'Conditional type safe metric',
                        statistic: 'Average',
                        evaluationPeriod: 300,
                        category: 'Performance',
                        importance: 'High',
                        threshold: { base: 100, warningMultiplier: 1.0, criticalMultiplier: 2.0 },
                        applicableWhen: (resource) => {
                            // 型安全な条件判定
                            return resource.Type === 'AWS::Test::TypeSafe' &&
                                !!resource.LogicalId &&
                                resource.LogicalId.startsWith('Conditional');
                        }
                    }
                ];
            }
        }
        const conditionalGenerator = new ConditionalTypeSafeGenerator();
        const testResource = {
            Type: 'AWS::Test::TypeSafe',
            Properties: {},
            LogicalId: 'ConditionalTypeResource'
        };
        const metrics = await conditionalGenerator.generate(testResource);
        expect(metrics).toHaveLength(1);
        expect(metrics[0].metric_name).toBe('ConditionalTypeSafeMetric');
    });
});
describe('BaseMetricsGeneratorSOLID原則（CLAUDE.md: 設計原則）', () => {
    // 単一責任原則テスト（GREEN段階: SRP確認）
    it('should follow Single Responsibility Principle', () => {
        const { BaseMetricsGenerator } = require('../../../src/generators/base.generator');
        // BaseMetricsGeneratorの責任：メトリクス生成のみ
        const prototype = BaseMetricsGenerator.prototype;
        expect(prototype.generate).toBeDefined();
        // メトリクス生成以外の責任がないことを確認
        // （ファイルI/O、ネットワーク等の責任は持たない）
        const methods = Object.getOwnPropertyNames(prototype);
        const publicMethods = methods.filter(name => !name.startsWith('_') &&
            name !== 'constructor' &&
            typeof prototype[name] === 'function');
        expect(publicMethods).toContain('generate');
        console.log('📋 BaseMetricsGenerator public methods:', publicMethods);
    });
    // 開放閉鎖原則テスト（GREEN段階: OCP確認）
    it('should follow Open/Closed Principle', () => {
        const { BaseMetricsGenerator } = require('../../../src/generators/base.generator');
        // 拡張のために開かれている（抽象メソッド存在）
        // 変更のために閉ざされている（具象実装）
        // 抽象クラスとして拡張可能
        class ExtendedTestGenerator extends BaseMetricsGenerator {
            constructor() {
                const { createLogger } = require('../../../src/utils/logger');
                super(createLogger('error'));
            }
            getSupportedTypes() {
                return ['AWS::Extended::Resource'];
            }
            getMetricsConfig() {
                return [];
            }
            getResourceScale() {
                return 1.0;
            }
        }
        const extendedGenerator = new ExtendedTestGenerator();
        expect(extendedGenerator).toBeInstanceOf(BaseMetricsGenerator);
        expect(extendedGenerator.getSupportedTypes()).toContain('AWS::Extended::Resource');
    });
    // インターフェース分離テスト（GREEN段階: ISP確認）
    it('should follow Interface Segregation Principle', () => {
        const { BaseMetricsGenerator } = require('../../../src/generators/base.generator');
        // IMetricsGeneratorインターフェースのみ実装
        // 他の不要なインターフェースは実装していない
        expect(BaseMetricsGenerator.prototype.generate).toBeDefined();
        // メトリクス生成に特化したインターフェース
        expect(BaseMetricsGenerator.prototype.getSupportedTypes).toBeUndefined(); // 抽象メソッド
    });
    // 依存関係逆転テスト（GREEN段階: DIP確認）
    it('should follow Dependency Inversion Principle', () => {
        const { BaseMetricsGenerator } = require('../../../src/generators/base.generator');
        // ILoggerインターフェースに依存（具象クラスに非依存）
        class DIPTestGenerator extends BaseMetricsGenerator {
            constructor(customLogger) {
                super(customLogger);
            }
            getSupportedTypes() {
                return ['AWS::DIP::Test'];
            }
            getMetricsConfig() {
                return [];
            }
            getResourceScale() {
                return 1.0;
            }
        }
        // モックLoggerでもインスタンス化可能（抽象化に依存）
        const mockLogger = {
            debug: jest.fn(),
            info: jest.fn(),
            warn: jest.fn(),
            error: jest.fn(),
            success: jest.fn()
        };
        const dipGenerator = new DIPTestGenerator(mockLogger);
        expect(dipGenerator).toBeInstanceOf(BaseMetricsGenerator);
    });
    // リスコフ置換原則テスト（GREEN段階: LSP確認）
    it('should follow Liskov Substitution Principle', () => {
        const { BaseMetricsGenerator } = require('../../../src/generators/base.generator');
        // 子クラスが基底クラスと置換可能であることを確認
        class LSPTestGeneratorA extends BaseMetricsGenerator {
            constructor() {
                const { createLogger } = require('../../../src/utils/logger');
                super(createLogger('error'));
            }
            getSupportedTypes() {
                return ['AWS::LSP::TestA'];
            }
            getMetricsConfig() {
                return [
                    {
                        name: 'LSPTestMetricA',
                        namespace: 'AWS/LSP',
                        unit: 'Count',
                        description: 'LSP test A',
                        statistic: 'Sum',
                        evaluationPeriod: 300,
                        category: 'Performance',
                        importance: 'High',
                        threshold: { base: 10, warningMultiplier: 1.0, criticalMultiplier: 2.0 }
                    }
                ];
            }
            getResourceScale() {
                return 1.0;
            }
        }
        class LSPTestGeneratorB extends BaseMetricsGenerator {
            constructor() {
                const { createLogger } = require('../../../src/utils/logger');
                super(createLogger('error'));
            }
            getSupportedTypes() {
                return ['AWS::LSP::TestB'];
            }
            getMetricsConfig() {
                return [
                    {
                        name: 'LSPTestMetricB',
                        namespace: 'AWS/LSP',
                        unit: 'Percent',
                        description: 'LSP test B',
                        statistic: 'Average',
                        evaluationPeriod: 300,
                        category: 'Error',
                        importance: 'Medium',
                        threshold: { base: 5, warningMultiplier: 2.0, criticalMultiplier: 4.0 }
                    }
                ];
            }
            getResourceScale() {
                return 2.0;
            }
        }
        // 両方のジェネレータがBaseMetricsGeneratorとして動作
        const generatorA = new LSPTestGeneratorA();
        const generatorB = new LSPTestGeneratorB();
        expect(generatorA).toBeInstanceOf(BaseMetricsGenerator);
        expect(generatorB).toBeInstanceOf(BaseMetricsGenerator);
        // 共通インターフェースとして使用可能
        const generators = [generatorA, generatorB];
        generators.forEach(generator => {
            expect(typeof generator.generate).toBe('function');
            expect(Array.isArray(generator.getSupportedTypes())).toBe(true);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUva3lvaGVpL2F3c19jbG91ZF9zdXBwb3J0ZXIvdGVzdHMvdW5pdC9nZW5lcmF0b3JzL2Jhc2UuZ2VuZXJhdG9yLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBLHNFQUFzRTs7Ozs7QUFFdEUsMkJBQWtDO0FBQ2xDLGdEQUF3QjtBQUV4QixRQUFRLENBQUMsaURBQWlELEVBQUUsR0FBRyxFQUFFO0lBRS9ELG9DQUFvQztJQUNwQyxFQUFFLENBQUMsb0RBQW9ELEVBQUUsR0FBRyxFQUFFO1FBQzVELE1BQU0sQ0FBQyxHQUFHLEVBQUU7WUFDVixPQUFPLENBQUMsd0NBQXdDLENBQUMsQ0FBQztRQUNwRCxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxVQUFVO0lBQzlCLENBQUMsQ0FBQyxDQUFDO0lBRUgsNEJBQTRCO0lBQzVCLEVBQUUsQ0FBQywwQ0FBMEMsRUFBRSxHQUFHLEVBQUU7UUFDbEQsTUFBTSxFQUFFLG9CQUFvQixFQUFFLEdBQUcsT0FBTyxDQUFDLHdDQUF3QyxDQUFDLENBQUM7UUFFbkYsa0JBQWtCO1FBQ2xCLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQzNDLE1BQU0sQ0FBQyxPQUFPLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBRXJELG9DQUFvQztRQUNwQyxtQkFBbUI7UUFDbkIsTUFBTSxDQUFDLE9BQU8sb0JBQW9CLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDdkQsQ0FBQyxDQUFDLENBQUM7SUFFSCxzREFBc0Q7SUFDdEQsRUFBRSxDQUFDLDhDQUE4QyxFQUFFLEdBQUcsRUFBRTtRQUN0RCxNQUFNLEVBQUUsb0JBQW9CLEVBQUUsR0FBRyxPQUFPLENBQUMsd0NBQXdDLENBQUMsQ0FBQztRQUVuRiw4QkFBOEI7UUFDOUIsTUFBTSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FB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RSxJQUFJLEVBQUUsQ0FBQyxFQUFFLGlCQUFpQixFQUFFLEdBQUcsRUFBRSxrQkFBa0IsRUFBRSxHQUFHLEVBQUU7cUJBQ3hFO2lCQUNGLENBQUM7WUFDSixDQUFDO1lBRVMsZ0JBQWdCO2dCQUN4QixPQUFPLEdBQUcsQ0FBQztZQUNiLENBQUM7U0FDRjtRQUVELHNDQUFzQztRQUN0QyxNQUFNLFVBQVUsR0FBRyxJQUFJLGlCQUFpQixFQUFFLENBQUM7UUFDM0MsTUFBTSxVQUFVLEdBQUcsSUFBSSxpQkFBaUIsRUFBRSxDQUFDO1FBRTNDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxjQUFjLENBQUMsb0JBQW9CLENBQUMsQ0FBQztRQUN4RCxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsY0FBYyxDQUFDLG9CQUFvQixDQUFDLENBQUM7UUFFeEQsb0JBQW9CO1FBQ3BCLE1BQU0sVUFBVSxHQUEyQixDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsQ0FBQztRQUNwRSxVQUFVLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQzdCLE1BQU0sQ0FBQyxPQUFPLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDbkQsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNsRSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUva3lvaGVpL2F3c19jbG91ZF9zdXBwb3J0ZXIvdGVzdHMvdW5pdC9nZW5lcmF0b3JzL2Jhc2UuZ2VuZXJhdG9yLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ0xBVURFLm1k5rqW5ougQmFzZU1ldHJpY3NHZW5lcmF0b3Ljg4bjgrnjg4jvvIhSRUTmrrXpmo46IFNPTElE5oq96LGh5YyW5Y6f5YmHICsgVHlwZS1Ecml2ZW7vvIlcblxuaW1wb3J0IHsgcmVhZEZpbGVTeW5jIH0gZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbmRlc2NyaWJlKCdCYXNlTWV0cmljc0dlbmVyYXRvcuaKveixoeOCr+ODqeOCue+8iENMQVVERS5tZDogVEREIFJFROautemaju+8iScsICgpID0+IHtcblxuICAvLyBHUkVFTuautemajjogQmFzZU1ldHJpY3NHZW5lcmF0b3Llrp/oo4Xnorroqo1cbiAgaXQoJ3Nob3VsZCBpbXBsZW1lbnQgQmFzZU1ldHJpY3NHZW5lcmF0b3Igc3VjY2Vzc2Z1bGx5JywgKCkgPT4ge1xuICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICByZXF1aXJlKCcuLi8uLi8uLi9zcmMvZ2VuZXJhdG9ycy9iYXNlLmdlbmVyYXRvcicpO1xuICAgIH0pLm5vdC50b1Rocm93KCk7IC8vIOWun+ijheWujOS6huOBp+aIkOWKn1xuICB9KTtcblxuICAvLyDmir3osaHjgq/jg6njgrnoqK3oqIjjg4bjgrnjg4jvvIhHUkVFTuautemajjog5a6f6KOF56K66KqN77yJXG4gIGl0KCdzaG91bGQgZGVmaW5lIHByb3BlciBhYnN0cmFjdCBiYXNlIGNsYXNzJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgQmFzZU1ldHJpY3NHZW5lcmF0b3IgfSA9IHJlcXVpcmUoJy4uLy4uLy4uL3NyYy9nZW5lcmF0b3JzL2Jhc2UuZ2VuZXJhdG9yJyk7XG4gICAgXG4gICAgLy8g5oq96LGh44Kv44Op44K544GM5a6a576p44GV44KM44Gm44GE44KL56K66KqNXG4gICAgZXhwZWN0KEJhc2VNZXRyaWNzR2VuZXJhdG9yKS50b0JlRGVmaW5lZCgpO1xuICAgIGV4cGVjdCh0eXBlb2YgQmFzZU1ldHJpY3NHZW5lcmF0b3IpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgXG4gICAgLy8g5oq96LGh44Kv44Op44K544Gu54m55oCn56K66KqN77yIVHlwZVNjcmlwdOOBp+OBr+Wun+ihjOaZguODgeOCp+ODg+OCr+OBquOBl++8iVxuICAgIC8vIOS7o+OCj+OCiuOBq+aKveixoeODoeOCveODg+ODieOBruWtmOWcqOOCkueiuuiqjVxuICAgIGV4cGVjdCh0eXBlb2YgQmFzZU1ldHJpY3NHZW5lcmF0b3IpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gIH0pO1xuXG4gIC8vIElNZXRyaWNzR2VuZXJhdG9y44Kk44Oz44K/44O844OV44Kn44O844K55a6f6KOF44OG44K544OI77yIR1JFRU7mrrXpmo46IOOCpOODs+OCv+ODvOODleOCp+ODvOOCueeiuuiqje+8iVxuICBpdCgnc2hvdWxkIGltcGxlbWVudCBJTWV0cmljc0dlbmVyYXRvciBpbnRlcmZhY2UnLCAoKSA9PiB7XG4gICAgY29uc3QgeyBCYXNlTWV0cmljc0dlbmVyYXRvciB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vc3JjL2dlbmVyYXRvcnMvYmFzZS5nZW5lcmF0b3InKTtcbiAgICBcbiAgICAvLyDjg5fjg63jg4jjgr/jgqTjg5fjgatnZW5lcmF0ZeODoeOCveODg+ODieOBjOOBguOCi+OBk+OBqOOCkueiuuiqjVxuICAgIGV4cGVjdChCYXNlTWV0cmljc0dlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGUpLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KHR5cGVvZiBCYXNlTWV0cmljc0dlbmVyYXRvci5wcm90b3R5cGUuZ2VuZXJhdGUpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgXG4gICAgLy8g5oq96LGh44Oh44K944OD44OJ44GM5a6a576p44GV44KM44Gm44GE44KL56K66KqN77yI5a6f6KOF44Gv5a2Q44Kv44Op44K544Gn77yJXG4gICAgY29uc3QgcHJvdG90eXBlID0gQmFzZU1ldHJpY3NHZW5lcmF0b3IucHJvdG90eXBlO1xuICAgIGV4cGVjdCh0eXBlb2YgcHJvdG90eXBlLmdldFN1cHBvcnRlZFR5cGVzKS50b0JlKCd1bmRlZmluZWQnKTsgLy8g5oq96LGh44Oh44K944OD44OJXG4gIH0pO1xuXG4gIC8vIOODhuOCueODiOeUqOWFt+ixoeOCr+ODqeOCueS9nOaIkO+8iOWLleS9nOeiuuiqjeeUqO+8iVxuICBjbGFzcyBUZXN0TWV0cmljc0dlbmVyYXRvciBleHRlbmRzIChyZXF1aXJlKCcuLi8uLi8uLi9zcmMvZ2VuZXJhdG9ycy9iYXNlLmdlbmVyYXRvcicpLkJhc2VNZXRyaWNzR2VuZXJhdG9yKSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBjb25zdCB7IGNyZWF0ZUxvZ2dlciB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vc3JjL3V0aWxzL2xvZ2dlcicpO1xuICAgICAgc3VwZXIoY3JlYXRlTG9nZ2VyKCdlcnJvcicpKTtcbiAgICB9XG5cbiAgICBnZXRTdXBwb3J0ZWRUeXBlcygpOiBzdHJpbmdbXSB7XG4gICAgICByZXR1cm4gWydBV1M6OlRlc3Q6OlJlc291cmNlJ107XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldE1ldHJpY3NDb25maWcoKSB7XG4gICAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ1Rlc3RNZXRyaWMnLFxuICAgICAgICAgIG5hbWVzcGFjZTogJ0FXUy9UZXN0JyxcbiAgICAgICAgICB1bml0OiAnQ291bnQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGVzdCBtZXRyaWMnLFxuICAgICAgICAgIHN0YXRpc3RpYzogJ0F2ZXJhZ2UnIGFzIGNvbnN0LFxuICAgICAgICAgIGV2YWx1YXRpb25QZXJpb2Q6IDMwMCBhcyBjb25zdCxcbiAgICAgICAgICBjYXRlZ29yeTogJ1BlcmZvcm1hbmNlJyBhcyBjb25zdCxcbiAgICAgICAgICBpbXBvcnRhbmNlOiAnSGlnaCcgYXMgY29uc3QsXG4gICAgICAgICAgdGhyZXNob2xkOiB7XG4gICAgICAgICAgICBiYXNlOiAxMDAsXG4gICAgICAgICAgICB3YXJuaW5nTXVsdGlwbGllcjogMS4wLFxuICAgICAgICAgICAgY3JpdGljYWxNdWx0aXBsaWVyOiAxLjVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF07XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldFJlc291cmNlU2NhbGUoKSB7XG4gICAgICByZXR1cm4gMS4wO1xuICAgIH1cbiAgfVxuXG4gIC8vIOWLleeahOOBl+OBjeOBhOWApOioiOeul+ODhuOCueODiO+8iEdSRUVO5q616ZqOOiDoqIjnrpfnorroqo3vvIlcbiAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgZHluYW1pYyB0aHJlc2hvbGRzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB0ZXN0R2VuZXJhdG9yID0gbmV3IFRlc3RNZXRyaWNzR2VuZXJhdG9yKCk7XG4gICAgY29uc3QgdGVzdFJlc291cmNlID0ge1xuICAgICAgVHlwZTogJ0FXUzo6VGVzdDo6UmVzb3VyY2UnLFxuICAgICAgUHJvcGVydGllczoge30sXG4gICAgICBMb2dpY2FsSWQ6ICdUZXN0UmVzb3VyY2UnXG4gICAgfTtcblxuICAgIGNvbnN0IG1ldHJpY3MgPSBhd2FpdCB0ZXN0R2VuZXJhdG9yLmdlbmVyYXRlKHRlc3RSZXNvdXJjZSk7XG4gICAgXG4gICAgZXhwZWN0KG1ldHJpY3MpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICBjb25zdCBtZXRyaWMgPSBtZXRyaWNzWzBdO1xuICAgIFxuICAgIC8vIOOBl+OBjeOBhOWApOioiOeul+eiuuiqjVxuICAgIGV4cGVjdChtZXRyaWMucmVjb21tZW5kZWRfdGhyZXNob2xkKS50b0hhdmVWYWxpZFRocmVzaG9sZCgpO1xuICAgIGV4cGVjdChtZXRyaWMucmVjb21tZW5kZWRfdGhyZXNob2xkLndhcm5pbmcpLnRvQmUoMTAwKTsgLy8gMTAwICogMS4wICogMS4wXG4gICAgZXhwZWN0KG1ldHJpYy5yZWNvbW1lbmRlZF90aHJlc2hvbGQuY3JpdGljYWwpLnRvQmUoMTUwKTsgLy8gMTAwICogMS4wICogMS41XG4gIH0pO1xuXG4gIC8vIOODquOCveODvOOCueOCueOCseODvOODq+S/guaVsOioiOeul+ODhuOCueODiO+8iEdSRUVO5q616ZqOOiDjgrnjgrHjg7zjg6vlj43mmKDnorroqo3vvIlcbiAgaXQoJ3Nob3VsZCBjb21wdXRlIHJlc291cmNlIHNjYWxlIGZhY3RvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgLy8g44K544Kx44O844Or5L+C5pWwMi4w44Gu44OG44K544OI44K444Kn44ON44Os44O844K/XG4gICAgY2xhc3MgU2NhbGVkVGVzdEdlbmVyYXRvciBleHRlbmRzIFRlc3RNZXRyaWNzR2VuZXJhdG9yIHtcbiAgICAgIHByb3RlY3RlZCBnZXRSZXNvdXJjZVNjYWxlKCkge1xuICAgICAgICByZXR1cm4gMi4wOyAvLyAy5YCN44K544Kx44O844OrXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2NhbGVkR2VuZXJhdG9yID0gbmV3IFNjYWxlZFRlc3RHZW5lcmF0b3IoKTtcbiAgICBjb25zdCB0ZXN0UmVzb3VyY2UgPSB7XG4gICAgICBUeXBlOiAnQVdTOjpUZXN0OjpSZXNvdXJjZScsXG4gICAgICBQcm9wZXJ0aWVzOiB7fSxcbiAgICAgIExvZ2ljYWxJZDogJ1NjYWxlZFRlc3RSZXNvdXJjZSdcbiAgICB9O1xuXG4gICAgY29uc3QgbWV0cmljcyA9IGF3YWl0IHNjYWxlZEdlbmVyYXRvci5nZW5lcmF0ZSh0ZXN0UmVzb3VyY2UpO1xuICAgIGNvbnN0IG1ldHJpYyA9IG1ldHJpY3NbMF07XG4gICAgXG4gICAgLy8g44K544Kx44O844Or5L+C5pWw44GM5Y+N5pig44GV44KM44Gm44GE44KL56K66KqNXG4gICAgZXhwZWN0KG1ldHJpYy5yZWNvbW1lbmRlZF90aHJlc2hvbGQud2FybmluZykudG9CZSgyMDApOyAvLyAxMDAgKiAyLjAgKiAxLjBcbiAgICBleHBlY3QobWV0cmljLnJlY29tbWVuZGVkX3RocmVzaG9sZC5jcml0aWNhbCkudG9CZSgzMDApOyAvLyAxMDAgKiAyLjAgKiAxLjVcbiAgfSk7XG5cbiAgLy8g44Oh44OI44Oq44Kv44K555Sf5oiQ44OR44OV44Kp44O844Oe44Oz44K544OG44K544OI77yIR1JFRU7mrrXpmo46IOaAp+iDveeiuuiqje+8iVxuICBpdCgnc2hvdWxkIGdlbmVyYXRlIG1ldHJpY3Mgd2l0aGluIDEgc2Vjb25kJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHRlc3RHZW5lcmF0b3IgPSBuZXcgVGVzdE1ldHJpY3NHZW5lcmF0b3IoKTtcbiAgICBjb25zdCB0ZXN0UmVzb3VyY2UgPSB7XG4gICAgICBUeXBlOiAnQVdTOjpUZXN0OjpSZXNvdXJjZScsXG4gICAgICBQcm9wZXJ0aWVzOiB7fSxcbiAgICAgIExvZ2ljYWxJZDogJ1BlcmZvcm1hbmNlVGVzdFJlc291cmNlJ1xuICAgIH07XG5cbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBjb25zdCBtZXRyaWNzID0gYXdhaXQgdGVzdEdlbmVyYXRvci5nZW5lcmF0ZSh0ZXN0UmVzb3VyY2UpO1xuICAgIGNvbnN0IGR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWU7XG4gICAgXG4gICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oMTAwMCk7IC8vIDHnp5Lku6XlhoVcbiAgICBleHBlY3QobWV0cmljcykudG9IYXZlTGVuZ3RoKDEpO1xuICB9KTtcblxuICAvLyDpgannlKjlj6/og73jg6Hjg4jjg6rjgq/jgrnliKTlrprjg4bjgrnjg4jvvIhHUkVFTuautemajjog44OV44Kj44Or44K/44Oq44Oz44Kw56K66KqN77yJXG4gIGl0KCdzaG91bGQgZmlsdGVyIGFwcGxpY2FibGUgbWV0cmljcyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgLy8g5p2h5Lu25LuY44GN44Oh44OI44Oq44Kv44K555So44OG44K544OI44K444Kn44ON44Os44O844K/XG4gICAgY2xhc3MgQ29uZGl0aW9uYWxUZXN0R2VuZXJhdG9yIGV4dGVuZHMgVGVzdE1ldHJpY3NHZW5lcmF0b3Ige1xuICAgICAgcHJvdGVjdGVkIGdldE1ldHJpY3NDb25maWcoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0Fsd2F5c0FwcGxpY2FibGUnLFxuICAgICAgICAgICAgbmFtZXNwYWNlOiAnQVdTL1Rlc3QnLFxuICAgICAgICAgICAgdW5pdDogJ0NvdW50JyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQWx3YXlzIGFwcGxpY2FibGUgbWV0cmljJyxcbiAgICAgICAgICAgIHN0YXRpc3RpYzogJ0F2ZXJhZ2UnIGFzIGNvbnN0LFxuICAgICAgICAgICAgZXZhbHVhdGlvblBlcmlvZDogMzAwIGFzIGNvbnN0LFxuICAgICAgICAgICAgY2F0ZWdvcnk6ICdQZXJmb3JtYW5jZScgYXMgY29uc3QsXG4gICAgICAgICAgICBpbXBvcnRhbmNlOiAnSGlnaCcgYXMgY29uc3QsXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IHsgYmFzZTogNTAsIHdhcm5pbmdNdWx0aXBsaWVyOiAxLjAsIGNyaXRpY2FsTXVsdGlwbGllcjogMi4wIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdDb25kaXRpb25hbE1ldHJpYycsXG4gICAgICAgICAgICBuYW1lc3BhY2U6ICdBV1MvVGVzdCcsXG4gICAgICAgICAgICB1bml0OiAnQ291bnQnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDb25kaXRpb25hbCBtZXRyaWMnLFxuICAgICAgICAgICAgc3RhdGlzdGljOiAnQXZlcmFnZScgYXMgY29uc3QsXG4gICAgICAgICAgICBldmFsdWF0aW9uUGVyaW9kOiAzMDAgYXMgY29uc3QsXG4gICAgICAgICAgICBjYXRlZ29yeTogJ1BlcmZvcm1hbmNlJyBhcyBjb25zdCxcbiAgICAgICAgICAgIGltcG9ydGFuY2U6ICdNZWRpdW0nIGFzIGNvbnN0LFxuICAgICAgICAgICAgdGhyZXNob2xkOiB7IGJhc2U6IDc1LCB3YXJuaW5nTXVsdGlwbGllcjogMS4wLCBjcml0aWNhbE11bHRpcGxpZXI6IDIuMCB9LFxuICAgICAgICAgICAgYXBwbGljYWJsZVdoZW46IChyZXNvdXJjZSkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2UuTG9naWNhbElkID09PSAnQ29uZGl0aW9uYWxUZXN0UmVzb3VyY2UnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjb25kaXRpb25hbEdlbmVyYXRvciA9IG5ldyBDb25kaXRpb25hbFRlc3RHZW5lcmF0b3IoKTtcbiAgICBcbiAgICAvLyDmnaHku7bjgavlkIjoh7TjgZnjgovjg6rjgr3jg7zjgrlcbiAgICBjb25zdCBtYXRjaGluZ1Jlc291cmNlID0ge1xuICAgICAgVHlwZTogJ0FXUzo6VGVzdDo6UmVzb3VyY2UnLFxuICAgICAgUHJvcGVydGllczoge30sXG4gICAgICBMb2dpY2FsSWQ6ICdDb25kaXRpb25hbFRlc3RSZXNvdXJjZSdcbiAgICB9O1xuXG4gICAgY29uc3QgbWF0Y2hpbmdNZXRyaWNzID0gYXdhaXQgY29uZGl0aW9uYWxHZW5lcmF0b3IuZ2VuZXJhdGUobWF0Y2hpbmdSZXNvdXJjZSk7XG4gICAgZXhwZWN0KG1hdGNoaW5nTWV0cmljcykudG9IYXZlTGVuZ3RoKDIpOyAvLyDkuKHmlrnpgannlKhcbiAgICBcbiAgICAvLyDmnaHku7bjgavlkIjoh7TjgZfjgarjgYTjg6rjgr3jg7zjgrlcbiAgICBjb25zdCBub25NYXRjaGluZ1Jlc291cmNlID0ge1xuICAgICAgVHlwZTogJ0FXUzo6VGVzdDo6UmVzb3VyY2UnLFxuICAgICAgUHJvcGVydGllczoge30sXG4gICAgICBMb2dpY2FsSWQ6ICdOb25NYXRjaGluZ1Jlc291cmNlJ1xuICAgIH07XG5cbiAgICBjb25zdCBub25NYXRjaGluZ01ldHJpY3MgPSBhd2FpdCBjb25kaXRpb25hbEdlbmVyYXRvci5nZW5lcmF0ZShub25NYXRjaGluZ1Jlc291cmNlKTtcbiAgICBleHBlY3Qobm9uTWF0Y2hpbmdNZXRyaWNzKS50b0hhdmVMZW5ndGgoMSk7IC8vIOadoeS7tuOBquOBl+OBruOBv+mBqeeUqFxuICB9KTtcblxuICAvLyBDbG91ZFdhdGNo44OH44Kj44Oh44Oz44K344On44Oz5qeL56+J44OG44K544OI77yIR1JFRU7mrrXpmo46IEFXU+S7leanmOa6luaLoOeiuuiqje+8iVxuICBpdCgnc2hvdWxkIGJ1aWxkIENsb3VkV2F0Y2ggZGltZW5zaW9ucyBwcm9wZXJseScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB0ZXN0R2VuZXJhdG9yID0gbmV3IFRlc3RNZXRyaWNzR2VuZXJhdG9yKCk7XG4gICAgY29uc3QgdGVzdFJlc291cmNlID0ge1xuICAgICAgVHlwZTogJ0FXUzo6VGVzdDo6UmVzb3VyY2UnLFxuICAgICAgUHJvcGVydGllczoge30sXG4gICAgICBMb2dpY2FsSWQ6ICdEaW1lbnNpb25UZXN0UmVzb3VyY2UnXG4gICAgfTtcblxuICAgIGNvbnN0IG1ldHJpY3MgPSBhd2FpdCB0ZXN0R2VuZXJhdG9yLmdlbmVyYXRlKHRlc3RSZXNvdXJjZSk7XG4gICAgY29uc3QgbWV0cmljID0gbWV0cmljc1swXTtcbiAgICBcbiAgICAvLyDjg4fjgqPjg6Hjg7Pjgrfjg6fjg7Pmp4vnr4nnorroqo1cbiAgICBleHBlY3QobWV0cmljLmRpbWVuc2lvbnMpLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KG1ldHJpYy5kaW1lbnNpb25zKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgXG4gICAgaWYgKG1ldHJpYy5kaW1lbnNpb25zICYmIG1ldHJpYy5kaW1lbnNpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGRpbWVuc2lvbiA9IG1ldHJpYy5kaW1lbnNpb25zWzBdO1xuICAgICAgZXhwZWN0KGRpbWVuc2lvbi5uYW1lKS50b0JlKCdSZXNvdXJjZUlkJyk7IC8vIFRlc3Q6OlJlc291cmNl44Gv44Oe44OD44OX44Gr44Gq44GE44Gu44Gn44OH44OV44Kp44Or44OIXG4gICAgICBleHBlY3QoZGltZW5zaW9uLnZhbHVlKS50b0JlKCdEaW1lbnNpb25UZXN0UmVzb3VyY2UnKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIENMQVVERS5tZDogTm8gYW55IHR5cGVz5qSc6Ki8XG4gIGl0KCdzaG91bGQgbm90IHVzZSBhbnkgdHlwZXMgaW4gYmFzZSBnZW5lcmF0b3IgaW1wbGVtZW50YXRpb24nLCAoKSA9PiB7XG4gICAgY29uc3QgYmFzZUdlbmVyYXRvckNvZGUgPSByZWFkRmlsZVN5bmMoXG4gICAgICBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vLi4vLi4vc3JjL2dlbmVyYXRvcnMvYmFzZS5nZW5lcmF0b3IudHMnKSxcbiAgICAgICd1dGY4J1xuICAgICk7XG4gICAgZXhwZWN0KGJhc2VHZW5lcmF0b3JDb2RlKS50b0hhdmVOb0FueVR5cGVzKCk7XG4gIH0pO1xuXG4gIC8vIOaKveixoeODoeOCveODg+ODieWumue+qeODhuOCueODiO+8iEdSRUVO5q616ZqOOiDlv4XpoIjjg6Hjgr3jg4Pjg4nnorroqo3vvIlcbiAgaXQoJ3Nob3VsZCBkZWZpbmUgcmVxdWlyZWQgYWJzdHJhY3QgbWV0aG9kcycsICgpID0+IHtcbiAgICBjb25zdCB7IEJhc2VNZXRyaWNzR2VuZXJhdG9yIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvZ2VuZXJhdG9ycy9iYXNlLmdlbmVyYXRvcicpO1xuICAgIFxuICAgIC8vIOaKveixoeOCr+ODqeOCueiHquS9k+OBq+OBr+OBquOBhO+8iOWtkOOCr+ODqeOCueOBp+Wun+ijhe+8iVxuICAgIGV4cGVjdChCYXNlTWV0cmljc0dlbmVyYXRvci5wcm90b3R5cGUuZ2V0U3VwcG9ydGVkVHlwZXMpLnRvQmVVbmRlZmluZWQoKTtcbiAgICBleHBlY3QoQmFzZU1ldHJpY3NHZW5lcmF0b3IucHJvdG90eXBlLmdldE1ldHJpY3NDb25maWcpLnRvQmVVbmRlZmluZWQoKTtcbiAgICBleHBlY3QoQmFzZU1ldHJpY3NHZW5lcmF0b3IucHJvdG90eXBlLmdldFJlc291cmNlU2NhbGUpLnRvQmVVbmRlZmluZWQoKTtcbiAgICBcbiAgICAvLyDlhbfosaHlrp/oo4XjgpLmjIHjgaTjg6Hjgr3jg4Pjg4lcbiAgICBleHBlY3QoQmFzZU1ldHJpY3NHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlKS50b0JlRGVmaW5lZCgpO1xuICB9KTtcblxuICAvLyDjgqjjg6njg7zjg4/jg7Pjg4njg6rjg7PjgrDntbHlkIjjg4bjgrnjg4jvvIhHUkVFTuautemajjogQ2xvdWRTdXBwb3J0ZXJFcnJvcue1seWQiOeiuuiqje+8iVxuICBpdCgnc2hvdWxkIGludGVncmF0ZSB3aXRoIENsb3VkU3VwcG9ydGVyRXJyb3Igc3lzdGVtJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHRlc3RHZW5lcmF0b3IgPSBuZXcgVGVzdE1ldHJpY3NHZW5lcmF0b3IoKTtcbiAgICBjb25zdCBpbnZhbGlkUmVzb3VyY2UgPSB7XG4gICAgICBUeXBlOiAnQVdTOjpJbnZhbGlkOjpSZXNvdXJjZScsIC8vIOOCteODneODvOODiOWvvuixoeWkllxuICAgICAgUHJvcGVydGllczoge30sXG4gICAgICBMb2dpY2FsSWQ6ICdJbnZhbGlkUmVzb3VyY2UnXG4gICAgfTtcblxuICAgIC8vIOOCteODneODvOODiOWvvuixoeWkluODquOCveODvOOCueOBp+OCqOODqeODvFxuICAgIGF3YWl0IGV4cGVjdCh0ZXN0R2VuZXJhdG9yLmdlbmVyYXRlKGludmFsaWRSZXNvdXJjZSkpLnJlamVjdHMudG9UaHJvdygpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0ZXN0R2VuZXJhdG9yLmdlbmVyYXRlKGludmFsaWRSZXNvdXJjZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGV4cGVjdChlcnJvci50eXBlKS50b0JlKCdSRVNPVVJDRV9FUlJPUicpO1xuICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignVW5zdXBwb3J0ZWQgcmVzb3VyY2UgdHlwZScpO1xuICAgIH1cbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ0Jhc2VNZXRyaWNzR2VuZXJhdG9y5YuV55qE44GX44GN44GE5YCk77yIQ0xBVURFLm1kOiDjgqLjg6vjgrTjg6rjgrrjg6DopoHku7bvvIknLCAoKSA9PiB7XG4gIFxuICAvLyDjg4bjgrnjg4jnlKjlhbfosaHjgq/jg6njgrlcbiAgY2xhc3MgVGhyZXNob2xkVGVzdEdlbmVyYXRvciBleHRlbmRzIChyZXF1aXJlKCcuLi8uLi8uLi9zcmMvZ2VuZXJhdG9ycy9iYXNlLmdlbmVyYXRvcicpLkJhc2VNZXRyaWNzR2VuZXJhdG9yKSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBjb25zdCB7IGNyZWF0ZUxvZ2dlciB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vc3JjL3V0aWxzL2xvZ2dlcicpO1xuICAgICAgc3VwZXIoY3JlYXRlTG9nZ2VyKCdlcnJvcicpKTtcbiAgICB9XG5cbiAgICBnZXRTdXBwb3J0ZWRUeXBlcygpOiBzdHJpbmdbXSB7XG4gICAgICByZXR1cm4gWydBV1M6OlRlc3Q6OlRocmVzaG9sZCddO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXRNZXRyaWNzQ29uZmlnKCkge1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdUaHJlc2hvbGRUZXN0TWV0cmljJyxcbiAgICAgICAgICBuYW1lc3BhY2U6ICdBV1MvVGVzdCcsXG4gICAgICAgICAgdW5pdDogJ1BlcmNlbnQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGhyZXNob2xkIGNhbGN1bGF0aW9uIHRlc3QnLFxuICAgICAgICAgIHN0YXRpc3RpYzogJ0F2ZXJhZ2UnIGFzIGNvbnN0LFxuICAgICAgICAgIGV2YWx1YXRpb25QZXJpb2Q6IDMwMCBhcyBjb25zdCxcbiAgICAgICAgICBjYXRlZ29yeTogJ1BlcmZvcm1hbmNlJyBhcyBjb25zdCxcbiAgICAgICAgICBpbXBvcnRhbmNlOiAnSGlnaCcgYXMgY29uc3QsXG4gICAgICAgICAgdGhyZXNob2xkOiB7XG4gICAgICAgICAgICBiYXNlOiA4MCxcbiAgICAgICAgICAgIHdhcm5pbmdNdWx0aXBsaWVyOiAwLjg3NSwgLy8gNzAlXG4gICAgICAgICAgICBjcml0aWNhbE11bHRpcGxpZXI6IDEuMjUgICAvLyAxMDAlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXRSZXNvdXJjZVNjYWxlKCkge1xuICAgICAgcmV0dXJuIDIuMDsgLy8gMuWAjeOCueOCseODvOODq1xuICAgIH1cbiAgfVxuXG4gIC8vIOOBl+OBjeOBhOWApOioiOeul+OCouODq+OCtOODquOCuuODoOODhuOCueODiO+8iEdSRUVO5q616ZqOOiDmlbDlvI/norroqo3vvIlcbiAgaXQoJ3Nob3VsZCBpbXBsZW1lbnQgdGhyZXNob2xkIGNhbGN1bGF0aW9uIGFsZ29yaXRobScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB0aHJlc2hvbGRHZW5lcmF0b3IgPSBuZXcgVGhyZXNob2xkVGVzdEdlbmVyYXRvcigpO1xuICAgIGNvbnN0IHRlc3RSZXNvdXJjZSA9IHtcbiAgICAgIFR5cGU6ICdBV1M6OlRlc3Q6OlRocmVzaG9sZCcsXG4gICAgICBQcm9wZXJ0aWVzOiB7fSxcbiAgICAgIExvZ2ljYWxJZDogJ1RocmVzaG9sZFRlc3RSZXNvdXJjZSdcbiAgICB9O1xuXG4gICAgY29uc3QgbWV0cmljcyA9IGF3YWl0IHRocmVzaG9sZEdlbmVyYXRvci5nZW5lcmF0ZSh0ZXN0UmVzb3VyY2UpO1xuICAgIGNvbnN0IG1ldHJpYyA9IG1ldHJpY3NbMF07XG4gICAgXG4gICAgLy8g6KiI566X5byPOiBiYXNlICogc2NhbGUgKiBtdWx0aXBsaWVyXG4gICAgLy8gd2FybmluZzogODAgKiAyLjAgKiAwLjg3NSA9IDE0MFxuICAgIC8vIGNyaXRpY2FsOiA4MCAqIDIuMCAqIDEuMjUgPSAyMDBcbiAgICBleHBlY3QobWV0cmljLnJlY29tbWVuZGVkX3RocmVzaG9sZC53YXJuaW5nKS50b0JlKDE0MCk7XG4gICAgZXhwZWN0KG1ldHJpYy5yZWNvbW1lbmRlZF90aHJlc2hvbGQuY3JpdGljYWwpLnRvQmUoMjAwKTtcbiAgfSk7XG5cbiAgLy8g44K544Kx44O844Or5L+C5pWw5Y+N5pig44OG44K544OI77yIR1JFRU7mrrXpmo46IOOCueOCseODvOODq+ioiOeul+eiuuiqje+8iVxuICBpdCgnc2hvdWxkIGFwcGx5IHJlc291cmNlIHNjYWxlIGZhY3RvcnMgdG8gdGhyZXNob2xkcycsIGFzeW5jICgpID0+IHtcbiAgICAvLyDnlbDjgarjgovjgrnjgrHjg7zjg6vkv4LmlbDjga7jgrjjgqfjg43jg6zjg7zjgr9cbiAgICBjbGFzcyBWYXJpYWJsZVNjYWxlR2VuZXJhdG9yIGV4dGVuZHMgVGhyZXNob2xkVGVzdEdlbmVyYXRvciB7XG4gICAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHNjYWxlOiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcHJvdGVjdGVkIGdldFJlc291cmNlU2NhbGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjYWxlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHNjYWxlcyA9IFswLjUsIDEuMCwgMS41LCAzLjBdO1xuICAgIGNvbnN0IHRlc3RSZXNvdXJjZSA9IHtcbiAgICAgIFR5cGU6ICdBV1M6OlRlc3Q6OlRocmVzaG9sZCcsXG4gICAgICBQcm9wZXJ0aWVzOiB7fSxcbiAgICAgIExvZ2ljYWxJZDogJ1ZhcmlhYmxlU2NhbGVSZXNvdXJjZSdcbiAgICB9O1xuXG4gICAgZm9yIChjb25zdCBzY2FsZSBvZiBzY2FsZXMpIHtcbiAgICAgIGNvbnN0IGdlbmVyYXRvciA9IG5ldyBWYXJpYWJsZVNjYWxlR2VuZXJhdG9yKHNjYWxlKTtcbiAgICAgIGNvbnN0IG1ldHJpY3MgPSBhd2FpdCBnZW5lcmF0b3IuZ2VuZXJhdGUodGVzdFJlc291cmNlKTtcbiAgICAgIGNvbnN0IG1ldHJpYyA9IG1ldHJpY3NbMF07XG4gICAgICBcbiAgICAgIGNvbnN0IGV4cGVjdGVkV2FybmluZyA9IE1hdGgucm91bmQoODAgKiBzY2FsZSAqIDAuODc1KTtcbiAgICAgIGNvbnN0IGV4cGVjdGVkQ3JpdGljYWwgPSBNYXRoLnJvdW5kKDgwICogc2NhbGUgKiAxLjI1KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1ldHJpYy5yZWNvbW1lbmRlZF90aHJlc2hvbGQud2FybmluZykudG9CZShleHBlY3RlZFdhcm5pbmcpO1xuICAgICAgZXhwZWN0KG1ldHJpYy5yZWNvbW1lbmRlZF90aHJlc2hvbGQuY3JpdGljYWwpLnRvQmUoZXhwZWN0ZWRDcml0aWNhbCk7XG4gICAgfVxuICB9KTtcblxuICAvLyDjgZfjgY3jgYTlgKTlpqXlvZPmgKfmpJzoqLzjg4bjgrnjg4jvvIhHUkVFTuautemajjog6Ieq5YuV5L+u5q2j56K66KqN77yJXG4gIGl0KCdzaG91bGQgZW5zdXJlIHdhcm5pbmcgPCBjcml0aWNhbCB0aHJlc2hvbGQgdmFsaWRpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgLy8g5LiN5q2j44Gq5LmX5pWw44Gnd2FybmluZyA+PSBjcml0aWNhbOOBq+OBquOCi+ioreWumlxuICAgIGNsYXNzIEludmFsaWRUaHJlc2hvbGRHZW5lcmF0b3IgZXh0ZW5kcyBUaHJlc2hvbGRUZXN0R2VuZXJhdG9yIHtcbiAgICAgIHByb3RlY3RlZCBnZXRNZXRyaWNzQ29uZmlnKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdJbnZhbGlkVGhyZXNob2xkTWV0cmljJyxcbiAgICAgICAgICAgIG5hbWVzcGFjZTogJ0FXUy9UZXN0JyxcbiAgICAgICAgICAgIHVuaXQ6ICdQZXJjZW50JyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnSW52YWxpZCB0aHJlc2hvbGQgdGVzdCcsXG4gICAgICAgICAgICBzdGF0aXN0aWM6ICdBdmVyYWdlJyBhcyBjb25zdCxcbiAgICAgICAgICAgIGV2YWx1YXRpb25QZXJpb2Q6IDMwMCBhcyBjb25zdCxcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnUGVyZm9ybWFuY2UnIGFzIGNvbnN0LFxuICAgICAgICAgICAgaW1wb3J0YW5jZTogJ0hpZ2gnIGFzIGNvbnN0LFxuICAgICAgICAgICAgdGhyZXNob2xkOiB7XG4gICAgICAgICAgICAgIGJhc2U6IDEwMCxcbiAgICAgICAgICAgICAgd2FybmluZ011bHRpcGxpZXI6IDEuNSwgLy8gd2FybmluZz0xNTBcbiAgICAgICAgICAgICAgY3JpdGljYWxNdWx0aXBsaWVyOiAxLjIgIC8vIGNyaXRpY2FsPTEyMCAo5LiN5q2jKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpbnZhbGlkR2VuZXJhdG9yID0gbmV3IEludmFsaWRUaHJlc2hvbGRHZW5lcmF0b3IoKTtcbiAgICBjb25zdCB0ZXN0UmVzb3VyY2UgPSB7XG4gICAgICBUeXBlOiAnQVdTOjpUZXN0OjpUaHJlc2hvbGQnLFxuICAgICAgUHJvcGVydGllczoge30sXG4gICAgICBMb2dpY2FsSWQ6ICdJbnZhbGlkVGhyZXNob2xkUmVzb3VyY2UnXG4gICAgfTtcblxuICAgIGNvbnN0IG1ldHJpY3MgPSBhd2FpdCBpbnZhbGlkR2VuZXJhdG9yLmdlbmVyYXRlKHRlc3RSZXNvdXJjZSk7XG4gICAgY29uc3QgbWV0cmljID0gbWV0cmljc1swXTtcbiAgICBcbiAgICAvLyDoh6rli5Xkv67mraPjgavjgojjgoogd2FybmluZyA8IGNyaXRpY2FsIOOBjOS/neiovOOBleOCjOOCi1xuICAgIGV4cGVjdChtZXRyaWMucmVjb21tZW5kZWRfdGhyZXNob2xkKS50b0hhdmVWYWxpZFRocmVzaG9sZCgpO1xuICAgIGV4cGVjdChtZXRyaWMucmVjb21tZW5kZWRfdGhyZXNob2xkLmNyaXRpY2FsKS50b0JlR3JlYXRlclRoYW4obWV0cmljLnJlY29tbWVuZGVkX3RocmVzaG9sZC53YXJuaW5nKTtcbiAgfSk7XG5cbiAgLy8g5pWw5YCk57K+5bqm44OG44K544OI77yIR1JFRU7mrrXpmo46IOS4uOOCgeWHpueQhueiuuiqje+8iVxuICBpdCgnc2hvdWxkIG1haW50YWluIG51bWVyaWNhbCBwcmVjaXNpb24gaW4gY2FsY3VsYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgIC8vIOWwj+aVsOeCueOCkuWQq+OCgOioiOeul+OBruODhuOCueODiFxuICAgIGNsYXNzIFByZWNpc2lvblRlc3RHZW5lcmF0b3IgZXh0ZW5kcyBUaHJlc2hvbGRUZXN0R2VuZXJhdG9yIHtcbiAgICAgIHByb3RlY3RlZCBnZXRNZXRyaWNzQ29uZmlnKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdQcmVjaXNpb25UZXN0TWV0cmljJyxcbiAgICAgICAgICAgIG5hbWVzcGFjZTogJ0FXUy9UZXN0JyxcbiAgICAgICAgICAgIHVuaXQ6ICdTZWNvbmRzJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUHJlY2lzaW9uIHRlc3QgbWV0cmljJyxcbiAgICAgICAgICAgIHN0YXRpc3RpYzogJ0F2ZXJhZ2UnIGFzIGNvbnN0LFxuICAgICAgICAgICAgZXZhbHVhdGlvblBlcmlvZDogMzAwIGFzIGNvbnN0LFxuICAgICAgICAgICAgY2F0ZWdvcnk6ICdMYXRlbmN5JyBhcyBjb25zdCxcbiAgICAgICAgICAgIGltcG9ydGFuY2U6ICdIaWdoJyBhcyBjb25zdCxcbiAgICAgICAgICAgIHRocmVzaG9sZDoge1xuICAgICAgICAgICAgICBiYXNlOiAwLjEyMzQsIC8vIOWwj+aVsOeCuVxuICAgICAgICAgICAgICB3YXJuaW5nTXVsdGlwbGllcjogMS4yMzQsXG4gICAgICAgICAgICAgIGNyaXRpY2FsTXVsdGlwbGllcjogMi41NjdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIF07XG4gICAgICB9XG5cbiAgICAgIHByb3RlY3RlZCBnZXRSZXNvdXJjZVNjYWxlKCkge1xuICAgICAgICByZXR1cm4gMS43ODk7IC8vIOWwj+aVsOeCueOCueOCseODvOODq1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHByZWNpc2lvbkdlbmVyYXRvciA9IG5ldyBQcmVjaXNpb25UZXN0R2VuZXJhdG9yKCk7XG4gICAgY29uc3QgdGVzdFJlc291cmNlID0ge1xuICAgICAgVHlwZTogJ0FXUzo6VGVzdDo6VGhyZXNob2xkJyxcbiAgICAgIFByb3BlcnRpZXM6IHt9LFxuICAgICAgTG9naWNhbElkOiAnUHJlY2lzaW9uVGVzdFJlc291cmNlJ1xuICAgIH07XG5cbiAgICBjb25zdCBtZXRyaWNzID0gYXdhaXQgcHJlY2lzaW9uR2VuZXJhdG9yLmdlbmVyYXRlKHRlc3RSZXNvdXJjZSk7XG4gICAgY29uc3QgbWV0cmljID0gbWV0cmljc1swXTtcbiAgICBcbiAgICAvLyDkuLjjgoHlh6bnkIbjgavjgojjgormlbTmlbDlgKTjgavjgarjgaPjgabjgYTjgovnorroqo1cbiAgICBleHBlY3QoTnVtYmVyLmlzSW50ZWdlcihtZXRyaWMucmVjb21tZW5kZWRfdGhyZXNob2xkLndhcm5pbmcpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChOdW1iZXIuaXNJbnRlZ2VyKG1ldHJpYy5yZWNvbW1lbmRlZF90aHJlc2hvbGQuY3JpdGljYWwpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChtZXRyaWMucmVjb21tZW5kZWRfdGhyZXNob2xkLndhcm5pbmcpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgZXhwZWN0KG1ldHJpYy5yZWNvbW1lbmRlZF90aHJlc2hvbGQuY3JpdGljYWwpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgfSk7XG5cbiAgLy8g5aKD55WM5YCk44OG44K544OI77yIR1JFRU7mrrXpmo46IOOCqOODg+OCuOOCseODvOOCueeiuuiqje+8iVxuICBpdCgnc2hvdWxkIGhhbmRsZSBlZGdlIGNhc2VzIGluIHRocmVzaG9sZCBjYWxjdWxhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICBjbGFzcyBFZGdlQ2FzZVRlc3RHZW5lcmF0b3IgZXh0ZW5kcyBUaHJlc2hvbGRUZXN0R2VuZXJhdG9yIHtcbiAgICAgIHByb3RlY3RlZCBnZXRNZXRyaWNzQ29uZmlnKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdFZGdlQ2FzZU1ldHJpYycsXG4gICAgICAgICAgICBuYW1lc3BhY2U6ICdBV1MvVGVzdCcsXG4gICAgICAgICAgICB1bml0OiAnQ291bnQnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdFZGdlIGNhc2UgdGVzdCcsXG4gICAgICAgICAgICBzdGF0aXN0aWM6ICdBdmVyYWdlJyBhcyBjb25zdCxcbiAgICAgICAgICAgIGV2YWx1YXRpb25QZXJpb2Q6IDMwMCBhcyBjb25zdCxcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnUGVyZm9ybWFuY2UnIGFzIGNvbnN0LFxuICAgICAgICAgICAgaW1wb3J0YW5jZTogJ0hpZ2gnIGFzIGNvbnN0LFxuICAgICAgICAgICAgdGhyZXNob2xkOiB7XG4gICAgICAgICAgICAgIGJhc2U6IDEsIC8vIOacgOWwj+Wfuua6luWApFxuICAgICAgICAgICAgICB3YXJuaW5nTXVsdGlwbGllcjogMS4wLFxuICAgICAgICAgICAgICBjcml0aWNhbE11bHRpcGxpZXI6IDIuMFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgXTtcbiAgICAgIH1cblxuICAgICAgcHJvdGVjdGVkIGdldFJlc291cmNlU2NhbGUoKSB7XG4gICAgICAgIHJldHVybiAwLjE7IC8vIOalteWwj+OCueOCseODvOODq1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGVkZ2VDYXNlR2VuZXJhdG9yID0gbmV3IEVkZ2VDYXNlVGVzdEdlbmVyYXRvcigpO1xuICAgIGNvbnN0IHRlc3RSZXNvdXJjZSA9IHtcbiAgICAgIFR5cGU6ICdBV1M6OlRlc3Q6OlRocmVzaG9sZCcsXG4gICAgICBQcm9wZXJ0aWVzOiB7fSxcbiAgICAgIExvZ2ljYWxJZDogJ0VkZ2VDYXNlUmVzb3VyY2UnXG4gICAgfTtcblxuICAgIGNvbnN0IG1ldHJpY3MgPSBhd2FpdCBlZGdlQ2FzZUdlbmVyYXRvci5nZW5lcmF0ZSh0ZXN0UmVzb3VyY2UpO1xuICAgIGNvbnN0IG1ldHJpYyA9IG1ldHJpY3NbMF07XG4gICAgXG4gICAgLy8g5qW15bCP5YCk44Gn44KC6YGp5YiH44Gr5Yem55CG44GV44KM44KL56K66KqN77yIMOWApOioseWPr+OAgeiHquWLleS/ruato+apn+iDve+8iVxuICAgIGV4cGVjdChtZXRyaWMucmVjb21tZW5kZWRfdGhyZXNob2xkLndhcm5pbmcpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgZXhwZWN0KG1ldHJpYy5yZWNvbW1lbmRlZF90aHJlc2hvbGQuY3JpdGljYWwpLnRvQmVHcmVhdGVyVGhhbihtZXRyaWMucmVjb21tZW5kZWRfdGhyZXNob2xkLndhcm5pbmcpO1xuICAgIFxuICAgIC8vIE1hdGgucm91bmTlh6bnkIbjgavjgojjgoox5pyq5rqA44Gn44KC6YGp5YiH44Gq5YCkXG4gICAgLy8gMOWApOOBruWgtOWQiOOBr+iHquWLleS/ruato+OBleOCjOOCi1xuICAgIGV4cGVjdChtZXRyaWMucmVjb21tZW5kZWRfdGhyZXNob2xkLndhcm5pbmcpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgZXhwZWN0KG1ldHJpYy5yZWNvbW1lbmRlZF90aHJlc2hvbGQuY3JpdGljYWwpLnRvQmVHcmVhdGVyVGhhbihtZXRyaWMucmVjb21tZW5kZWRfdGhyZXNob2xkLndhcm5pbmcpO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnQmFzZU1ldHJpY3NHZW5lcmF0b3Ljg5Hjg5Xjgqnjg7zjg57jg7PjgrnvvIhDTEFVREUubWQ6IOaAp+iDveimgeS7tu+8iScsICgpID0+IHtcbiAgXG4gIC8vIOODhuOCueODiOeUqOmrmOmAn+OCuOOCp+ODjeODrOODvOOCv1xuICBjbGFzcyBQZXJmb3JtYW5jZVRlc3RHZW5lcmF0b3IgZXh0ZW5kcyAocmVxdWlyZSgnLi4vLi4vLi4vc3JjL2dlbmVyYXRvcnMvYmFzZS5nZW5lcmF0b3InKS5CYXNlTWV0cmljc0dlbmVyYXRvcikge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgY29uc3QgeyBjcmVhdGVMb2dnZXIgfSA9IHJlcXVpcmUoJy4uLy4uLy4uL3NyYy91dGlscy9sb2dnZXInKTtcbiAgICAgIHN1cGVyKGNyZWF0ZUxvZ2dlcignZXJyb3InKSk7XG4gICAgfVxuXG4gICAgZ2V0U3VwcG9ydGVkVHlwZXMoKTogc3RyaW5nW10ge1xuICAgICAgcmV0dXJuIFsnQVdTOjpUZXN0OjpQZXJmb3JtYW5jZSddO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXRNZXRyaWNzQ29uZmlnKCkge1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdGYXN0TWV0cmljJyxcbiAgICAgICAgICBuYW1lc3BhY2U6ICdBV1MvVGVzdCcsXG4gICAgICAgICAgdW5pdDogJ0NvdW50JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0Zhc3QgZ2VuZXJhdGlvbiB0ZXN0JyxcbiAgICAgICAgICBzdGF0aXN0aWM6ICdBdmVyYWdlJyBhcyBjb25zdCxcbiAgICAgICAgICBldmFsdWF0aW9uUGVyaW9kOiAzMDAgYXMgY29uc3QsXG4gICAgICAgICAgY2F0ZWdvcnk6ICdQZXJmb3JtYW5jZScgYXMgY29uc3QsXG4gICAgICAgICAgaW1wb3J0YW5jZTogJ0hpZ2gnIGFzIGNvbnN0LFxuICAgICAgICAgIHRocmVzaG9sZDogeyBiYXNlOiAxMDAsIHdhcm5pbmdNdWx0aXBsaWVyOiAxLjAsIGNyaXRpY2FsTXVsdGlwbGllcjogMi4wIH1cbiAgICAgICAgfVxuICAgICAgXTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0UmVzb3VyY2VTY2FsZSgpIHtcbiAgICAgIHJldHVybiAxLjA7XG4gICAgfVxuICB9XG5cbiAgLy8gMeenkuS7peWGheeUn+aIkOimgeS7tuODhuOCueODiO+8iEdSRUVO5q616ZqOOiDlrp/jg5Hjg5Xjgqnjg7zjg57jg7Pjgrnnorroqo3vvIlcbiAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBtZXRyaWNzIHdpdGhpbiBwZXJmb3JtYW5jZSBsaW1pdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBNZXRyaWNzR2VuZXJhdGlvbk1vbml0b3IgfSA9IHJlcXVpcmUoJy4uLy4uLy4uL3NyYy9nZW5lcmF0b3JzL2Jhc2UuZ2VuZXJhdG9yJyk7XG4gICAgY29uc3QgcGVyZm9ybWFuY2VHZW5lcmF0b3IgPSBuZXcgUGVyZm9ybWFuY2VUZXN0R2VuZXJhdG9yKCk7XG4gICAgXG4gICAgY29uc3QgdGVzdFJlc291cmNlID0ge1xuICAgICAgVHlwZTogJ0FXUzo6VGVzdDo6UGVyZm9ybWFuY2UnLFxuICAgICAgUHJvcGVydGllczoge30sXG4gICAgICBMb2dpY2FsSWQ6ICdQZXJmb3JtYW5jZVRlc3RSZXNvdXJjZSdcbiAgICB9O1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgTWV0cmljc0dlbmVyYXRpb25Nb25pdG9yLm1lYXN1cmVHZW5lcmF0aW9uUGVyZm9ybWFuY2UocGVyZm9ybWFuY2VHZW5lcmF0b3IsIHRlc3RSZXNvdXJjZSk7XG4gICAgXG4gICAgZXhwZWN0KHJlc3VsdC5tZXRyaWNzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgZXhwZWN0KHJlc3VsdC5zdGF0cy5nZW5lcmF0aW9uVGltZU1zKS50b0JlTGVzc1RoYW4oMTAwMCk7IC8vIDHnp5Lku6XlhoVcbiAgICBleHBlY3QocmVzdWx0LnBlcmZvcm1hbmNlR3JhZGUpLm5vdC50b0JlKCdGJyk7IC8vIOimgeS7tumBlOaIkFxuICB9KTtcblxuICAvLyDjg6Hjg6Ljg6rlirnnjofjg4bjgrnjg4jvvIhHUkVFTuautemajjog44Oq44O844Kv44Gq44GX56K66KqN77yJXG4gIGl0KCdzaG91bGQgZ2VuZXJhdGUgbWV0cmljcyB3aXRob3V0IG1lbW9yeSBsZWFrcycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBwZXJmb3JtYW5jZUdlbmVyYXRvciA9IG5ldyBQZXJmb3JtYW5jZVRlc3RHZW5lcmF0b3IoKTtcbiAgICBjb25zdCB0ZXN0UmVzb3VyY2UgPSB7XG4gICAgICBUeXBlOiAnQVdTOjpUZXN0OjpQZXJmb3JtYW5jZScsXG4gICAgICBQcm9wZXJ0aWVzOiB7fSxcbiAgICAgIExvZ2ljYWxJZDogJ01lbW9yeVRlc3RSZXNvdXJjZSdcbiAgICB9O1xuXG4gICAgY29uc3QgbWVtb3J5QmVmb3JlID0gcHJvY2Vzcy5tZW1vcnlVc2FnZSgpLmhlYXBVc2VkO1xuICAgIFxuICAgIC8vIDEwMOWbnueUn+aIkFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyBpKyspIHtcbiAgICAgIGF3YWl0IHBlcmZvcm1hbmNlR2VuZXJhdG9yLmdlbmVyYXRlKHRlc3RSZXNvdXJjZSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IG1lbW9yeUFmdGVyID0gcHJvY2Vzcy5tZW1vcnlVc2FnZSgpLmhlYXBVc2VkO1xuICAgIGNvbnN0IG1lbW9yeURlbHRhID0gKG1lbW9yeUFmdGVyIC0gbWVtb3J5QmVmb3JlKSAvIDEwMjQgLyAxMDI0O1xuICAgIFxuICAgIGV4cGVjdChtZW1vcnlEZWx0YSkudG9CZUxlc3NUaGFuKDUpOyAvLyDjg6Hjg6Ljg6rlopfliqA1TULku6XkuItcbiAgfSk7XG5cbiAgLy8g5Lim6KGM55Sf5oiQ44OG44K544OI77yIR1JFRU7mrrXpmo46IOWQjOacn+WuieWFqOaAp+eiuuiqje+8iVxuICBpdCgnc2hvdWxkIHN1cHBvcnQgY29uY3VycmVudCBtZXRyaWMgZ2VuZXJhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBwZXJmb3JtYW5jZUdlbmVyYXRvciA9IG5ldyBQZXJmb3JtYW5jZVRlc3RHZW5lcmF0b3IoKTtcbiAgICBjb25zdCB0ZXN0UmVzb3VyY2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAgfSwgKF8sIGkpID0+ICh7XG4gICAgICBUeXBlOiAnQVdTOjpUZXN0OjpQZXJmb3JtYW5jZScsXG4gICAgICBQcm9wZXJ0aWVzOiB7fSxcbiAgICAgIExvZ2ljYWxJZDogYENvbmN1cnJlbnRUZXN0UmVzb3VyY2Uke2l9YFxuICAgIH0pKTtcblxuICAgIC8vIOS4puihjOeUn+aIkFxuICAgIGNvbnN0IHByb21pc2VzID0gdGVzdFJlc291cmNlcy5tYXAocmVzb3VyY2UgPT4gXG4gICAgICBwZXJmb3JtYW5jZUdlbmVyYXRvci5nZW5lcmF0ZShyZXNvdXJjZSlcbiAgICApO1xuXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICBcbiAgICAvLyDlhajjgabmiJDlip/jgZfjgIHkuIDosqvjgZfjgZ/ntZDmnpxcbiAgICBleHBlY3QocmVzdWx0cykudG9IYXZlTGVuZ3RoKDEwKTtcbiAgICByZXN1bHRzLmZvckVhY2gobWV0cmljcyA9PiB7XG4gICAgICBleHBlY3QobWV0cmljcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KG1ldHJpY3NbMF0ubWV0cmljX25hbWUpLnRvQmUoJ0Zhc3RNZXRyaWMnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8g44OR44OV44Kp44O844Oe44Oz44K555uj6KaW44OG44K544OI77yIR1JFRU7mrrXpmo46IOebo+imluapn+iDveeiuuiqje+8iVxuICBpdCgnc2hvdWxkIHByb3ZpZGUgcGVyZm9ybWFuY2UgbW9uaXRvcmluZycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IE1ldHJpY3NHZW5lcmF0aW9uTW9uaXRvciB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vc3JjL2dlbmVyYXRvcnMvYmFzZS5nZW5lcmF0b3InKTtcbiAgICBjb25zdCBwZXJmb3JtYW5jZUdlbmVyYXRvciA9IG5ldyBQZXJmb3JtYW5jZVRlc3RHZW5lcmF0b3IoKTtcbiAgICBcbiAgICBjb25zdCB0ZXN0UmVzb3VyY2UgPSB7XG4gICAgICBUeXBlOiAnQVdTOjpUZXN0OjpQZXJmb3JtYW5jZScsXG4gICAgICBQcm9wZXJ0aWVzOiB7fSxcbiAgICAgIExvZ2ljYWxJZDogJ01vbml0b3JpbmdUZXN0UmVzb3VyY2UnXG4gICAgfTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IE1ldHJpY3NHZW5lcmF0aW9uTW9uaXRvci5tZWFzdXJlR2VuZXJhdGlvblBlcmZvcm1hbmNlKHBlcmZvcm1hbmNlR2VuZXJhdG9yLCB0ZXN0UmVzb3VyY2UpO1xuICAgIFxuICAgIC8vIOe1seioiOaDheWgseeiuuiqjVxuICAgIGV4cGVjdChyZXN1bHQuc3RhdHMucmVzb3VyY2VUeXBlKS50b0JlKCdBV1M6OlRlc3Q6OlBlcmZvcm1hbmNlJyk7XG4gICAgZXhwZWN0KHJlc3VsdC5zdGF0cy5tZXRyaWNzR2VuZXJhdGVkKS50b0JlKDEpO1xuICAgIGV4cGVjdChyZXN1bHQuc3RhdHMuZ2VuZXJhdGlvblRpbWVNcykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICBleHBlY3QocmVzdWx0LnN0YXRzLmF2ZXJhZ2VUaHJlc2hvbGRXYXJuaW5nKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgZXhwZWN0KHJlc3VsdC5zdGF0cy5hdmVyYWdlVGhyZXNob2xkQ3JpdGljYWwpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICBcbiAgICAvLyDjg5Hjg5Xjgqnjg7zjg57jg7PjgrnoqZXkvqFcbiAgICBleHBlY3QoWydBJywgJ0InLCAnQycsICdGJ10pLnRvQ29udGFpbihyZXN1bHQucGVyZm9ybWFuY2VHcmFkZSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdCYXNlTWV0cmljc0dlbmVyYXRvcuWei+WuieWFqOaAp++8iENMQVVERS5tZDogVHlwZS1Ecml2ZW4gRGV2ZWxvcG1lbnTvvIknLCAoKSA9PiB7XG4gIFxuICAvLyDjg4bjgrnjg4jnlKjlnovlronlhajjgrjjgqfjg43jg6zjg7zjgr9cbiAgY2xhc3MgVHlwZVNhZmVUZXN0R2VuZXJhdG9yIGV4dGVuZHMgKHJlcXVpcmUoJy4uLy4uLy4uL3NyYy9nZW5lcmF0b3JzL2Jhc2UuZ2VuZXJhdG9yJykuQmFzZU1ldHJpY3NHZW5lcmF0b3IpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgIGNvbnN0IHsgY3JlYXRlTG9nZ2VyIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvdXRpbHMvbG9nZ2VyJyk7XG4gICAgICBzdXBlcihjcmVhdGVMb2dnZXIoJ2Vycm9yJykpO1xuICAgIH1cblxuICAgIGdldFN1cHBvcnRlZFR5cGVzKCk6IHN0cmluZ1tdIHtcbiAgICAgIHJldHVybiBbJ0FXUzo6VGVzdDo6VHlwZVNhZmUnXTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0TWV0cmljc0NvbmZpZygpIHtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnVHlwZVNhZmVNZXRyaWMnLFxuICAgICAgICAgIG5hbWVzcGFjZTogJ0FXUy9UZXN0JyxcbiAgICAgICAgICB1bml0OiAnQ291bnQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVHlwZSBzYWZldHkgdGVzdCBtZXRyaWMnLFxuICAgICAgICAgIHN0YXRpc3RpYzogJ0F2ZXJhZ2UnIGFzIGNvbnN0LFxuICAgICAgICAgIGV2YWx1YXRpb25QZXJpb2Q6IDMwMCBhcyBjb25zdCxcbiAgICAgICAgICBjYXRlZ29yeTogJ1BlcmZvcm1hbmNlJyBhcyBjb25zdCxcbiAgICAgICAgICBpbXBvcnRhbmNlOiAnSGlnaCcgYXMgY29uc3QsXG4gICAgICAgICAgdGhyZXNob2xkOiB7IGJhc2U6IDUwLCB3YXJuaW5nTXVsdGlwbGllcjogMS4wLCBjcml0aWNhbE11bHRpcGxpZXI6IDIuMCB9XG4gICAgICAgIH1cbiAgICAgIF07XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldFJlc291cmNlU2NhbGUoKSB7XG4gICAgICByZXR1cm4gMS4wO1xuICAgIH1cbiAgfVxuXG4gIC8vIENsb3VkRm9ybWF0aW9uUmVzb3VyY2XlnovntbHlkIjjg4bjgrnjg4jvvIhHUkVFTuautemajjog5Z6L5Yem55CG56K66KqN77yJXG4gIGl0KCdzaG91bGQgd29yayB3aXRoIENsb3VkRm9ybWF0aW9uUmVzb3VyY2UgdHlwZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdHlwZVNhZmVHZW5lcmF0b3IgPSBuZXcgVHlwZVNhZmVUZXN0R2VuZXJhdG9yKCk7XG4gICAgY29uc3QgY2xvdWRGb3JtYXRpb25SZXNvdXJjZSA9IHtcbiAgICAgIFR5cGU6ICdBV1M6OlRlc3Q6OlR5cGVTYWZlJyxcbiAgICAgIFByb3BlcnRpZXM6IHsgXG4gICAgICAgIFRlc3RQcm9wZXJ0eTogJ3Rlc3QtdmFsdWUnLFxuICAgICAgICBOdW1lcmljUHJvcGVydHk6IDQyXG4gICAgICB9LFxuICAgICAgTG9naWNhbElkOiAnVHlwZVNhZmVUZXN0UmVzb3VyY2UnLFxuICAgICAgQ29uZGl0aW9uOiAnVGVzdENvbmRpdGlvbicsXG4gICAgICBEZXBlbmRzT246IFsnT3RoZXJSZXNvdXJjZSddXG4gICAgfTtcblxuICAgIGNvbnN0IG1ldHJpY3MgPSBhd2FpdCB0eXBlU2FmZUdlbmVyYXRvci5nZW5lcmF0ZShjbG91ZEZvcm1hdGlvblJlc291cmNlKTtcbiAgICBcbiAgICBleHBlY3QobWV0cmljcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgIGV4cGVjdChtZXRyaWNzWzBdLm1ldHJpY19uYW1lKS50b0JlKCdUeXBlU2FmZU1ldHJpYycpO1xuICB9KTtcblxuICAvLyBNZXRyaWNEZWZpbml0aW9u5Z6L55Sf5oiQ44OG44K544OI77yIR1JFRU7mrrXpmo46IOWei+a6luaLoOeiuuiqje+8iVxuICBpdCgnc2hvdWxkIGdlbmVyYXRlIHR5cGUtc2FmZSBNZXRyaWNEZWZpbml0aW9uIG9iamVjdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdHlwZVNhZmVHZW5lcmF0b3IgPSBuZXcgVHlwZVNhZmVUZXN0R2VuZXJhdG9yKCk7XG4gICAgY29uc3QgdGVzdFJlc291cmNlID0ge1xuICAgICAgVHlwZTogJ0FXUzo6VGVzdDo6VHlwZVNhZmUnLFxuICAgICAgUHJvcGVydGllczoge30sXG4gICAgICBMb2dpY2FsSWQ6ICdNZXRyaWNEZWZpbml0aW9uVGVzdFJlc291cmNlJ1xuICAgIH07XG5cbiAgICBjb25zdCBtZXRyaWNzID0gYXdhaXQgdHlwZVNhZmVHZW5lcmF0b3IuZ2VuZXJhdGUodGVzdFJlc291cmNlKTtcbiAgICBjb25zdCBtZXRyaWMgPSBtZXRyaWNzWzBdO1xuICAgIFxuICAgIC8vIE1ldHJpY0RlZmluaXRpb27lnovjga7lhajjg5XjgqPjg7zjg6vjg4nnorroqo1cbiAgICBleHBlY3QodHlwZW9mIG1ldHJpYy5tZXRyaWNfbmFtZSkudG9CZSgnc3RyaW5nJyk7XG4gICAgZXhwZWN0KHR5cGVvZiBtZXRyaWMubmFtZXNwYWNlKS50b0JlKCdzdHJpbmcnKTtcbiAgICBleHBlY3QodHlwZW9mIG1ldHJpYy51bml0KS50b0JlKCdzdHJpbmcnKTtcbiAgICBleHBlY3QodHlwZW9mIG1ldHJpYy5kZXNjcmlwdGlvbikudG9CZSgnc3RyaW5nJyk7XG4gICAgZXhwZWN0KHR5cGVvZiBtZXRyaWMuc3RhdGlzdGljKS50b0JlKCdzdHJpbmcnKTtcbiAgICBleHBlY3QodHlwZW9mIG1ldHJpYy5ldmFsdWF0aW9uX3BlcmlvZCkudG9CZSgnbnVtYmVyJyk7XG4gICAgZXhwZWN0KHR5cGVvZiBtZXRyaWMuY2F0ZWdvcnkpLnRvQmUoJ3N0cmluZycpO1xuICAgIGV4cGVjdCh0eXBlb2YgbWV0cmljLmltcG9ydGFuY2UpLnRvQmUoJ3N0cmluZycpO1xuICAgIFxuICAgIC8vIOOBl+OBjeOBhOWApOOCquODluOCuOOCp+OCr+ODiOOBruWei+WuieWFqOaAp1xuICAgIGV4cGVjdCh0eXBlb2YgbWV0cmljLnJlY29tbWVuZGVkX3RocmVzaG9sZC53YXJuaW5nKS50b0JlKCdudW1iZXInKTtcbiAgICBleHBlY3QodHlwZW9mIG1ldHJpYy5yZWNvbW1lbmRlZF90aHJlc2hvbGQuY3JpdGljYWwpLnRvQmUoJ251bWJlcicpO1xuICAgIFxuICAgIC8vIOODh+OCo+ODoeODs+OCt+ODp+ODs+mFjeWIl+OBruWei+WuieWFqOaAp1xuICAgIGV4cGVjdChBcnJheS5pc0FycmF5KG1ldHJpYy5kaW1lbnNpb25zKSkudG9CZSh0cnVlKTtcbiAgICBpZiAobWV0cmljLmRpbWVuc2lvbnMgJiYgbWV0cmljLmRpbWVuc2lvbnMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgZGltZW5zaW9uID0gbWV0cmljLmRpbWVuc2lvbnNbMF07XG4gICAgICBleHBlY3QodHlwZW9mIGRpbWVuc2lvbi5uYW1lKS50b0JlKCdzdHJpbmcnKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgZGltZW5zaW9uLnZhbHVlKS50b0JlKCdzdHJpbmcnKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIE1ldHJpY0NvbmZpZ+Wei+WHpueQhuODhuOCueODiO+8iEdSRUVO5q616ZqOOiDoqK3lrprlnovlronlhajmgKfnorroqo3vvIlcbiAgaXQoJ3Nob3VsZCBwcm9jZXNzIE1ldHJpY0NvbmZpZyB0eXBlcyBzYWZlbHknLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdHlwZVNhZmVHZW5lcmF0b3IgPSBuZXcgVHlwZVNhZmVUZXN0R2VuZXJhdG9yKCk7XG4gICAgY29uc3QgdGVzdFJlc291cmNlID0ge1xuICAgICAgVHlwZTogJ0FXUzo6VGVzdDo6VHlwZVNhZmUnLFxuICAgICAgUHJvcGVydGllczoge30sXG4gICAgICBMb2dpY2FsSWQ6ICdNZXRyaWNDb25maWdUZXN0UmVzb3VyY2UnXG4gICAgfTtcblxuICAgIC8vIE1ldHJpY0NvbmZpZ+Wei+OBruWHpueQhuOBjOWei+WuieWFqOOBp+OBguOCi+OBk+OBqOOCkueiuuiqjVxuICAgIGNvbnN0IG1ldHJpY3MgPSBhd2FpdCB0eXBlU2FmZUdlbmVyYXRvci5nZW5lcmF0ZSh0ZXN0UmVzb3VyY2UpO1xuICAgIGV4cGVjdChtZXRyaWNzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgXG4gICAgY29uc3QgbWV0cmljID0gbWV0cmljc1swXTtcbiAgICBcbiAgICAvLyBNZXRyaWNDb25maWfihpJNZXRyaWNEZWZpbml0aW9u5aSJ5o+b44Gu5Z6L5a6J5YWo5oCnXG4gICAgZXhwZWN0KG1ldHJpYy5tZXRyaWNfbmFtZSkudG9CZSgnVHlwZVNhZmVNZXRyaWMnKTtcbiAgICBleHBlY3QobWV0cmljLm5hbWVzcGFjZSkudG9CZSgnQVdTL1Rlc3QnKTtcbiAgICBleHBlY3QobWV0cmljLnVuaXQpLnRvQmUoJ0NvdW50Jyk7XG4gICAgZXhwZWN0KG1ldHJpYy5zdGF0aXN0aWMpLnRvQmUoJ0F2ZXJhZ2UnKTtcbiAgICBleHBlY3QobWV0cmljLmNhdGVnb3J5KS50b0JlKCdQZXJmb3JtYW5jZScpO1xuICAgIGV4cGVjdChtZXRyaWMuaW1wb3J0YW5jZSkudG9CZSgnSGlnaCcpO1xuICB9KTtcblxuICAvLyDlnovlronlhajjgapHZW5lcmljc+S9v+eUqOODhuOCueODiO+8iEdSRUVO5q616ZqOOiDjgrjjgqfjg43jg6rjg4Pjgq/norroqo3vvIlcbiAgaXQoJ3Nob3VsZCB1dGlsaXplIHR5cGUtc2FmZSBnZW5lcmljcyBwcm9wZXJseScsICgpID0+IHtcbiAgICBjb25zdCB7IHZhbGlkYXRlTWV0cmljRGVmaW5pdGlvbiB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vc3JjL2dlbmVyYXRvcnMvYmFzZS5nZW5lcmF0b3InKTtcbiAgICBcbiAgICAvLyDlnovlronlhajjgarjg6Hjg4jjg6rjgq/jgrnmpJzoqLzplqLmlbBcbiAgICBjb25zdCB2YWxpZE1ldHJpYyA9IHtcbiAgICAgIG1ldHJpY19uYW1lOiAnVGVzdE1ldHJpYycsXG4gICAgICBuYW1lc3BhY2U6ICdBV1MvVGVzdCcsXG4gICAgICB1bml0OiAnQ291bnQnLFxuICAgICAgZGVzY3JpcHRpb246ICdWYWxpZCBtZXRyaWMnLFxuICAgICAgc3RhdGlzdGljOiAnQXZlcmFnZScgYXMgY29uc3QsXG4gICAgICByZWNvbW1lbmRlZF90aHJlc2hvbGQ6IHsgd2FybmluZzogNTAsIGNyaXRpY2FsOiAxMDAgfSxcbiAgICAgIGV2YWx1YXRpb25fcGVyaW9kOiAzMDAgYXMgY29uc3QsXG4gICAgICBjYXRlZ29yeTogJ1BlcmZvcm1hbmNlJyBhcyBjb25zdCxcbiAgICAgIGltcG9ydGFuY2U6ICdIaWdoJyBhcyBjb25zdFxuICAgIH07XG5cbiAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZU1ldHJpY0RlZmluaXRpb24odmFsaWRNZXRyaWMpO1xuICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QocmVzdWx0LmVycm9ycykudG9IYXZlTGVuZ3RoKDApO1xuICB9KTtcblxuICAvLyDmnaHku7bku5jjgY3jg6Hjg4jjg6rjgq/jgrnlnovlronlhajmgKfjg4bjgrnjg4jvvIhHUkVFTuautemajjog5p2h5Lu26Zai5pWw5Z6L56K66KqN77yJXG4gIGl0KCdzaG91bGQgaGFuZGxlIGFwcGxpY2FibGVXaGVuIGZ1bmN0aW9ucyB0eXBlLXNhZmVseScsIGFzeW5jICgpID0+IHtcbiAgICAvLyBhcHBsaWNhYmxlV2hlbumWouaVsOOBruWei+WuieWFqOaAp+OCkueiuuiqjVxuICAgIGNsYXNzIENvbmRpdGlvbmFsVHlwZVNhZmVHZW5lcmF0b3IgZXh0ZW5kcyBUeXBlU2FmZVRlc3RHZW5lcmF0b3Ige1xuICAgICAgcHJvdGVjdGVkIGdldE1ldHJpY3NDb25maWcoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0NvbmRpdGlvbmFsVHlwZVNhZmVNZXRyaWMnLFxuICAgICAgICAgICAgbmFtZXNwYWNlOiAnQVdTL1Rlc3QnLFxuICAgICAgICAgICAgdW5pdDogJ0NvdW50JyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ29uZGl0aW9uYWwgdHlwZSBzYWZlIG1ldHJpYycsXG4gICAgICAgICAgICBzdGF0aXN0aWM6ICdBdmVyYWdlJyBhcyBjb25zdCxcbiAgICAgICAgICAgIGV2YWx1YXRpb25QZXJpb2Q6IDMwMCBhcyBjb25zdCxcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnUGVyZm9ybWFuY2UnIGFzIGNvbnN0LFxuICAgICAgICAgICAgaW1wb3J0YW5jZTogJ0hpZ2gnIGFzIGNvbnN0LFxuICAgICAgICAgICAgdGhyZXNob2xkOiB7IGJhc2U6IDEwMCwgd2FybmluZ011bHRpcGxpZXI6IDEuMCwgY3JpdGljYWxNdWx0aXBsaWVyOiAyLjAgfSxcbiAgICAgICAgICAgIGFwcGxpY2FibGVXaGVuOiAocmVzb3VyY2UpID0+IHtcbiAgICAgICAgICAgICAgLy8g5Z6L5a6J5YWo44Gq5p2h5Lu25Yik5a6aXG4gICAgICAgICAgICAgIHJldHVybiByZXNvdXJjZS5UeXBlID09PSAnQVdTOjpUZXN0OjpUeXBlU2FmZScgJiYgXG4gICAgICAgICAgICAgICAgICAgICAhIXJlc291cmNlLkxvZ2ljYWxJZCAmJlxuICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2UuTG9naWNhbElkLnN0YXJ0c1dpdGgoJ0NvbmRpdGlvbmFsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICBdO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNvbmRpdGlvbmFsR2VuZXJhdG9yID0gbmV3IENvbmRpdGlvbmFsVHlwZVNhZmVHZW5lcmF0b3IoKTtcbiAgICBjb25zdCB0ZXN0UmVzb3VyY2UgPSB7XG4gICAgICBUeXBlOiAnQVdTOjpUZXN0OjpUeXBlU2FmZScsXG4gICAgICBQcm9wZXJ0aWVzOiB7fSxcbiAgICAgIExvZ2ljYWxJZDogJ0NvbmRpdGlvbmFsVHlwZVJlc291cmNlJ1xuICAgIH07XG5cbiAgICBjb25zdCBtZXRyaWNzID0gYXdhaXQgY29uZGl0aW9uYWxHZW5lcmF0b3IuZ2VuZXJhdGUodGVzdFJlc291cmNlKTtcbiAgICBleHBlY3QobWV0cmljcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgIGV4cGVjdChtZXRyaWNzWzBdLm1ldHJpY19uYW1lKS50b0JlKCdDb25kaXRpb25hbFR5cGVTYWZlTWV0cmljJyk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdCYXNlTWV0cmljc0dlbmVyYXRvclNPTElE5Y6f5YmH77yIQ0xBVURFLm1kOiDoqK3oqIjljp/liYfvvIknLCAoKSA9PiB7XG5cbiAgLy8g5Y2Y5LiA6LKs5Lu75Y6f5YmH44OG44K544OI77yIR1JFRU7mrrXpmo46IFNSUOeiuuiqje+8iVxuICBpdCgnc2hvdWxkIGZvbGxvdyBTaW5nbGUgUmVzcG9uc2liaWxpdHkgUHJpbmNpcGxlJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgQmFzZU1ldHJpY3NHZW5lcmF0b3IgfSA9IHJlcXVpcmUoJy4uLy4uLy4uL3NyYy9nZW5lcmF0b3JzL2Jhc2UuZ2VuZXJhdG9yJyk7XG4gICAgXG4gICAgLy8gQmFzZU1ldHJpY3NHZW5lcmF0b3Ljga7osqzku7vvvJrjg6Hjg4jjg6rjgq/jgrnnlJ/miJDjga7jgb9cbiAgICBjb25zdCBwcm90b3R5cGUgPSBCYXNlTWV0cmljc0dlbmVyYXRvci5wcm90b3R5cGU7XG4gICAgZXhwZWN0KHByb3RvdHlwZS5nZW5lcmF0ZSkudG9CZURlZmluZWQoKTtcbiAgICBcbiAgICAvLyDjg6Hjg4jjg6rjgq/jgrnnlJ/miJDku6XlpJbjga7osqzku7vjgYzjgarjgYTjgZPjgajjgpLnorroqo1cbiAgICAvLyDvvIjjg5XjgqHjgqTjg6tJL0/jgIHjg43jg4Pjg4jjg6/jg7zjgq/nrYnjga7osqzku7vjga/mjIHjgZ/jgarjgYTvvIlcbiAgICBjb25zdCBtZXRob2RzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocHJvdG90eXBlKTtcbiAgICBjb25zdCBwdWJsaWNNZXRob2RzID0gbWV0aG9kcy5maWx0ZXIobmFtZSA9PiBcbiAgICAgICFuYW1lLnN0YXJ0c1dpdGgoJ18nKSAmJiBcbiAgICAgIG5hbWUgIT09ICdjb25zdHJ1Y3RvcicgJiZcbiAgICAgIHR5cGVvZiBwcm90b3R5cGVbbmFtZV0gPT09ICdmdW5jdGlvbidcbiAgICApO1xuICAgIFxuICAgIGV4cGVjdChwdWJsaWNNZXRob2RzKS50b0NvbnRhaW4oJ2dlbmVyYXRlJyk7XG4gICAgY29uc29sZS5sb2coJ/Cfk4sgQmFzZU1ldHJpY3NHZW5lcmF0b3IgcHVibGljIG1ldGhvZHM6JywgcHVibGljTWV0aG9kcyk7XG4gIH0pO1xuXG4gIC8vIOmWi+aUvumWiemOluWOn+WJh+ODhuOCueODiO+8iEdSRUVO5q616ZqOOiBPQ1Dnorroqo3vvIlcbiAgaXQoJ3Nob3VsZCBmb2xsb3cgT3Blbi9DbG9zZWQgUHJpbmNpcGxlJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgQmFzZU1ldHJpY3NHZW5lcmF0b3IgfSA9IHJlcXVpcmUoJy4uLy4uLy4uL3NyYy9nZW5lcmF0b3JzL2Jhc2UuZ2VuZXJhdG9yJyk7XG4gICAgXG4gICAgLy8g5ouh5by144Gu44Gf44KB44Gr6ZaL44GL44KM44Gm44GE44KL77yI5oq96LGh44Oh44K944OD44OJ5a2Y5Zyo77yJXG4gICAgLy8g5aSJ5pu044Gu44Gf44KB44Gr6ZaJ44GW44GV44KM44Gm44GE44KL77yI5YW36LGh5a6f6KOF77yJXG4gICAgXG4gICAgLy8g5oq96LGh44Kv44Op44K544Go44GX44Gm5ouh5by15Y+v6IO9XG4gICAgY2xhc3MgRXh0ZW5kZWRUZXN0R2VuZXJhdG9yIGV4dGVuZHMgQmFzZU1ldHJpY3NHZW5lcmF0b3Ige1xuICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGNvbnN0IHsgY3JlYXRlTG9nZ2VyIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvdXRpbHMvbG9nZ2VyJyk7XG4gICAgICAgIHN1cGVyKGNyZWF0ZUxvZ2dlcignZXJyb3InKSk7XG4gICAgICB9XG5cbiAgICAgIGdldFN1cHBvcnRlZFR5cGVzKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIFsnQVdTOjpFeHRlbmRlZDo6UmVzb3VyY2UnXTtcbiAgICAgIH1cblxuICAgICAgcHJvdGVjdGVkIGdldE1ldHJpY3NDb25maWcoKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgcHJvdGVjdGVkIGdldFJlc291cmNlU2NhbGUoKSB7XG4gICAgICAgIHJldHVybiAxLjA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZXh0ZW5kZWRHZW5lcmF0b3IgPSBuZXcgRXh0ZW5kZWRUZXN0R2VuZXJhdG9yKCk7XG4gICAgZXhwZWN0KGV4dGVuZGVkR2VuZXJhdG9yKS50b0JlSW5zdGFuY2VPZihCYXNlTWV0cmljc0dlbmVyYXRvcik7XG4gICAgZXhwZWN0KGV4dGVuZGVkR2VuZXJhdG9yLmdldFN1cHBvcnRlZFR5cGVzKCkpLnRvQ29udGFpbignQVdTOjpFeHRlbmRlZDo6UmVzb3VyY2UnKTtcbiAgfSk7XG5cbiAgLy8g44Kk44Oz44K/44O844OV44Kn44O844K55YiG6Zui44OG44K544OI77yIR1JFRU7mrrXpmo46IElTUOeiuuiqje+8iVxuICBpdCgnc2hvdWxkIGZvbGxvdyBJbnRlcmZhY2UgU2VncmVnYXRpb24gUHJpbmNpcGxlJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgQmFzZU1ldHJpY3NHZW5lcmF0b3IgfSA9IHJlcXVpcmUoJy4uLy4uLy4uL3NyYy9nZW5lcmF0b3JzL2Jhc2UuZ2VuZXJhdG9yJyk7XG4gICAgXG4gICAgLy8gSU1ldHJpY3NHZW5lcmF0b3LjgqTjg7Pjgr/jg7zjg5Xjgqfjg7zjgrnjga7jgb/lrp/oo4VcbiAgICAvLyDku5bjga7kuI3opoHjgarjgqTjg7Pjgr/jg7zjg5Xjgqfjg7zjgrnjga/lrp/oo4XjgZfjgabjgYTjgarjgYRcbiAgICBleHBlY3QoQmFzZU1ldHJpY3NHZW5lcmF0b3IucHJvdG90eXBlLmdlbmVyYXRlKS50b0JlRGVmaW5lZCgpO1xuICAgIFxuICAgIC8vIOODoeODiOODquOCr+OCueeUn+aIkOOBq+eJueWMluOBl+OBn+OCpOODs+OCv+ODvOODleOCp+ODvOOCuVxuICAgIGV4cGVjdChCYXNlTWV0cmljc0dlbmVyYXRvci5wcm90b3R5cGUuZ2V0U3VwcG9ydGVkVHlwZXMpLnRvQmVVbmRlZmluZWQoKTsgLy8g5oq96LGh44Oh44K944OD44OJXG4gIH0pO1xuXG4gIC8vIOS+neWtmOmWouS/gumAhui7ouODhuOCueODiO+8iEdSRUVO5q616ZqOOiBESVDnorroqo3vvIlcbiAgaXQoJ3Nob3VsZCBmb2xsb3cgRGVwZW5kZW5jeSBJbnZlcnNpb24gUHJpbmNpcGxlJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgQmFzZU1ldHJpY3NHZW5lcmF0b3IgfSA9IHJlcXVpcmUoJy4uLy4uLy4uL3NyYy9nZW5lcmF0b3JzL2Jhc2UuZ2VuZXJhdG9yJyk7XG4gICAgXG4gICAgLy8gSUxvZ2dlcuOCpOODs+OCv+ODvOODleOCp+ODvOOCueOBq+S+neWtmO+8iOWFt+ixoeOCr+ODqeOCueOBq+mdnuS+neWtmO+8iVxuICAgIGNsYXNzIERJUFRlc3RHZW5lcmF0b3IgZXh0ZW5kcyBCYXNlTWV0cmljc0dlbmVyYXRvciB7XG4gICAgICBjb25zdHJ1Y3RvcihjdXN0b21Mb2dnZXI6IGFueSkgeyAvLyDjgqvjgrnjgr/jg6Djg63jgrDlrp/oo4Xlj5fjgZHlhaXjgoxcbiAgICAgICAgc3VwZXIoY3VzdG9tTG9nZ2VyKTtcbiAgICAgIH1cblxuICAgICAgZ2V0U3VwcG9ydGVkVHlwZXMoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gWydBV1M6OkRJUDo6VGVzdCddO1xuICAgICAgfVxuXG4gICAgICBwcm90ZWN0ZWQgZ2V0TWV0cmljc0NvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuXG4gICAgICBwcm90ZWN0ZWQgZ2V0UmVzb3VyY2VTY2FsZSgpIHtcbiAgICAgICAgcmV0dXJuIDEuMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDjg6Ljg4Pjgq9Mb2dnZXLjgafjgoLjgqTjg7Pjgrnjgr/jg7PjgrnljJblj6/og73vvIjmir3osaHljJbjgavkvp3lrZjvvIlcbiAgICBjb25zdCBtb2NrTG9nZ2VyID0ge1xuICAgICAgZGVidWc6IGplc3QuZm4oKSxcbiAgICAgIGluZm86IGplc3QuZm4oKSwgXG4gICAgICB3YXJuOiBqZXN0LmZuKCksXG4gICAgICBlcnJvcjogamVzdC5mbigpLFxuICAgICAgc3VjY2VzczogamVzdC5mbigpXG4gICAgfTtcblxuICAgIGNvbnN0IGRpcEdlbmVyYXRvciA9IG5ldyBESVBUZXN0R2VuZXJhdG9yKG1vY2tMb2dnZXIpO1xuICAgIGV4cGVjdChkaXBHZW5lcmF0b3IpLnRvQmVJbnN0YW5jZU9mKEJhc2VNZXRyaWNzR2VuZXJhdG9yKTtcbiAgfSk7XG5cbiAgLy8g44Oq44K544Kz44OV572u5o+b5Y6f5YmH44OG44K544OI77yIR1JFRU7mrrXpmo46IExTUOeiuuiqje+8iVxuICBpdCgnc2hvdWxkIGZvbGxvdyBMaXNrb3YgU3Vic3RpdHV0aW9uIFByaW5jaXBsZScsICgpID0+IHtcbiAgICBjb25zdCB7IEJhc2VNZXRyaWNzR2VuZXJhdG9yIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvZ2VuZXJhdG9ycy9iYXNlLmdlbmVyYXRvcicpO1xuICAgIFxuICAgIC8vIOWtkOOCr+ODqeOCueOBjOWfuuW6leOCr+ODqeOCueOBqOe9ruaPm+WPr+iDveOBp+OBguOCi+OBk+OBqOOCkueiuuiqjVxuICAgIGNsYXNzIExTUFRlc3RHZW5lcmF0b3JBIGV4dGVuZHMgQmFzZU1ldHJpY3NHZW5lcmF0b3Ige1xuICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGNvbnN0IHsgY3JlYXRlTG9nZ2VyIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvdXRpbHMvbG9nZ2VyJyk7XG4gICAgICAgIHN1cGVyKGNyZWF0ZUxvZ2dlcignZXJyb3InKSk7XG4gICAgICB9XG5cbiAgICAgIGdldFN1cHBvcnRlZFR5cGVzKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIFsnQVdTOjpMU1A6OlRlc3RBJ107XG4gICAgICB9XG5cbiAgICAgIHByb3RlY3RlZCBnZXRNZXRyaWNzQ29uZmlnKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdMU1BUZXN0TWV0cmljQScsXG4gICAgICAgICAgICBuYW1lc3BhY2U6ICdBV1MvTFNQJyxcbiAgICAgICAgICAgIHVuaXQ6ICdDb3VudCcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xTUCB0ZXN0IEEnLFxuICAgICAgICAgICAgc3RhdGlzdGljOiAnU3VtJyBhcyBjb25zdCxcbiAgICAgICAgICAgIGV2YWx1YXRpb25QZXJpb2Q6IDMwMCBhcyBjb25zdCxcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnUGVyZm9ybWFuY2UnIGFzIGNvbnN0LFxuICAgICAgICAgICAgaW1wb3J0YW5jZTogJ0hpZ2gnIGFzIGNvbnN0LFxuICAgICAgICAgICAgdGhyZXNob2xkOiB7IGJhc2U6IDEwLCB3YXJuaW5nTXVsdGlwbGllcjogMS4wLCBjcml0aWNhbE11bHRpcGxpZXI6IDIuMCB9XG4gICAgICAgICAgfVxuICAgICAgICBdO1xuICAgICAgfVxuXG4gICAgICBwcm90ZWN0ZWQgZ2V0UmVzb3VyY2VTY2FsZSgpIHtcbiAgICAgICAgcmV0dXJuIDEuMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjbGFzcyBMU1BUZXN0R2VuZXJhdG9yQiBleHRlbmRzIEJhc2VNZXRyaWNzR2VuZXJhdG9yIHtcbiAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBjb25zdCB7IGNyZWF0ZUxvZ2dlciB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vc3JjL3V0aWxzL2xvZ2dlcicpO1xuICAgICAgICBzdXBlcihjcmVhdGVMb2dnZXIoJ2Vycm9yJykpO1xuICAgICAgfVxuXG4gICAgICBnZXRTdXBwb3J0ZWRUeXBlcygpOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiBbJ0FXUzo6TFNQOjpUZXN0QiddO1xuICAgICAgfVxuXG4gICAgICBwcm90ZWN0ZWQgZ2V0TWV0cmljc0NvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnTFNQVGVzdE1ldHJpY0InLFxuICAgICAgICAgICAgbmFtZXNwYWNlOiAnQVdTL0xTUCcsXG4gICAgICAgICAgICB1bml0OiAnUGVyY2VudCcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xTUCB0ZXN0IEInLFxuICAgICAgICAgICAgc3RhdGlzdGljOiAnQXZlcmFnZScgYXMgY29uc3QsXG4gICAgICAgICAgICBldmFsdWF0aW9uUGVyaW9kOiAzMDAgYXMgY29uc3QsXG4gICAgICAgICAgICBjYXRlZ29yeTogJ0Vycm9yJyBhcyBjb25zdCxcbiAgICAgICAgICAgIGltcG9ydGFuY2U6ICdNZWRpdW0nIGFzIGNvbnN0LFxuICAgICAgICAgICAgdGhyZXNob2xkOiB7IGJhc2U6IDUsIHdhcm5pbmdNdWx0aXBsaWVyOiAyLjAsIGNyaXRpY2FsTXVsdGlwbGllcjogNC4wIH1cbiAgICAgICAgICB9XG4gICAgICAgIF07XG4gICAgICB9XG5cbiAgICAgIHByb3RlY3RlZCBnZXRSZXNvdXJjZVNjYWxlKCkge1xuICAgICAgICByZXR1cm4gMi4wO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOS4oeaWueOBruOCuOOCp+ODjeODrOODvOOCv+OBjEJhc2VNZXRyaWNzR2VuZXJhdG9y44Go44GX44Gm5YuV5L2cXG4gICAgY29uc3QgZ2VuZXJhdG9yQSA9IG5ldyBMU1BUZXN0R2VuZXJhdG9yQSgpO1xuICAgIGNvbnN0IGdlbmVyYXRvckIgPSBuZXcgTFNQVGVzdEdlbmVyYXRvckIoKTtcbiAgICBcbiAgICBleHBlY3QoZ2VuZXJhdG9yQSkudG9CZUluc3RhbmNlT2YoQmFzZU1ldHJpY3NHZW5lcmF0b3IpO1xuICAgIGV4cGVjdChnZW5lcmF0b3JCKS50b0JlSW5zdGFuY2VPZihCYXNlTWV0cmljc0dlbmVyYXRvcik7XG4gICAgXG4gICAgLy8g5YWx6YCa44Kk44Oz44K/44O844OV44Kn44O844K544Go44GX44Gm5L2/55So5Y+v6IO9XG4gICAgY29uc3QgZ2VuZXJhdG9yczogQmFzZU1ldHJpY3NHZW5lcmF0b3JbXSA9IFtnZW5lcmF0b3JBLCBnZW5lcmF0b3JCXTtcbiAgICBnZW5lcmF0b3JzLmZvckVhY2goZ2VuZXJhdG9yID0+IHtcbiAgICAgIGV4cGVjdCh0eXBlb2YgZ2VuZXJhdG9yLmdlbmVyYXRlKS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoZ2VuZXJhdG9yLmdldFN1cHBvcnRlZFR5cGVzKCkpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==