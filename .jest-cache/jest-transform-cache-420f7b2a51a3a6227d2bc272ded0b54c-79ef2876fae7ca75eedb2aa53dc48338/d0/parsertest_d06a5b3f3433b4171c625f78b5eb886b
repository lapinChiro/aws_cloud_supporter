a1710ac692c965cf4c21ece2ba4685c9
"use strict";
// CLAUDE.md準拠TemplateParserテスト（GREEN段階: Don't Reinvent the Wheel + Type-Driven）
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const fs_1 = require("fs");
const path_1 = __importDefault(require("path"));
const os_1 = require("os");
// テスト全体で使用する一時ディレクトリ
let tempDir;
// 全テスト前の準備
beforeAll(() => {
    tempDir = path_1.default.join((0, os_1.tmpdir)(), 'aws-cloud-supporter-test');
    try {
        (0, fs_1.mkdirSync)(tempDir, { recursive: true });
    }
    catch {
        // 既に存在する場合は無視
    }
    // テストフィクスチャー作成
    createTestFixtures();
});
function createTestFixtures() {
    // 有効なYAMLテンプレート
    const validYamlTemplate = `
AWSTemplateFormatVersion: '2010-09-09'
Description: 'Test CloudFormation template'
Resources:
  TestDB:
    Type: AWS::RDS::DBInstance
    Properties:
      Engine: mysql
      DBInstanceClass: db.t3.micro
      AllocatedStorage: 20
  TestFunction:
    Type: AWS::Lambda::Function
    Properties:
      Runtime: nodejs20.x
      Handler: index.handler
      Code:
        ZipFile: 'exports.handler = async () => ({ statusCode: 200 });'
`;
    (0, fs_1.writeFileSync)(path_1.default.join(tempDir, 'valid-template.yaml'), validYamlTemplate, 'utf8');
    // 有効なJSONテンプレート
    const validJsonTemplate = {
        "AWSTemplateFormatVersion": "2010-09-09",
        "Description": "Test CloudFormation JSON template",
        "Resources": {
            "TestBucket": {
                "Type": "AWS::S3::Bucket",
                "Properties": {
                    "BucketName": "test-bucket"
                }
            },
            "TestAPI": {
                "Type": "AWS::ApiGateway::RestApi",
                "Properties": {
                    "Name": "test-api"
                }
            }
        }
    };
    (0, fs_1.writeFileSync)(path_1.default.join(tempDir, 'valid-template.json'), JSON.stringify(validJsonTemplate, null, 2), 'utf8');
    // 無効なYAMLテンプレート（構文エラー）
    const invalidYamlTemplate = `
AWSTemplateFormatVersion: '2010-09-09'
Description: 'Invalid YAML template'
Resources:
  TestDB:
    Type: AWS::RDS::DBInstance
    Properties:
      Engine: mysql
      # 不正なインデント
    DBInstanceClass: db.t3.micro
`;
    (0, fs_1.writeFileSync)(path_1.default.join(tempDir, 'invalid-syntax.yaml'), invalidYamlTemplate, 'utf8');
    // 無効なJSONテンプレート（構文エラー）  
    const invalidJsonTemplate = `{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "Invalid JSON template",
  "Resources": {
    "TestBucket": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "BucketName": "test-bucket"
      }
    }, // 不正なカンマ
  }
}`;
    (0, fs_1.writeFileSync)(path_1.default.join(tempDir, 'invalid-syntax.json'), invalidJsonTemplate, 'utf8');
    // 大きなファイル（50MB超）
    const largeTemplate = {
        AWSTemplateFormatVersion: "2010-09-09",
        Description: "Large template for size testing",
        Resources: {}
    };
    // 大量のリソースを生成
    for (let i = 0; i < 10000; i++) {
        largeTemplate.Resources[`Resource${i}`] = {
            Type: "AWS::S3::Bucket",
            Properties: {
                BucketName: `bucket-${i}`,
                Description: `Test bucket number ${i} for large template size testing with long description to increase file size significantly`
            }
        };
    }
    (0, fs_1.writeFileSync)(path_1.default.join(tempDir, 'large-template.json'), JSON.stringify(largeTemplate, null, 2), 'utf8');
}
describe('TemplateParser型安全解析（CLAUDE.md: GREEN段階）', () => {
    // GREEN段階: TemplateParser実装確認
    it('should implement TemplateParser successfully', () => {
        expect(() => {
            require('../../../src/core/parser');
        }).not.toThrow(); // 実装完了で成功
    });
    // YAML解析テスト（GREEN段階: 実装確認）
    it('should parse valid YAML CloudFormation template', async () => {
        const { TemplateParser } = require('../../../src/core/parser');
        const parser = new TemplateParser();
        const yamlPath = path_1.default.join(tempDir, 'valid-template.yaml');
        const template = await parser.parse(yamlPath);
        expect(template).toBeDefined();
        expect(template.AWSTemplateFormatVersion).toBe('2010-09-09');
        expect(template.Resources).toBeDefined();
        expect(template.Resources.TestDB).toBeDefined();
        expect(template.Resources.TestFunction).toBeDefined();
    });
    // JSON解析テスト（GREEN段階: 実装確認）
    it('should parse valid JSON CloudFormation template', async () => {
        const { TemplateParser } = require('../../../src/core/parser');
        const parser = new TemplateParser();
        const jsonPath = path_1.default.join(tempDir, 'valid-template.json');
        const template = await parser.parse(jsonPath);
        expect(template).toBeDefined();
        expect(template.AWSTemplateFormatVersion).toBe('2010-09-09');
        expect(template.Resources).toBeDefined();
        expect(template.Resources.TestBucket).toBeDefined();
        expect(template.Resources.TestAPI).toBeDefined();
    });
    // ファイル存在エラーテスト（CloudSupporterError統合）
    it('should handle file not found error', async () => {
        const { TemplateParser } = require('../../../src/core/parser');
        const { isFileError } = require('../../../src/utils/error');
        const parser = new TemplateParser();
        const nonExistentPath = path_1.default.join(tempDir, 'non-existent.yaml');
        await expect(parser.parse(nonExistentPath)).rejects.toThrow();
        try {
            await parser.parse(nonExistentPath);
        }
        catch (error) {
            expect(isFileError(error)).toBe(true);
            expect(error.filePath).toBe(nonExistentPath);
        }
    });
    // ファイルサイズ制限テスト（50MB制限）
    it('should reject files larger than 50MB', async () => {
        const { TemplateParser } = require('../../../src/core/parser');
        const { isFileError } = require('../../../src/utils/error');
        const parser = new TemplateParser();
        const largePath = path_1.default.join(tempDir, 'large-template.json');
        await expect(parser.parse(largePath)).rejects.toThrow();
        try {
            await parser.parse(largePath);
        }
        catch (error) {
            expect(isFileError(error)).toBe(true);
            expect(error.message).toContain('too large');
            expect(error.details?.fileSize).toBeGreaterThan(50 * 1024 * 1024);
        }
    });
    // 読み込み時間制限テスト（5秒制限、モック使用）
    it('should timeout file reading after 5 seconds', async () => {
        // 実際の5秒待ちは避けて、モック使用
        const { TemplateParser } = require('../../../src/core/parser');
        const parser = new TemplateParser();
        // 通常サイズのファイルは5秒以内で読み込める想定
        const yamlPath = path_1.default.join(tempDir, 'valid-template.yaml');
        const startTime = performance.now();
        await parser.parse(yamlPath);
        const duration = performance.now() - startTime;
        expect(duration).toBeLessThan(5000);
    });
    // YAML構文エラーハンドリングテスト
    it('should provide detailed YAML syntax error', async () => {
        const { TemplateParser } = require('../../../src/core/parser');
        const { isParseError } = require('../../../src/utils/error');
        const parser = new TemplateParser();
        const invalidYamlPath = path_1.default.join(tempDir, 'invalid-syntax.yaml');
        await expect(parser.parse(invalidYamlPath)).rejects.toThrow();
        try {
            await parser.parse(invalidYamlPath);
        }
        catch (error) {
            expect(isParseError(error)).toBe(true);
            expect(error.message).toContain('YAML syntax error');
        }
    });
    // JSON構文エラーハンドリングテスト
    it('should provide detailed JSON syntax error with position', async () => {
        const { TemplateParser } = require('../../../src/core/parser');
        const { isParseError } = require('../../../src/utils/error');
        const parser = new TemplateParser();
        const invalidJsonPath = path_1.default.join(tempDir, 'invalid-syntax.json');
        await expect(parser.parse(invalidJsonPath)).rejects.toThrow();
        try {
            await parser.parse(invalidJsonPath);
        }
        catch (error) {
            expect(isParseError(error)).toBe(true);
            expect(error.message).toContain('JSON syntax error');
            expect(error.details?.nearText).toBeDefined();
        }
    });
    // CloudFormation構造検証テスト
    it('should validate CloudFormation template structure', async () => {
        const { TemplateParser } = require('../../../src/core/parser');
        const parser = new TemplateParser();
        // 有効なテンプレートの解析
        const validPath = path_1.default.join(tempDir, 'valid-template.yaml');
        const template = await parser.parse(validPath);
        expect(template).toBeValidCloudFormationResource();
        expect(Object.keys(template.Resources)).toHaveLength(2);
    });
    // CLAUDE.md: No any types検証
    it('should not use any types in parser implementation', () => {
        const parserCode = (0, fs_1.readFileSync)(path_1.default.join(__dirname, '../../../src/core/parser.ts'), 'utf8');
        expect(parserCode).toHaveNoAnyTypes();
    });
    // 型安全性テスト（CloudFormationTemplate型）
    it('should return properly typed CloudFormationTemplate', async () => {
        const { TemplateParser } = require('../../../src/core/parser');
        const parser = new TemplateParser();
        const yamlPath = path_1.default.join(tempDir, 'valid-template.yaml');
        const template = await parser.parse(yamlPath);
        // TypeScript型推論により型安全
        expect(typeof template.AWSTemplateFormatVersion).toBe('string');
        expect(typeof template.Description).toBe('string');
        expect(typeof template.Resources).toBe('object');
        // リソースの型安全性
        const testDB = template.Resources.TestDB;
        expect(testDB).toBeDefined();
        expect(testDB.Type).toBe('AWS::RDS::DBInstance');
    });
});
describe('TemplateParserパフォーマンステスト（CLAUDE.md: 性能要件）', () => {
    // パフォーマンス要件テスト（通常ファイルは5秒以内）
    it('should parse normal templates within performance limits', async () => {
        const { TemplateParser } = require('../../../src/core/parser');
        const parser = new TemplateParser();
        const yamlPath = path_1.default.join(tempDir, 'valid-template.yaml');
        const startTime = performance.now();
        const template = await parser.parse(yamlPath);
        const duration = performance.now() - startTime;
        expect(duration).toBeLessThan(1000); // 通常ファイルは1秒以内
        expect(template).toBeDefined();
    });
    // メモリ効率テスト（適切なリソース管理）  
    it('should handle files efficiently without memory leaks', async () => {
        const { TemplateParser } = require('../../../src/core/parser');
        // 複数回の解析でメモリリークがないことを確認
        const parser = new TemplateParser();
        const yamlPath = path_1.default.join(tempDir, 'valid-template.yaml');
        for (let i = 0; i < 10; i++) {
            const template = await parser.parse(yamlPath);
            expect(template.Resources).toBeDefined();
        }
        // メモリ使用量が合理的範囲内
        const memoryUsage = process.memoryUsage().heapUsed / 1024 / 1024;
        expect(memoryUsage).toBeLessThan(100); // 100MB以下
    });
    // 並行解析テスト（型安全性）
    it('should handle concurrent parsing requests safely', async () => {
        const { TemplateParser } = require('../../../src/core/parser');
        const parser = new TemplateParser();
        const yamlPath = path_1.default.join(tempDir, 'valid-template.yaml');
        const jsonPath = path_1.default.join(tempDir, 'valid-template.json');
        // 並行解析
        const promises = [
            parser.parse(yamlPath),
            parser.parse(jsonPath),
            parser.parse(yamlPath),
            parser.parse(jsonPath)
        ];
        const templates = await Promise.all(promises);
        expect(templates).toHaveLength(4);
        templates.forEach(template => {
            expect(template.Resources).toBeDefined();
        });
    });
});
describe('TemplateParserエラーハンドリング統合（CLAUDE.md: 型安全エラー処理）', () => {
    // CloudSupporterErrorシステム統合確認
    it('should integrate with CloudSupporterError system', async () => {
        const { TemplateParser } = require('../../../src/core/parser');
        const { CloudSupporterError, ErrorType } = require('../../../src/utils/error');
        const parser = new TemplateParser();
        const nonExistentPath = '/non/existent/file.yaml';
        try {
            await parser.parse(nonExistentPath);
        }
        catch (error) {
            expect(error).toBeInstanceOf(CloudSupporterError);
            expect(error.type).toBe(ErrorType.FILE_ERROR);
            expect(error.filePath).toBe(nonExistentPath);
            // 構造化出力確認
            const structured = error.toStructuredOutput();
            expect(structured.error).toBe('FILE_ERROR');
            expect(structured.filePath).toBe(nonExistentPath);
            expect(structured.timestamp).toBeDefined();
        }
    });
    // エラー提案メッセージテスト（ユーザビリティ）
    it('should provide helpful error suggestions via CloudSupporterError', async () => {
        const { TemplateParser } = require('../../../src/core/parser');
        const parser = new TemplateParser();
        const invalidJsonPath = path_1.default.join(tempDir, 'invalid-syntax.json');
        try {
            await parser.parse(invalidJsonPath);
        }
        catch (error) {
            // エラーメッセージの有用性確認
            expect(error.message).toContain('syntax error');
            expect(error.details).toBeDefined();
            // ErrorHandlerのgetSuggestionは内部メソッドなので
            // エラータイプが正しいことのみ確認
            expect(error.type).toBe('PARSE_ERROR');
        }
    });
    // 構造化エラー出力テスト（型安全性）
    it('should output structured error information', async () => {
        const { TemplateParser } = require('../../../src/core/parser');
        const parser = new TemplateParser();
        // 空のResourcesセクションでエラー
        const emptyResourcesTemplate = `
AWSTemplateFormatVersion: '2010-09-09'
Resources: {}
`;
        const tempPath = path_1.default.join(tempDir, 'empty-resources.yaml');
        (0, fs_1.writeFileSync)(tempPath, emptyResourcesTemplate, 'utf8');
        try {
            await parser.parse(tempPath);
        }
        catch (error) {
            const structured = error.toStructuredOutput();
            expect(structured.error).toBe('PARSE_ERROR');
            expect(structured.message).toContain('Resources section is empty');
            expect(structured.filePath).toBe(tempPath);
            expect(structured.details?.nearText).toContain('at least one resource');
        }
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUva3lvaGVpL2F3c19jbG91ZF9zdXBwb3J0ZXIvdGVzdHMvdW5pdC9jb3JlL3BhcnNlci50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQSxnRkFBZ0Y7Ozs7O0FBRWhGLDJCQUE0RDtBQUM1RCxnREFBd0I7QUFDeEIsMkJBQTRCO0FBRTVCLHFCQUFxQjtBQUNyQixJQUFJLE9BQWUsQ0FBQztBQUVwQixXQUFXO0FBQ1gsU0FBUyxDQUFDLEdBQUcsRUFBRTtJQUNiLE9BQU8sR0FBRyxjQUFJLENBQUMsSUFBSSxDQUFDLElBQUEsV0FBTSxHQUFFLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztJQUMxRCxJQUFJLENBQUM7UUFDSCxJQUFBLGNBQVMsRUFBQyxPQUFPLEVBQUUsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBQUMsTUFBTSxDQUFDO1FBQ1AsY0FBYztJQUNoQixDQUFDO0lBRUQsZUFBZTtJQUNmLGtCQUFrQixFQUFFLENBQUM7QUFDdkIsQ0FBQyxDQUFDLENBQUM7QUFFSCxTQUFTLGtCQUFrQjtJQUN6QixnQkFBZ0I7SUFDaEIsTUFBTSxpQkFBaUIsR0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FpQjNCLENBQUM7SUFDQSxJQUFBLGtCQUFhLEVBQUMsY0FBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUscUJBQXFCLENBQUMsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUVwRixnQkFBZ0I7SUFDaEIsTUFBTSxpQkFBaUIsR0FBRztRQUN4QiwwQkFBMEIsRUFBRSxZQUFZO1FBQ3hDLGFBQWEsRUFBRSxtQ0FBbUM7UUFDbEQsV0FBVyxFQUFFO1lBQ1gsWUFBWSxFQUFFO2dCQUNaLE1BQU0sRUFBRSxpQkFBaUI7Z0JBQ3pCLFlBQVksRUFBRTtvQkFDWixZQUFZLEVBQUUsYUFBYTtpQkFDNUI7YUFDRjtZQUNELFNBQVMsRUFBRTtnQkFDVCxNQUFNLEVBQUUsMEJBQTBCO2dCQUNsQyxZQUFZLEVBQUU7b0JBQ1osTUFBTSxFQUFFLFVB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QUcsS0FBSyxDQUFDLGtCQUFrQixFQUFFLENBQUM7WUFFOUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDN0MsTUFBTSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsNEJBQTRCLENBQUMsQ0FBQztZQUNuRSxNQUFNLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMzQyxNQUFNLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQyxTQUFTLENBQUMsdUJBQXVCLENBQUMsQ0FBQztRQUMxRSxDQUFDO0lBQ0gsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9reW9oZWkvYXdzX2Nsb3VkX3N1cHBvcnRlci90ZXN0cy91bml0L2NvcmUvcGFyc2VyLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ0xBVURFLm1k5rqW5ougVGVtcGxhdGVQYXJzZXLjg4bjgrnjg4jvvIhHUkVFTuautemajjogRG9uJ3QgUmVpbnZlbnQgdGhlIFdoZWVsICsgVHlwZS1Ecml2ZW7vvIlcblxuaW1wb3J0IHsgcmVhZEZpbGVTeW5jLCB3cml0ZUZpbGVTeW5jLCBta2RpclN5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IHRtcGRpciB9IGZyb20gJ29zJztcblxuLy8g44OG44K544OI5YWo5L2T44Gn5L2/55So44GZ44KL5LiA5pmC44OH44Kj44Os44Kv44OI44OqXG5sZXQgdGVtcERpcjogc3RyaW5nO1xuXG4vLyDlhajjg4bjgrnjg4jliY3jga7mupblgplcbmJlZm9yZUFsbCgoKSA9PiB7XG4gIHRlbXBEaXIgPSBwYXRoLmpvaW4odG1wZGlyKCksICdhd3MtY2xvdWQtc3VwcG9ydGVyLXRlc3QnKTtcbiAgdHJ5IHtcbiAgICBta2RpclN5bmModGVtcERpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gIH0gY2F0Y2gge1xuICAgIC8vIOaXouOBq+WtmOWcqOOBmeOCi+WgtOWQiOOBr+eEoeimllxuICB9XG4gIFxuICAvLyDjg4bjgrnjg4jjg5XjgqPjgq/jgrnjg4Hjg6Pjg7zkvZzmiJBcbiAgY3JlYXRlVGVzdEZpeHR1cmVzKCk7XG59KTtcblxuZnVuY3Rpb24gY3JlYXRlVGVzdEZpeHR1cmVzKCkge1xuICAvLyDmnInlirnjgapZQU1M44OG44Oz44OX44Os44O844OIXG4gIGNvbnN0IHZhbGlkWWFtbFRlbXBsYXRlID0gYFxuQVdTVGVtcGxhdGVGb3JtYXRWZXJzaW9uOiAnMjAxMC0wOS0wOSdcbkRlc2NyaXB0aW9uOiAnVGVzdCBDbG91ZEZvcm1hdGlvbiB0ZW1wbGF0ZSdcblJlc291cmNlczpcbiAgVGVzdERCOlxuICAgIFR5cGU6IEFXUzo6UkRTOjpEQkluc3RhbmNlXG4gICAgUHJvcGVydGllczpcbiAgICAgIEVuZ2luZTogbXlzcWxcbiAgICAgIERCSW5zdGFuY2VDbGFzczogZGIudDMubWljcm9cbiAgICAgIEFsbG9jYXRlZFN0b3JhZ2U6IDIwXG4gIFRlc3RGdW5jdGlvbjpcbiAgICBUeXBlOiBBV1M6OkxhbWJkYTo6RnVuY3Rpb25cbiAgICBQcm9wZXJ0aWVzOlxuICAgICAgUnVudGltZTogbm9kZWpzMjAueFxuICAgICAgSGFuZGxlcjogaW5kZXguaGFuZGxlclxuICAgICAgQ29kZTpcbiAgICAgICAgWmlwRmlsZTogJ2V4cG9ydHMuaGFuZGxlciA9IGFzeW5jICgpID0+ICh7IHN0YXR1c0NvZGU6IDIwMCB9KTsnXG5gO1xuICB3cml0ZUZpbGVTeW5jKHBhdGguam9pbih0ZW1wRGlyLCAndmFsaWQtdGVtcGxhdGUueWFtbCcpLCB2YWxpZFlhbWxUZW1wbGF0ZSwgJ3V0ZjgnKTtcblxuICAvLyDmnInlirnjgapKU09O44OG44Oz44OX44Os44O844OIXG4gIGNvbnN0IHZhbGlkSnNvblRlbXBsYXRlID0ge1xuICAgIFwiQVdTVGVtcGxhdGVGb3JtYXRWZXJzaW9uXCI6IFwiMjAxMC0wOS0wOVwiLFxuICAgIFwiRGVzY3JpcHRpb25cIjogXCJUZXN0IENsb3VkRm9ybWF0aW9uIEpTT04gdGVtcGxhdGVcIixcbiAgICBcIlJlc291cmNlc1wiOiB7XG4gICAgICBcIlRlc3RCdWNrZXRcIjoge1xuICAgICAgICBcIlR5cGVcIjogXCJBV1M6OlMzOjpCdWNrZXRcIixcbiAgICAgICAgXCJQcm9wZXJ0aWVzXCI6IHtcbiAgICAgICAgICBcIkJ1Y2tldE5hbWVcIjogXCJ0ZXN0LWJ1Y2tldFwiXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBcIlRlc3RBUElcIjoge1xuICAgICAgICBcIlR5cGVcIjogXCJBV1M6OkFwaUdhdGV3YXk6OlJlc3RBcGlcIiwgXG4gICAgICAgIFwiUHJvcGVydGllc1wiOiB7XG4gICAgICAgICAgXCJOYW1lXCI6IFwidGVzdC1hcGlcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuICB3cml0ZUZpbGVTeW5jKHBhdGguam9pbih0ZW1wRGlyLCAndmFsaWQtdGVtcGxhdGUuanNvbicpLCBKU09OLnN0cmluZ2lmeSh2YWxpZEpzb25UZW1wbGF0ZSwgbnVsbCwgMiksICd1dGY4Jyk7XG5cbiAgLy8g54Sh5Yq544GqWUFNTOODhuODs+ODl+ODrOODvOODiO+8iOani+aWh+OCqOODqeODvO+8iVxuICBjb25zdCBpbnZhbGlkWWFtbFRlbXBsYXRlID0gYFxuQVdTVGVtcGxhdGVGb3JtYXRWZXJzaW9uOiAnMjAxMC0wOS0wOSdcbkRlc2NyaXB0aW9uOiAnSW52YWxpZCBZQU1MIHRlbXBsYXRlJ1xuUmVzb3VyY2VzOlxuICBUZXN0REI6XG4gICAgVHlwZTogQVdTOjpSRFM6OkRCSW5zdGFuY2VcbiAgICBQcm9wZXJ0aWVzOlxuICAgICAgRW5naW5lOiBteXNxbFxuICAgICAgIyDkuI3mraPjgarjgqTjg7Pjg4fjg7Pjg4hcbiAgICBEQkluc3RhbmNlQ2xhc3M6IGRiLnQzLm1pY3JvXG5gO1xuICB3cml0ZUZpbGVTeW5jKHBhdGguam9pbih0ZW1wRGlyLCAnaW52YWxpZC1zeW50YXgueWFtbCcpLCBpbnZhbGlkWWFtbFRlbXBsYXRlLCAndXRmOCcpO1xuXG4gIC8vIOeEoeWKueOBqkpTT07jg4bjg7Pjg5fjg6zjg7zjg4jvvIjmp4vmlofjgqjjg6njg7zvvIkgIFxuICBjb25zdCBpbnZhbGlkSnNvblRlbXBsYXRlID0gYHtcbiAgXCJBV1NUZW1wbGF0ZUZvcm1hdFZlcnNpb25cIjogXCIyMDEwLTA5LTA5XCIsXG4gIFwiRGVzY3JpcHRpb25cIjogXCJJbnZhbGlkIEpTT04gdGVtcGxhdGVcIixcbiAgXCJSZXNvdXJjZXNcIjoge1xuICAgIFwiVGVzdEJ1Y2tldFwiOiB7XG4gICAgICBcIlR5cGVcIjogXCJBV1M6OlMzOjpCdWNrZXRcIixcbiAgICAgIFwiUHJvcGVydGllc1wiOiB7XG4gICAgICAgIFwiQnVja2V0TmFtZVwiOiBcInRlc3QtYnVja2V0XCJcbiAgICAgIH1cbiAgICB9LCAvLyDkuI3mraPjgarjgqvjg7Pjg55cbiAgfVxufWA7XG4gIHdyaXRlRmlsZVN5bmMocGF0aC5qb2luKHRlbXBEaXIsICdpbnZhbGlkLXN5bnRheC5qc29uJyksIGludmFsaWRKc29uVGVtcGxhdGUsICd1dGY4Jyk7XG5cbiAgLy8g5aSn44GN44Gq44OV44Kh44Kk44Or77yINTBNQui2he+8iVxuICBjb25zdCBsYXJnZVRlbXBsYXRlID0ge1xuICAgIEFXU1RlbXBsYXRlRm9ybWF0VmVyc2lvbjogXCIyMDEwLTA5LTA5XCIsIFxuICAgIERlc2NyaXB0aW9uOiBcIkxhcmdlIHRlbXBsYXRlIGZvciBzaXplIHRlc3RpbmdcIixcbiAgICBSZXNvdXJjZXM6IHt9XG4gIH07XG4gIC8vIOWkp+mHj+OBruODquOCveODvOOCueOCkueUn+aIkFxuICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDAwOyBpKyspIHtcbiAgICBsYXJnZVRlbXBsYXRlLlJlc291cmNlc1tgUmVzb3VyY2Uke2l9YF0gPSB7XG4gICAgICBUeXBlOiBcIkFXUzo6UzM6OkJ1Y2tldFwiLFxuICAgICAgUHJvcGVydGllczoge1xuICAgICAgICBCdWNrZXROYW1lOiBgYnVja2V0LSR7aX1gLFxuICAgICAgICBEZXNjcmlwdGlvbjogYFRlc3QgYnVja2V0IG51bWJlciAke2l9IGZvciBsYXJnZSB0ZW1wbGF0ZSBzaXplIHRlc3Rpbmcgd2l0aCBsb25nIGRlc2NyaXB0aW9uIHRvIGluY3JlYXNlIGZpbGUgc2l6ZSBzaWduaWZpY2FudGx5YFxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgd3JpdGVGaWxlU3luYyhwYXRoLmpvaW4odGVtcERpciwgJ2xhcmdlLXRlbXBsYXRlLmpzb24nKSwgSlNPTi5zdHJpbmdpZnkobGFyZ2VUZW1wbGF0ZSwgbnVsbCwgMiksICd1dGY4Jyk7XG59XG5cbmRlc2NyaWJlKCdUZW1wbGF0ZVBhcnNlcuWei+WuieWFqOino+aekO+8iENMQVVERS5tZDogR1JFRU7mrrXpmo7vvIknLCAoKSA9PiB7XG5cbiAgLy8gR1JFRU7mrrXpmo46IFRlbXBsYXRlUGFyc2Vy5a6f6KOF56K66KqNXG4gIGl0KCdzaG91bGQgaW1wbGVtZW50IFRlbXBsYXRlUGFyc2VyIHN1Y2Nlc3NmdWxseScsICgpID0+IHtcbiAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgcmVxdWlyZSgnLi4vLi4vLi4vc3JjL2NvcmUvcGFyc2VyJyk7XG4gICAgfSkubm90LnRvVGhyb3coKTsgLy8g5a6f6KOF5a6M5LqG44Gn5oiQ5YqfXG4gIH0pO1xuXG4gIC8vIFlBTUzop6PmnpDjg4bjgrnjg4jvvIhHUkVFTuautemajjog5a6f6KOF56K66KqN77yJXG4gIGl0KCdzaG91bGQgcGFyc2UgdmFsaWQgWUFNTCBDbG91ZEZvcm1hdGlvbiB0ZW1wbGF0ZScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IFRlbXBsYXRlUGFyc2VyIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvY29yZS9wYXJzZXInKTtcbiAgICBjb25zdCBwYXJzZXIgPSBuZXcgVGVtcGxhdGVQYXJzZXIoKTtcbiAgICBcbiAgICBjb25zdCB5YW1sUGF0aCA9IHBhdGguam9pbih0ZW1wRGlyLCAndmFsaWQtdGVtcGxhdGUueWFtbCcpO1xuICAgIGNvbnN0IHRlbXBsYXRlID0gYXdhaXQgcGFyc2VyLnBhcnNlKHlhbWxQYXRoKTtcbiAgICBcbiAgICBleHBlY3QodGVtcGxhdGUpLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KHRlbXBsYXRlLkFXU1RlbXBsYXRlRm9ybWF0VmVyc2lvbikudG9CZSgnMjAxMC0wOS0wOScpO1xuICAgIGV4cGVjdCh0ZW1wbGF0ZS5SZXNvdXJjZXMpLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KHRlbXBsYXRlLlJlc291cmNlcy5UZXN0REIpLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KHRlbXBsYXRlLlJlc291cmNlcy5UZXN0RnVuY3Rpb24pLnRvQmVEZWZpbmVkKCk7XG4gIH0pO1xuXG4gIC8vIEpTT07op6PmnpDjg4bjgrnjg4jvvIhHUkVFTuautemajjog5a6f6KOF56K66KqN77yJXG4gIGl0KCdzaG91bGQgcGFyc2UgdmFsaWQgSlNPTiBDbG91ZEZvcm1hdGlvbiB0ZW1wbGF0ZScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IFRlbXBsYXRlUGFyc2VyIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvY29yZS9wYXJzZXInKTtcbiAgICBjb25zdCBwYXJzZXIgPSBuZXcgVGVtcGxhdGVQYXJzZXIoKTtcbiAgICBcbiAgICBjb25zdCBqc29uUGF0aCA9IHBhdGguam9pbih0ZW1wRGlyLCAndmFsaWQtdGVtcGxhdGUuanNvbicpO1xuICAgIGNvbnN0IHRlbXBsYXRlID0gYXdhaXQgcGFyc2VyLnBhcnNlKGpzb25QYXRoKTtcbiAgICBcbiAgICBleHBlY3QodGVtcGxhdGUpLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KHRlbXBsYXRlLkFXU1RlbXBsYXRlRm9ybWF0VmVyc2lvbikudG9CZSgnMjAxMC0wOS0wOScpO1xuICAgIGV4cGVjdCh0ZW1wbGF0ZS5SZXNvdXJjZXMpLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KHRlbXBsYXRlLlJlc291cmNlcy5UZXN0QnVja2V0KS50b0JlRGVmaW5lZCgpO1xuICAgIGV4cGVjdCh0ZW1wbGF0ZS5SZXNvdXJjZXMuVGVzdEFQSSkudG9CZURlZmluZWQoKTtcbiAgfSk7XG5cbiAgLy8g44OV44Kh44Kk44Or5a2Y5Zyo44Ko44Op44O844OG44K544OI77yIQ2xvdWRTdXBwb3J0ZXJFcnJvcue1seWQiO+8iVxuICBpdCgnc2hvdWxkIGhhbmRsZSBmaWxlIG5vdCBmb3VuZCBlcnJvcicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IFRlbXBsYXRlUGFyc2VyIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvY29yZS9wYXJzZXInKTtcbiAgICBjb25zdCB7IGlzRmlsZUVycm9yIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvdXRpbHMvZXJyb3InKTtcbiAgICBjb25zdCBwYXJzZXIgPSBuZXcgVGVtcGxhdGVQYXJzZXIoKTtcbiAgICBcbiAgICBjb25zdCBub25FeGlzdGVudFBhdGggPSBwYXRoLmpvaW4odGVtcERpciwgJ25vbi1leGlzdGVudC55YW1sJyk7XG4gICAgXG4gICAgYXdhaXQgZXhwZWN0KHBhcnNlci5wYXJzZShub25FeGlzdGVudFBhdGgpKS5yZWplY3RzLnRvVGhyb3coKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgYXdhaXQgcGFyc2VyLnBhcnNlKG5vbkV4aXN0ZW50UGF0aCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGV4cGVjdChpc0ZpbGVFcnJvcihlcnJvcikpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZXJyb3IuZmlsZVBhdGgpLnRvQmUobm9uRXhpc3RlbnRQYXRoKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIOODleOCoeOCpOODq+OCteOCpOOCuuWItumZkOODhuOCueODiO+8iDUwTULliLbpmZDvvIlcbiAgaXQoJ3Nob3VsZCByZWplY3QgZmlsZXMgbGFyZ2VyIHRoYW4gNTBNQicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IFRlbXBsYXRlUGFyc2VyIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvY29yZS9wYXJzZXInKTtcbiAgICBjb25zdCB7IGlzRmlsZUVycm9yIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvdXRpbHMvZXJyb3InKTtcbiAgICBjb25zdCBwYXJzZXIgPSBuZXcgVGVtcGxhdGVQYXJzZXIoKTtcbiAgICBcbiAgICBjb25zdCBsYXJnZVBhdGggPSBwYXRoLmpvaW4odGVtcERpciwgJ2xhcmdlLXRlbXBsYXRlLmpzb24nKTtcbiAgICBcbiAgICBhd2FpdCBleHBlY3QocGFyc2VyLnBhcnNlKGxhcmdlUGF0aCkpLnJlamVjdHMudG9UaHJvdygpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwYXJzZXIucGFyc2UobGFyZ2VQYXRoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZXhwZWN0KGlzRmlsZUVycm9yKGVycm9yKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ3RvbyBsYXJnZScpO1xuICAgICAgZXhwZWN0KGVycm9yLmRldGFpbHM/LmZpbGVTaXplKS50b0JlR3JlYXRlclRoYW4oNTAgKiAxMDI0ICogMTAyNCk7XG4gICAgfVxuICB9KTtcblxuICAvLyDoqq3jgb/ovrzjgb/mmYLplpPliLbpmZDjg4bjgrnjg4jvvIg156eS5Yi26ZmQ44CB44Oi44OD44Kv5L2/55So77yJXG4gIGl0KCdzaG91bGQgdGltZW91dCBmaWxlIHJlYWRpbmcgYWZ0ZXIgNSBzZWNvbmRzJywgYXN5bmMgKCkgPT4ge1xuICAgIC8vIOWun+mam+OBrjXnp5LlvoXjgaHjga/pgb/jgZHjgabjgIHjg6Ljg4Pjgq/kvb/nlKhcbiAgICBjb25zdCB7IFRlbXBsYXRlUGFyc2VyIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvY29yZS9wYXJzZXInKTtcbiAgICBjb25zdCBwYXJzZXIgPSBuZXcgVGVtcGxhdGVQYXJzZXIoKTtcbiAgICBcbiAgICAvLyDpgJrluLjjgrXjgqTjgrrjga7jg5XjgqHjgqTjg6vjga8156eS5Lul5YaF44Gn6Kqt44G/6L6844KB44KL5oOz5a6aXG4gICAgY29uc3QgeWFtbFBhdGggPSBwYXRoLmpvaW4odGVtcERpciwgJ3ZhbGlkLXRlbXBsYXRlLnlhbWwnKTtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBhd2FpdCBwYXJzZXIucGFyc2UoeWFtbFBhdGgpO1xuICAgIGNvbnN0IGR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWU7XG4gICAgXG4gICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oNTAwMCk7XG4gIH0pO1xuXG4gIC8vIFlBTUzmp4vmlofjgqjjg6njg7zjg4/jg7Pjg4njg6rjg7PjgrDjg4bjgrnjg4hcbiAgaXQoJ3Nob3VsZCBwcm92aWRlIGRldGFpbGVkIFlBTUwgc3ludGF4IGVycm9yJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgVGVtcGxhdGVQYXJzZXIgfSA9IHJlcXVpcmUoJy4uLy4uLy4uL3NyYy9jb3JlL3BhcnNlcicpO1xuICAgIGNvbnN0IHsgaXNQYXJzZUVycm9yIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvdXRpbHMvZXJyb3InKTtcbiAgICBjb25zdCBwYXJzZXIgPSBuZXcgVGVtcGxhdGVQYXJzZXIoKTtcbiAgICBcbiAgICBjb25zdCBpbnZhbGlkWWFtbFBhdGggPSBwYXRoLmpvaW4odGVtcERpciwgJ2ludmFsaWQtc3ludGF4LnlhbWwnKTtcbiAgICBcbiAgICBhd2FpdCBleHBlY3QocGFyc2VyLnBhcnNlKGludmFsaWRZYW1sUGF0aCkpLnJlamVjdHMudG9UaHJvdygpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwYXJzZXIucGFyc2UoaW52YWxpZFlhbWxQYXRoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZXhwZWN0KGlzUGFyc2VFcnJvcihlcnJvcikpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdZQU1MIHN5bnRheCBlcnJvcicpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gSlNPTuani+aWh+OCqOODqeODvOODj+ODs+ODieODquODs+OCsOODhuOCueODiFxuICBpdCgnc2hvdWxkIHByb3ZpZGUgZGV0YWlsZWQgSlNPTiBzeW50YXggZXJyb3Igd2l0aCBwb3NpdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IFRlbXBsYXRlUGFyc2VyIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvY29yZS9wYXJzZXInKTtcbiAgICBjb25zdCB7IGlzUGFyc2VFcnJvciB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vc3JjL3V0aWxzL2Vycm9yJyk7XG4gICAgY29uc3QgcGFyc2VyID0gbmV3IFRlbXBsYXRlUGFyc2VyKCk7XG4gICAgXG4gICAgY29uc3QgaW52YWxpZEpzb25QYXRoID0gcGF0aC5qb2luKHRlbXBEaXIsICdpbnZhbGlkLXN5bnRheC5qc29uJyk7XG4gICAgXG4gICAgYXdhaXQgZXhwZWN0KHBhcnNlci5wYXJzZShpbnZhbGlkSnNvblBhdGgpKS5yZWplY3RzLnRvVGhyb3coKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgYXdhaXQgcGFyc2VyLnBhcnNlKGludmFsaWRKc29uUGF0aCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGV4cGVjdChpc1BhcnNlRXJyb3IoZXJyb3IpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignSlNPTiBzeW50YXggZXJyb3InKTtcbiAgICAgIGV4cGVjdChlcnJvci5kZXRhaWxzPy5uZWFyVGV4dCkudG9CZURlZmluZWQoKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIENsb3VkRm9ybWF0aW9u5qeL6YCg5qSc6Ki844OG44K544OIXG4gIGl0KCdzaG91bGQgdmFsaWRhdGUgQ2xvdWRGb3JtYXRpb24gdGVtcGxhdGUgc3RydWN0dXJlJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgVGVtcGxhdGVQYXJzZXIgfSA9IHJlcXVpcmUoJy4uLy4uLy4uL3NyYy9jb3JlL3BhcnNlcicpO1xuICAgIGNvbnN0IHBhcnNlciA9IG5ldyBUZW1wbGF0ZVBhcnNlcigpO1xuICAgIFxuICAgIC8vIOacieWKueOBquODhuODs+ODl+ODrOODvOODiOOBruino+aekFxuICAgIGNvbnN0IHZhbGlkUGF0aCA9IHBhdGguam9pbih0ZW1wRGlyLCAndmFsaWQtdGVtcGxhdGUueWFtbCcpO1xuICAgIGNvbnN0IHRlbXBsYXRlID0gYXdhaXQgcGFyc2VyLnBhcnNlKHZhbGlkUGF0aCk7XG4gICAgXG4gICAgZXhwZWN0KHRlbXBsYXRlKS50b0JlVmFsaWRDbG91ZEZvcm1hdGlvblJlc291cmNlKCk7XG4gICAgZXhwZWN0KE9iamVjdC5rZXlzKHRlbXBsYXRlLlJlc291cmNlcykpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgfSk7XG5cbiAgLy8gQ0xBVURFLm1kOiBObyBhbnkgdHlwZXPmpJzoqLxcbiAgaXQoJ3Nob3VsZCBub3QgdXNlIGFueSB0eXBlcyBpbiBwYXJzZXIgaW1wbGVtZW50YXRpb24nLCAoKSA9PiB7XG4gICAgY29uc3QgcGFyc2VyQ29kZSA9IHJlYWRGaWxlU3luYyhcbiAgICAgIHBhdGguam9pbihfX2Rpcm5hbWUsICcuLi8uLi8uLi9zcmMvY29yZS9wYXJzZXIudHMnKSxcbiAgICAgICd1dGY4J1xuICAgICk7XG4gICAgZXhwZWN0KHBhcnNlckNvZGUpLnRvSGF2ZU5vQW55VHlwZXMoKTtcbiAgfSk7XG5cbiAgLy8g5Z6L5a6J5YWo5oCn44OG44K544OI77yIQ2xvdWRGb3JtYXRpb25UZW1wbGF0ZeWei++8iVxuICBpdCgnc2hvdWxkIHJldHVybiBwcm9wZXJseSB0eXBlZCBDbG91ZEZvcm1hdGlvblRlbXBsYXRlJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgVGVtcGxhdGVQYXJzZXIgfSA9IHJlcXVpcmUoJy4uLy4uLy4uL3NyYy9jb3JlL3BhcnNlcicpO1xuICAgIGNvbnN0IHBhcnNlciA9IG5ldyBUZW1wbGF0ZVBhcnNlcigpO1xuICAgIFxuICAgIGNvbnN0IHlhbWxQYXRoID0gcGF0aC5qb2luKHRlbXBEaXIsICd2YWxpZC10ZW1wbGF0ZS55YW1sJyk7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBhd2FpdCBwYXJzZXIucGFyc2UoeWFtbFBhdGgpO1xuICAgIFxuICAgIC8vIFR5cGVTY3JpcHTlnovmjqjoq5bjgavjgojjgorlnovlronlhahcbiAgICBleHBlY3QodHlwZW9mIHRlbXBsYXRlLkFXU1RlbXBsYXRlRm9ybWF0VmVyc2lvbikudG9CZSgnc3RyaW5nJyk7XG4gICAgZXhwZWN0KHR5cGVvZiB0ZW1wbGF0ZS5EZXNjcmlwdGlvbikudG9CZSgnc3RyaW5nJyk7XG4gICAgZXhwZWN0KHR5cGVvZiB0ZW1wbGF0ZS5SZXNvdXJjZXMpLnRvQmUoJ29iamVjdCcpO1xuICAgIFxuICAgIC8vIOODquOCveODvOOCueOBruWei+WuieWFqOaAp1xuICAgIGNvbnN0IHRlc3REQiA9IHRlbXBsYXRlLlJlc291cmNlcy5UZXN0REI7XG4gICAgZXhwZWN0KHRlc3REQikudG9CZURlZmluZWQoKTtcbiAgICBleHBlY3QodGVzdERCLlR5cGUpLnRvQmUoJ0FXUzo6UkRTOjpEQkluc3RhbmNlJyk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdUZW1wbGF0ZVBhcnNlcuODkeODleOCqeODvOODnuODs+OCueODhuOCueODiO+8iENMQVVERS5tZDog5oCn6IO96KaB5Lu277yJJywgKCkgPT4ge1xuXG4gIC8vIOODkeODleOCqeODvOODnuODs+OCueimgeS7tuODhuOCueODiO+8iOmAmuW4uOODleOCoeOCpOODq+OBrzXnp5Lku6XlhoXvvIlcbiAgaXQoJ3Nob3VsZCBwYXJzZSBub3JtYWwgdGVtcGxhdGVzIHdpdGhpbiBwZXJmb3JtYW5jZSBsaW1pdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBUZW1wbGF0ZVBhcnNlciB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vc3JjL2NvcmUvcGFyc2VyJyk7XG4gICAgY29uc3QgcGFyc2VyID0gbmV3IFRlbXBsYXRlUGFyc2VyKCk7XG4gICAgXG4gICAgY29uc3QgeWFtbFBhdGggPSBwYXRoLmpvaW4odGVtcERpciwgJ3ZhbGlkLXRlbXBsYXRlLnlhbWwnKTtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGF3YWl0IHBhcnNlci5wYXJzZSh5YW1sUGF0aCk7XG4gICAgY29uc3QgZHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICBcbiAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbigxMDAwKTsgLy8g6YCa5bi444OV44Kh44Kk44Or44GvMeenkuS7peWGhVxuICAgIGV4cGVjdCh0ZW1wbGF0ZSkudG9CZURlZmluZWQoKTtcbiAgfSk7XG5cbiAgLy8g44Oh44Oi44Oq5Yq5546H44OG44K544OI77yI6YGp5YiH44Gq44Oq44K944O844K5566h55CG77yJICBcbiAgaXQoJ3Nob3VsZCBoYW5kbGUgZmlsZXMgZWZmaWNpZW50bHkgd2l0aG91dCBtZW1vcnkgbGVha3MnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBUZW1wbGF0ZVBhcnNlciB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vc3JjL2NvcmUvcGFyc2VyJyk7XG4gICAgXG4gICAgLy8g6KSH5pWw5Zue44Gu6Kej5p6Q44Gn44Oh44Oi44Oq44Oq44O844Kv44GM44Gq44GE44GT44Go44KS56K66KqNXG4gICAgY29uc3QgcGFyc2VyID0gbmV3IFRlbXBsYXRlUGFyc2VyKCk7XG4gICAgY29uc3QgeWFtbFBhdGggPSBwYXRoLmpvaW4odGVtcERpciwgJ3ZhbGlkLXRlbXBsYXRlLnlhbWwnKTtcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gYXdhaXQgcGFyc2VyLnBhcnNlKHlhbWxQYXRoKTtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZS5SZXNvdXJjZXMpLnRvQmVEZWZpbmVkKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIOODoeODouODquS9v+eUqOmHj+OBjOWQiOeQhueahOevhOWbsuWGhVxuICAgIGNvbnN0IG1lbW9yeVVzYWdlID0gcHJvY2Vzcy5tZW1vcnlVc2FnZSgpLmhlYXBVc2VkIC8gMTAyNCAvIDEwMjQ7XG4gICAgZXhwZWN0KG1lbW9yeVVzYWdlKS50b0JlTGVzc1RoYW4oMTAwKTsgLy8gMTAwTULku6XkuItcbiAgfSk7XG5cbiAgLy8g5Lim6KGM6Kej5p6Q44OG44K544OI77yI5Z6L5a6J5YWo5oCn77yJXG4gIGl0KCdzaG91bGQgaGFuZGxlIGNvbmN1cnJlbnQgcGFyc2luZyByZXF1ZXN0cyBzYWZlbHknLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBUZW1wbGF0ZVBhcnNlciB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vc3JjL2NvcmUvcGFyc2VyJyk7XG4gICAgY29uc3QgcGFyc2VyID0gbmV3IFRlbXBsYXRlUGFyc2VyKCk7XG4gICAgXG4gICAgY29uc3QgeWFtbFBhdGggPSBwYXRoLmpvaW4odGVtcERpciwgJ3ZhbGlkLXRlbXBsYXRlLnlhbWwnKTtcbiAgICBjb25zdCBqc29uUGF0aCA9IHBhdGguam9pbih0ZW1wRGlyLCAndmFsaWQtdGVtcGxhdGUuanNvbicpO1xuICAgIFxuICAgIC8vIOS4puihjOino+aekFxuICAgIGNvbnN0IHByb21pc2VzID0gW1xuICAgICAgcGFyc2VyLnBhcnNlKHlhbWxQYXRoKSxcbiAgICAgIHBhcnNlci5wYXJzZShqc29uUGF0aCksXG4gICAgICBwYXJzZXIucGFyc2UoeWFtbFBhdGgpLFxuICAgICAgcGFyc2VyLnBhcnNlKGpzb25QYXRoKVxuICAgIF07XG4gICAgXG4gICAgY29uc3QgdGVtcGxhdGVzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgIFxuICAgIGV4cGVjdCh0ZW1wbGF0ZXMpLnRvSGF2ZUxlbmd0aCg0KTtcbiAgICB0ZW1wbGF0ZXMuZm9yRWFjaCh0ZW1wbGF0ZSA9PiB7XG4gICAgICBleHBlY3QodGVtcGxhdGUuUmVzb3VyY2VzKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnVGVtcGxhdGVQYXJzZXLjgqjjg6njg7zjg4/jg7Pjg4njg6rjg7PjgrDntbHlkIjvvIhDTEFVREUubWQ6IOWei+WuieWFqOOCqOODqeODvOWHpueQhu+8iScsICgpID0+IHtcblxuICAvLyBDbG91ZFN1cHBvcnRlckVycm9y44K344K544OG44Og57Wx5ZCI56K66KqNXG4gIGl0KCdzaG91bGQgaW50ZWdyYXRlIHdpdGggQ2xvdWRTdXBwb3J0ZXJFcnJvciBzeXN0ZW0nLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBUZW1wbGF0ZVBhcnNlciB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vc3JjL2NvcmUvcGFyc2VyJyk7XG4gICAgY29uc3QgeyBDbG91ZFN1cHBvcnRlckVycm9yLCBFcnJvclR5cGUgfSA9IHJlcXVpcmUoJy4uLy4uLy4uL3NyYy91dGlscy9lcnJvcicpO1xuICAgIGNvbnN0IHBhcnNlciA9IG5ldyBUZW1wbGF0ZVBhcnNlcigpO1xuICAgIFxuICAgIGNvbnN0IG5vbkV4aXN0ZW50UGF0aCA9ICcvbm9uL2V4aXN0ZW50L2ZpbGUueWFtbCc7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHBhcnNlci5wYXJzZShub25FeGlzdGVudFBhdGgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBleHBlY3QoZXJyb3IpLnRvQmVJbnN0YW5jZU9mKENsb3VkU3VwcG9ydGVyRXJyb3IpO1xuICAgICAgZXhwZWN0KGVycm9yLnR5cGUpLnRvQmUoRXJyb3JUeXBlLkZJTEVfRVJST1IpO1xuICAgICAgZXhwZWN0KGVycm9yLmZpbGVQYXRoKS50b0JlKG5vbkV4aXN0ZW50UGF0aCk7XG4gICAgICBcbiAgICAgIC8vIOani+mAoOWMluWHuuWKm+eiuuiqjVxuICAgICAgY29uc3Qgc3RydWN0dXJlZCA9IGVycm9yLnRvU3RydWN0dXJlZE91dHB1dCgpO1xuICAgICAgZXhwZWN0KHN0cnVjdHVyZWQuZXJyb3IpLnRvQmUoJ0ZJTEVfRVJST1InKTtcbiAgICAgIGV4cGVjdChzdHJ1Y3R1cmVkLmZpbGVQYXRoKS50b0JlKG5vbkV4aXN0ZW50UGF0aCk7XG4gICAgICBleHBlY3Qoc3RydWN0dXJlZC50aW1lc3RhbXApLnRvQmVEZWZpbmVkKCk7XG4gICAgfVxuICB9KTtcblxuICAvLyDjgqjjg6njg7zmj5DmoYjjg6Hjg4Pjgrvjg7zjgrjjg4bjgrnjg4jvvIjjg6bjg7zjgrbjg5Pjg6rjg4bjgqPvvIlcbiAgaXQoJ3Nob3VsZCBwcm92aWRlIGhlbHBmdWwgZXJyb3Igc3VnZ2VzdGlvbnMgdmlhIENsb3VkU3VwcG9ydGVyRXJyb3InLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBUZW1wbGF0ZVBhcnNlciB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vc3JjL2NvcmUvcGFyc2VyJyk7XG4gICAgY29uc3QgcGFyc2VyID0gbmV3IFRlbXBsYXRlUGFyc2VyKCk7XG4gICAgXG4gICAgY29uc3QgaW52YWxpZEpzb25QYXRoID0gcGF0aC5qb2luKHRlbXBEaXIsICdpbnZhbGlkLXN5bnRheC5qc29uJyk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHBhcnNlci5wYXJzZShpbnZhbGlkSnNvblBhdGgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyDjgqjjg6njg7zjg6Hjg4Pjgrvjg7zjgrjjga7mnInnlKjmgKfnorroqo1cbiAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ3N5bnRheCBlcnJvcicpO1xuICAgICAgZXhwZWN0KGVycm9yLmRldGFpbHMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBcbiAgICAgIC8vIEVycm9ySGFuZGxlcuOBrmdldFN1Z2dlc3Rpb27jga/lhoXpg6jjg6Hjgr3jg4Pjg4njgarjga7jgadcbiAgICAgIC8vIOOCqOODqeODvOOCv+OCpOODl+OBjOato+OBl+OBhOOBk+OBqOOBruOBv+eiuuiqjVxuICAgICAgZXhwZWN0KGVycm9yLnR5cGUpLnRvQmUoJ1BBUlNFX0VSUk9SJyk7XG4gICAgfVxuICB9KTtcblxuICAvLyDmp4vpgKDljJbjgqjjg6njg7zlh7rlipvjg4bjgrnjg4jvvIjlnovlronlhajmgKfvvIlcbiAgaXQoJ3Nob3VsZCBvdXRwdXQgc3RydWN0dXJlZCBlcnJvciBpbmZvcm1hdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IFRlbXBsYXRlUGFyc2VyIH0gPSByZXF1aXJlKCcuLi8uLi8uLi9zcmMvY29yZS9wYXJzZXInKTtcbiAgICBjb25zdCBwYXJzZXIgPSBuZXcgVGVtcGxhdGVQYXJzZXIoKTtcbiAgICBcbiAgICAvLyDnqbrjga5SZXNvdXJjZXPjgrvjgq/jgrfjg6fjg7Pjgafjgqjjg6njg7xcbiAgICBjb25zdCBlbXB0eVJlc291cmNlc1RlbXBsYXRlID0gYFxuQVdTVGVtcGxhdGVGb3JtYXRWZXJzaW9uOiAnMjAxMC0wOS0wOSdcblJlc291cmNlczoge31cbmA7XG4gICAgXG4gICAgY29uc3QgdGVtcFBhdGggPSBwYXRoLmpvaW4odGVtcERpciwgJ2VtcHR5LXJlc291cmNlcy55YW1sJyk7XG4gICAgd3JpdGVGaWxlU3luYyh0ZW1wUGF0aCwgZW1wdHlSZXNvdXJjZXNUZW1wbGF0ZSwgJ3V0ZjgnKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgYXdhaXQgcGFyc2VyLnBhcnNlKHRlbXBQYXRoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3Qgc3RydWN0dXJlZCA9IGVycm9yLnRvU3RydWN0dXJlZE91dHB1dCgpO1xuICAgICAgXG4gICAgICBleHBlY3Qoc3RydWN0dXJlZC5lcnJvcikudG9CZSgnUEFSU0VfRVJST1InKTtcbiAgICAgIGV4cGVjdChzdHJ1Y3R1cmVkLm1lc3NhZ2UpLnRvQ29udGFpbignUmVzb3VyY2VzIHNlY3Rpb24gaXMgZW1wdHknKTtcbiAgICAgIGV4cGVjdChzdHJ1Y3R1cmVkLmZpbGVQYXRoKS50b0JlKHRlbXBQYXRoKTtcbiAgICAgIGV4cGVjdChzdHJ1Y3R1cmVkLmRldGFpbHM/Lm5lYXJUZXh0KS50b0NvbnRhaW4oJ2F0IGxlYXN0IG9uZSByZXNvdXJjZScpO1xuICAgIH1cbiAgfSk7XG59KTtcblxuIl0sInZlcnNpb24iOjN9