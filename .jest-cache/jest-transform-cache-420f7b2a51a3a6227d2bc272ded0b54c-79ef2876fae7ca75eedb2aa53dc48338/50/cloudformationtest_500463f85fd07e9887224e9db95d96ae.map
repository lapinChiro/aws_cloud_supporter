{"file":"/home/kyohei/aws_cloud_supporter/tests/unit/types/cloudformation.test.ts","mappings":"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","names":[],"sources":["/home/kyohei/aws_cloud_supporter/tests/unit/types/cloudformation.test.ts"],"sourcesContent":["// CLAUDE.md準拠型安全性テスト（RED段階: any型違反検知）\nimport { readFileSync } from 'fs';\nimport path from 'path';\n\ndescribe('CloudFormation型定義（CLAUDE.md: No any types）', () => {\n  \n  // CLAUDE.md核心原則: No any types検証\n  it('should not contain any types in cloudformation.ts', () => {\n    // まだファイルが存在しないか、any型を含んでいる場合に失敗させる\n    let cloudFormationCode = '';\n    try {\n      cloudFormationCode = readFileSync(\n        path.join(__dirname, '../../../src/types/cloudformation.ts'), \n        'utf8'\n      );\n    } catch (error) {\n      // ファイルが存在しない場合は失敗\n      fail('cloudformation.ts not found - need to implement');\n    }\n    \n    // any型が含まれている場合は失敗\n    expect(cloudFormationCode).toHaveNoAnyTypes();\n  });\n\n  // TypeScript strict mode準拠テスト\n  it('should compile without type errors', async () => {\n    const { execSync } = await import('child_process');\n    \n    try {\n      execSync('npx tsc --noEmit', { encoding: 'utf8', stdio: 'pipe' });\n      // コンパイル成功なら通過\n      expect(true).toBe(true);\n    } catch (error) {\n      // コンパイルエラーがあれば失敗\n      fail(`TypeScript compilation failed: ${error.message}`);\n    }\n  });\n\n  // CloudFormationTemplate型の基本構造テスト\n  it('should define proper CloudFormationTemplate interface', () => {\n    // まだ実装されていないので失敗する想定\n    expect(() => {\n      // 型定義のインポートテスト\n      require('../../../src/types/cloudformation');\n    }).not.toThrow();\n  });\n\n  // RDSProperties型安全性テスト\n  it('should define type-safe RDSProperties without any types', () => {\n    // 実装後にRDSPropertiesが適切に型定義されているかテスト\n    const testRDSProperties = {\n      DBInstanceClass: 'db.t3.micro',\n      Engine: 'mysql' as const,\n      AllocatedStorage: 20,\n      MultiAZ: true\n    };\n    \n    // 型安全性の検証（型推論が正しく働くかテスト）\n    expect(typeof testRDSProperties.DBInstanceClass).toBe('string');\n    expect(typeof testRDSProperties.Engine).toBe('string');\n    expect(typeof testRDSProperties.AllocatedStorage).toBe('number');\n    expect(typeof testRDSProperties.MultiAZ).toBe('boolean');\n  });\n\n  // Union型の型安全性テスト\n  it('should define proper union types for resource types', () => {\n    // SupportedResource Union型が適切に定義されているかテスト\n    // 実装前なので失敗する想定\n    expect(true).toBe(false); // 意図的に失敗させる（RED段階）\n  });\n\n  // エラー詳細型の安全性テスト\n  it('should define ErrorDetails without any type', () => {\n    // ErrorDetails型がany型を含まずに定義されているかテスト\n    const testErrorDetails = {\n      originalError: 'test error',\n      fileSize: 1024,\n      lineNumber: 42,\n      columnNumber: 10\n    };\n    \n    expect(typeof testErrorDetails.originalError).toBe('string');\n    expect(typeof testErrorDetails.fileSize).toBe('number');\n    expect(typeof testErrorDetails.lineNumber).toBe('number');\n    expect(typeof testErrorDetails.columnNumber).toBe('number');\n  });\n});\n\ndescribe('メトリクス型定義（CLAUDE.md: Type-Driven Development）', () => {\n\n  // MetricDefinition型安全性テスト\n  it('should define type-safe MetricDefinition interface', () => {\n    // 実装前なので失敗する想定\n    const testMetric = {\n      metric_name: 'CPUUtilization',\n      namespace: 'AWS/RDS',\n      unit: 'Percent',\n      description: 'CPU利用率',\n      statistic: 'Average' as const,\n      recommended_threshold: {\n        warning: 70,\n        critical: 90\n      },\n      evaluation_period: 300,\n      category: 'Performance' as const,\n      importance: 'High' as const\n    };\n    \n    // しきい値の型安全性\n    expect(testMetric.recommended_threshold).toHaveValidThreshold();\n    \n    // enum型の型安全性\n    expect(['Average', 'Sum', 'Maximum', 'Minimum']).toContain(testMetric.statistic);\n    expect(['Performance', 'Error', 'Saturation', 'Latency']).toContain(testMetric.category);\n    expect(['High', 'Medium', 'Low']).toContain(testMetric.importance);\n  });\n\n  // MetricConfig型安全性テスト\n  it('should define type-safe MetricConfig interface', () => {\n    // applicableWhen関数の型安全性テスト\n    expect(true).toBe(false); // 意図的に失敗（RED段階）\n  });\n});\n\ndescribe('共通型定義（CLAUDE.md: DRY原則）', () => {\n\n  // 共通型の重複排除テスト\n  it('should define common types without duplication', () => {\n    // common.ts実装前なので失敗\n    expect(true).toBe(false); // 意図的に失敗（RED段階）\n  });\n\n  // 型安全性の包括テスト\n  it('should ensure all types are strictly typed', () => {\n    // 全型定義ファイルでany型が使用されていないことを確認\n    expect(true).toBe(false); // 意図的に失敗（RED段階）\n  });\n});"],"version":3}